{"version":3,"sources":["components_controll/fbase.js","components_controll/ProvideAuth.js","components_view/CommonStyle.js","constants.js","localStorage.js","components_controll/ProvideChat.js","components_controll/ProvideContact.js","components_view/ContactSlot.js","routes/Contact.js","components_controll/ProvideYuweets.js","components_view/Yuweet.js","components_view/YuweetFactory.js","routes/Home.js","routes/LogIn.js","components_controll/ProvideProfile.js","routes/Profile.js","components_view/Navigation.js","components_controll/ProvideAddContact.js","routes/AddContact.js","components_view/ChatBox.js","image/verified.png","components_view/RightAside.js","components_view/AppRouter.js","components_view/theme.js","components_view/App.js","index.js"],"names":["firebase","initializeApp","apiKey","process","authDomain","projectId","storageBucket","messagingSenderId","appId","firebaseInstance","authService","auth","dbService","firestore","storageService","storage","initContext","createContext","userContext","ProvideInit","children","useState","isInit","setInit","isUserLogin","setUserLogin","useEffect","onAuthStateChanged","a","user","contextValue","Provider","value","ProvideUser","userObj","setUserObj","displayName","uid","photoURL","providerData","email","updateProfile","args","myRef","doc","setNewUser","userCredential","dbUserObj","bgPhotoUrl","collection","set","signUp","password","createUserWithEmailAndPassword","logIn","type","signInWithEmailAndPassword","google","GoogleAuthProvider","signInWithPopup","github","additionalUserInfo","isNewUser","logOut","signOut","editUserObj","newUserObj","profilePhotoRef","ref","child","putString","response","getDownloadURL","update","ProvideAuth","useUser","useContext","undefined","console","warn","FormButton","css","Shared","Container","styled","div","Header","header","InputForm","form","InputTextArea","textarea","InputText","input","ProfilePhoto","img","SmallProfilePhoto","BTNwithText","button","Arrow","HoverDIV","FormInput","FormSubmit","CancelButton","span","CONTACT","SEARCH","CHAT","DEFAULT_PHOTOURL","require","chatContext","ProvideChat","isChatting","setIsChatting","chatterObj","setChatterObj","cancelOnSnapshot","setCancelOnSnapshot","key","initialValue","item","localStorage","getItem","JSON","parse","error","log","storedValue","setStoredValue","setItem","stringify","useLocalStorage","localChats","setLocalChats","run","cancelFunc","onSnapshot","snapshot","myContact","data","contact","chats","localChatArray","targetRef","reference","chatObj","state","push","clearChatData","pushChat","text","myUID","id","get","then","chatterRef","dbChats","pushChatData","useChat","contactContext","ProvideContact","list","friend","setFriend","request","setRequest","friendArray","requestObj","contactObj","useContact","ContactSlot","friendUID","map","ContactSlotContainer","onClick","includes","ContactInfo","ContactPhoto","src","Contact","ContactContainer","length","FriendContainer","yuweetsContext","ProvideYuweets","yuweets","setYuweets","comments","setComments","likes","setLikes","cancelOnSnaphot","setCancelOnSnaphot","orderBy","yuweetArray","docs","isOwner","creatorId","dbComment","comment","likeObj","i","like","uniqueUsers","uniqueSet","Set","add","getUniqueUsers","userCollection","catch","addYuweet","attachment","window","alert","attachmentUrl","attachmentRef","uuidv4","yuweetObj","createdAt","Date","now","editYuweet","newYuweet","deleteYuweet","confirm","delete","refFromURL","addComment","prevComment","commentData","clickLike","likeData","useYuweets","EditManageBox","setEditing","onEditSubmitClick","style","display","justifyContent","prev","YuweetManager","onDeleteClick","ManagerBox","ManagerSpan","icon","faPencilAlt","faTrash","Like","myLike","dbLikeSize","Object","keys","liked","setLiked","LikeAction","LikeHoverDIV","FavoriteBorder","Favorite","color","Actions","setCommenting","ActionBox","CommentAction","ModeCommentOutlined","Comments","commentText","setCommentText","CommentContainer","CommentBox","marginBottom","CommenterPhoto","CommentBox_right","CommenterInfo","CommentInputForm","onSubmit","placeholder","onChange","event","target","width","Yuweet","editing","commenting","setNewYuweet","onYuweetChange","YuweetContainer","YuweetBox","CreatorPhoto","CreatorInfo","Email","split","maxLength","required","autoFocus","YuweetImg","Text","p","InputContainerDIV","textRef","setText","current","setAttachment","onSubmitClick","AttachmentContainer","Img","Clear","document","getElementById","faTimesCircle","size","InputContainer_bottom","OtherAttachments","accept","theFile","files","reader","FileReader","onloadend","finishedEvent","result","currentTarget","readAsDataURL","htmlFor","cursor","height","ImageOutlined","GifOutlined","PollOutlined","SentimentSatisfiedAlt","DateRangeOutlined","YuweetBTN","YuweetFactory","useRef","YuweetFactoryContainer","Home","HomeContainer","YuweetList","LogIn","setEmail","setPassword","isNewAccount","setIsNewAccount","setError","name","message","onSocialClick","AuthContainer","faTwitter","margin","AuthInput","AuthSubmit","AuthError","AuthSwitch","Buttons","Button","faGoogle","faGithub","profileContext","ProvideProfile","newBgPhotoURL","setNewBgPhotoURL","bgPhotoURL","BGPhoto","BGContainer","newPhotoURL","setNewPhotoURL","ProfilePhotoContainer","faUserCircle","background","border","borderRadius","UserName","newDisplayName","setNewDisplayName","marginTop","SubmitBTN","bgPhotoRef","nameRef","charAt","bgPhotoStorageRef","bgData","ProfileSpan","NavSpan","LogOutBTN","history","useHistory","onLogOutClick","Profile","ProfileContainer","InputLabel","InfoContainer","ActionContainer","label","Navigation","Navbar","LinkBox","to","HomeOutlined","fontSize","alignItems","MailOutlined","marginLeft","PersonAddOutlined","AccountCircleOutlined","NotificationsOutlined","BookmarkBorderOutlined","Subject","MoreHoriz","nav","Link","AddContactContext","onHandleReuqest","targetUID","targetState","myState","sendRequestData","receiveRequestData","mutateContactData","targetContactData","onClicked","rest","mutatedData","stateText","ProvideAddContact","searchResult","setSearchResult","requestList","setRequestList","requestArray","mutatedResult","searchUser","exists","useAddContact","addContact","Input","AddContactSlot","props","variant","marginRight","InputFormContainer","e","preventDefault","SearchResult","Request","RequestContainer","AddContact","AddContactContainer","TextInput","ChatBox","chatArray","ChatBoxContainer","ChatHeader","CloseAction","faChevronLeft","ChatterName","SettingAction","faEllipsisV","ChatContainer","MyChat","MyChatBox","ChatText","ChatterChat","ChatterPhoto","ChatterChatBox","ShowMore","ShowMoreContent","RightAside","RightAsideContainer","SearchHeader","ContentBox","ContentHeader","Content","LeftContent","SmallText","Title","RightContent","ImageMask","MiddleText","A","AccountContent","AccountPhoto","AccountName","verified","FollowBox","FollowBTN","AccountInfo","AppRouter","init","useInit","flexDirection","RouteContainer","exact","path","theme","createMuiTheme","palette","primary","main","contrastText","secondary","App","AppContainer","GlobalStyle","ThemeProvider","createGlobalStyle","footer","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.ef0e05ed.chunk.js","sourcesContent":["// Firebase configuration\r\nimport firebase from \"firebase/app\";\r\nimport \"firebase/auth\";\r\nimport \"firebase/firestore\";\r\nimport \"firebase/storage\";\r\n\r\nconst firebaseConfig = {\r\n    apiKey: process.env.REACT_APP_API_KEY,\r\n    authDomain: process.env.REACT_APP_AUTH_DOMAIN,\r\n    projectId: process.env.REACT_APP_PROJECT_ID,\r\n    storageBucket: process.env.REACT_APP_STORAGE_BUCKET,\r\n    messagingSenderId: process.env.REACT_APP_MESSAGIN_ID,\r\n    appId: process.env.REACT_APP_APP_ID\r\n  };\r\n  // Initialize Firebase  \r\n firebase.initializeApp(firebaseConfig);\r\n export const firebaseInstance = firebase;\r\n export const authService = firebase.auth();\r\n export const dbService = firebase.firestore();\r\n export const storageService = firebase.storage();","import { authService, dbService, firebaseInstance, storageService } from 'components_controll/fbase';\r\nimport React, { createContext, useContext, useEffect, useState } from 'react';\r\n\r\n// create context object\r\nconst initContext = createContext();\r\nconst userContext = createContext();\r\n\r\n// ====================== Child Component ============================\r\nfunction ProvideInit({children}) {\r\n  const [isInit, setInit] = useState(false);\r\n  const [isUserLogin, setUserLogin] = useState(false);\r\n\r\n  useEffect(() => {\r\n    // add observer for changes to user's sign-in state\r\n    authService.onAuthStateChanged(async (user) => {\r\n      setUserLogin(user ? true : false);\r\n      // when app is ready to start\r\n      setInit(true);\r\n    });\r\n  }, []);\r\n\r\n  // context value \r\n  const contextValue = {isInit, isUserLogin};\r\n  return (\r\n    <initContext.Provider value={contextValue}>\r\n      {children}\r\n    </initContext.Provider>\r\n  );\r\n}\r\n\r\n// create context container\r\nfunction ProvideUser({children}) {\r\n  const [userObj, setUserObj] = useState(null);\r\n  \r\n  useEffect(() => {\r\n    // add observer for changes to user's sign-in state\r\n    authService.onAuthStateChanged(async (user) => {\r\n\r\n      if(user) {\r\n        setUserObj({\r\n          displayName: user.displayName,\r\n          uid: user.uid,\r\n          photoURL: user.photoURL || user.providerData[0].photoURL,\r\n          email: user.email,\r\n          updateProfile: (args) => user.updateProfile(args),\r\n          myRef: dbService.doc(`/users/${user.email}`)\r\n        });\r\n      }\r\n      else {\r\n        setUserObj(null);\r\n      }\r\n    });\r\n  }, []);\r\n\r\n  // ---------------- Auth Functions --------------------------\r\n  // After got userCredential, then push to db\r\n  const setNewUser = (userCredential) => {\r\n    const {user} = userCredential;\r\n    // this is data, upload to firestore\r\n    const dbUserObj = {\r\n      displayName: user.displayName,\r\n      uid: user.uid,\r\n      photoURL: user.photoURL || user.providerData[0].photoURL,\r\n      bgPhotoUrl: null\r\n    };\r\n\r\n    dbService.collection(\"users\").doc(`${user.email}`).set(dbUserObj);\r\n  }\r\n\r\n  // New User\r\n  const signUp = async (email, password) => {\r\n    const userCredential = await authService.createUserWithEmailAndPassword(email, password);\r\n    setNewUser(userCredential);\r\n  };\r\n\r\n  // logIn types are email and social(google, github)\r\n  const logIn = async (type, email, password) => {\r\n    let userCredential = null;\r\n    \r\n    switch(type) {\r\n      case \"email\":  \r\n        userCredential = await authService.signInWithEmailAndPassword(email, password);\r\n        break; \r\n      case \"google\": \r\n        const google = new firebaseInstance.auth.GoogleAuthProvider();\r\n        userCredential = await authService.signInWithPopup(google);\r\n        break;\r\n      case \"github\": \r\n        const github = new firebaseInstance.auth.GoogleAuthProvider();\r\n        userCredential = await authService.signInWithPopup(github);\r\n        break;    \r\n    }\r\n    userCredential.additionalUserInfo.isNewUser && setNewUser(userCredential);\r\n  }\r\n\r\n  const logOut = async () => {\r\n\t\tawait authService.signOut();\r\n  };\r\n  \r\n  const editUserObj = async (newUserObj) => {\r\n    newUserObj = {...userObj, ...newUserObj};\r\n\r\n    // reupload new photoURL to storage\r\n    if(newUserObj[\"photoURL\"] !== userObj[\"photoURL\"]) {\r\n      // get ref\r\n      const profilePhotoRef = storageService\r\n        .ref()\r\n        .child(`ProfilePhoto/${userObj.email}`);\r\n      // upload photo from local url to storage by using storage reference\r\n      const response = await profilePhotoRef.putString(newUserObj.photoURL, \"data_url\");\r\n      // then get remote url from storage \r\n      newUserObj.photoURL = await response.ref.getDownloadURL();\r\n    }\r\n\r\n    // update local app\r\n    setUserObj(newUserObj);\r\n    // update firebase auth\r\n    await userObj.updateProfile(newUserObj);  \r\n    // update firestore\r\n    await dbService.doc(`users/${userObj.email}`).update({\r\n      displayName: newUserObj.displayName, \r\n      photoURL: newUserObj.photoURL\r\n      // bgPhotoURL: newUserObj.bgPhotoURL\r\n    });\r\n  };\r\n\r\n  // context value \r\n  const contextValue = {userObj, signUp, logIn, logOut, editUserObj};\r\n  return (\r\n    <userContext.Provider value={contextValue}>\r\n      {children}\r\n    </userContext.Provider>\r\n  );\r\n}\r\n\r\n// ===================== Parent Component ================================\r\nexport default function ProvideAuth({children}) {\r\n  return (\r\n    <ProvideInit>\r\n      <ProvideUser>\r\n        {children}\r\n      </ProvideUser>\r\n    </ProvideInit>\r\n  );\r\n}\r\n\r\n// ===================== create context hook =========================== \r\n/**\r\n * @description \r\n * @return {{isInit:boolean, isUserLogin:boolean}}\r\n */\r\nexport const useInit = () => {\r\n  const init = useContext(initContext);\r\n  if (init === undefined)\r\n    console.warn(\"useInit() must be used inside ProvideAuth!\");\r\n  return init;\r\n}\r\n\r\n/**\r\n * @description \r\n * @return {{ userObj:object, signUp:function, logIn:function, logOut:function, editUserObj: function}}\r\n */\r\nexport const useUser = () => {\r\n  const user = useContext(userContext);\r\n  if (user === undefined)\r\n    console.warn(\"useUser() must be used inside ProvideAuth!\");\r\n  return user;\r\n}","import styled, { css } from 'styled-components';\r\n\r\nconst FormButton = css`\r\n  cursor: pointer;\r\n  width: 100%;\r\n  padding: 7px 20px;\r\n  text-align: center;\r\n  color: white;\r\n  border-radius: 20px;\r\n  \r\n  margin-top: 15px;\r\n  margin-bottom: 5px;\r\n`;\r\n\r\nexport const Shared = {\r\n  Container : styled.div`\r\n    display: flex;\r\n    flex-direction: column;\r\n    width: 100%;\r\n`,\r\n\r\n  Header : styled.header`\r\n    font-weight: bold;\r\n    font-size: large;\r\n    padding: 1rem;\r\n    width: 600px;\r\n    border: 1px solid #EBEEF0;\r\n    border-top: none;\r\n    position: fixed;\r\n    top: 0;\r\n    background: white;\r\n    z-index: 1;\r\n\r\n`,\r\n\r\n  InputForm : styled.form`\r\n    display: flex;\r\n    flex: 1;\r\n    align-items: center;\r\n    padding: 0.5rem 1rem;\r\n`,\r\n\r\n  InputTextArea : styled.textarea`\r\n    background: none;\r\n    resize: none;\r\n    border: none;\r\n    outline: none;\r\n    height: 3rem;\r\n    display: block;\r\n    overflow: hidden;\r\n    box-sizing: padding-box;\r\n    font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, Oxygen,\r\n      Ubuntu, Cantarell, \"Open Sans\", \"Helvetica Neue\", sans-serif;\r\n    font-size: large;\r\n  `,\r\n\r\n\tInputText : styled.input`\r\n\t  /* flex-grow: 1; */\r\n\t\tmin-height: 40px;\r\n\t\tpadding: 0px 20px;\r\n\t\tcolor: black;\r\n\t\tborder: 1px solid #1DA1F2;\r\n\t\tborder-radius: 20px;\r\n\t\tfont-size: 1rem;\r\n    width: 100%;\r\n\t`,\r\n\r\n\tProfilePhoto : styled.img`\r\n\t\twidth: 3rem;\r\n\t\theight: 3rem;\r\n\t\tmargin-right: 0.7rem;\r\n\t\tborder-radius: 1.5rem;\r\n`,\r\n\r\n  SmallProfilePhoto : styled.img`\r\n    width: 2rem;\r\n\t\theight: 2rem;\r\n\t\tmargin-right: 0.5rem;\r\n\t\tborder-radius: 1rem;\r\n  `,\r\n\r\n\tBTNwithText : styled.button`\r\n\t  color: white;\r\n\t\tbackground-color: #1DA1F2;\r\n\t\tpadding: 0.6rem 1rem;\r\n\t\tborder-radius: 1.5rem;\r\n\t\tfont-weight: bold;\r\n\t`,\r\n\r\n\tArrow : styled.input`\r\n\t\tposition: absolute;\r\n\t\tright: 0;\r\n\t\tbackground-color: #1DA1F2;\r\n\t\theight: 40px;\r\n\t\twidth: 40px;\r\n\t\tpadding: 10px 0px;\r\n\t\ttext-align: center;\r\n\t\tborder-radius: 20px;\r\n\t\tcolor: white;\r\n\t\tcursor: pointer;\r\n`,\r\n\r\n  HoverDIV : styled.div`\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    cursor: pointer;\r\n    border-radius: 50%;\r\n    transition: all 200ms ease-in-out;\r\n    padding: 0.5rem;\r\n    width: 38px;\r\n    height: 38px;\r\n\r\n    &:hover {\r\n      background: #E8F5FE;\r\n    }\r\n`,\r\n\r\n// ============\r\n\r\n\r\n  FormInput : styled.input`\r\n    /* width: 100%; */\r\n    padding: 10px 20px;\r\n    border-radius: 20px;\r\n    border: 1px solid black;\r\n    text-align: center;\r\n    background-color: white;\r\n    color: black;\r\n  `,\r\n\r\n  FormSubmit : styled.input`\r\n    ${FormButton}\r\n    background-color: #1DA1F2;\r\n    width: 13rem;\r\n  `,\r\n\r\n  CancelButton : styled.span`\r\n    ${FormButton}\r\n    background-color: tomato;\r\n    width: 13rem;\r\n  `\r\n  \r\n} \r\n","// ============ contact state =================\r\nexport const CONTACT = {\r\n  REQUESTING: 0,\r\n  ACCEPTING: 1,\r\n  FRIEND: 2\r\n}\r\n\r\n// ============= search state ==============\r\nexport const SEARCH = { \r\n  NO_SEARCH: -3,\r\n  SEARCHING: -2,\r\n  NO_RESULT: -1\r\n}\r\n\r\n// ============= search state ==============\r\nexport const CHAT = {\r\n  SEND: 0,\r\n  RECEIVED: 1\r\n}\r\n\r\n// ============== default ===========\r\nexport const DEFAULT_PHOTOURL = \"https://cdn2.iconfinder.com/data/icons/user-people-4/48/5-512.png\";","const { useState } = require('react');\r\n\r\nexport const useLocalStorage = (key, initialValue) => {\r\n  const [storedValue, setStoredValue] = useState(() => {\r\n    try {\r\n      // get previous storedValue from local storage by key\r\n      const item = localStorage.getItem(key);\r\n      return item ? JSON.parse(item) : initialValue;\r\n    }\r\n    catch (error) {\r\n      console.log(error);\r\n      return initialValue;\r\n    }\r\n  });\r\n\r\n  const setValue = (value) => {\r\n    try {\r\n      // save state\r\n      setStoredValue(value);\r\n      // save localstorage\r\n      localStorage.setItem(key, JSON.stringify(value))\r\n    }\r\n    catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  return [storedValue, setValue];\r\n}","import { CHAT, CONTACT } from 'constants.js';\r\nimport { useLocalStorage } from 'localStorage';\r\nimport { createContext, useContext, useEffect, useState } from 'react';\r\nimport { dbService } from './fbase';\r\nimport { useUser } from './ProvideAuth';\r\n\r\n// create context object\r\nconst chatContext = createContext();\r\n\r\nexport default function ProvideChat({children}) {\r\n  const [isChatting, setIsChatting] = useState(false);\r\n  const [chatterObj, setChatterObj] = useState(null);\r\n  const {userObj} = useUser();\r\n  const [cancelOnSnapshot, setCancelOnSnapshot] = useState(null);\r\n  // useLocalStorage is advanced useState\r\n  const [localChats, setLocalChats] = useLocalStorage(\"chats\", {});\r\n\r\n  useEffect(() => {\r\n    if(!userObj) {\r\n      return;\r\n    }\r\n\r\n    // delete onSnapshot observer of previous user\r\n    cancelOnSnapshot && cancelOnSnapshot.run();\r\n\r\n    // ========== pullChat =========\r\n    const cancelFunc = dbService.doc(`/users/${userObj.email}`).onSnapshot(snapshot => {\r\n      const myContact = snapshot.data().contact;\r\n\r\n      // check whether chats exist or not in db\r\n      for(let uid in myContact) {\r\n        if(myContact[uid].chats) {\r\n          // pull previous local chat of specific chatter\r\n          const localChatArray = localChats[uid] ? localChats[uid] : [];\r\n          const targetRef = myContact[uid].reference;\r\n\r\n          // pull chat from db\r\n          const chatObj = { \r\n            chats: myContact[uid].chats,\r\n            state: CHAT.RECEIVED\r\n          }\r\n\r\n          // push chat to localChats\r\n          localChatArray.push(chatObj);\r\n          localChats[uid] = localChatArray;\r\n\r\n          // save to localstorage\r\n          setLocalChats({...localChats});\r\n\r\n          // clear chat from db \r\n          const {myRef} = userObj;\r\n          const clearChatData = {\r\n            [`contact.${uid}`]: {\r\n              reference: targetRef,\r\n              state: CONTACT.FRIEND\r\n            }\r\n          }\r\n          myRef.update(clearChatData);\r\n        }\r\n      }\r\n    })\r\n    setCancelOnSnapshot({run: cancelFunc});\r\n\r\n  }, [userObj]);\r\n  \r\n\r\n  // =================== Chat Functions =======================\r\n  const pushChat = (text) => {\r\n    if(text !== \"\") {\r\n      const {uid:myUID, myRef} = userObj;\r\n      // pull previous local chat of specific chatter\r\n      const localChatArray = localChats[chatterObj.id] ? localChats[chatterObj.id] : [];\r\n  \r\n      const chatObj = {\r\n        chats: [text],\r\n        state: CHAT.SEND\r\n      }\r\n      localChatArray.push(chatObj);\r\n      localChats[chatterObj.id] = localChatArray;\r\n      // push to localstorage\r\n      setLocalChats({...localChats});\r\n  \r\n      // pull previous db chats\r\n      dbService.doc(`/users/${userObj.email}`).get().then(doc => {\r\n        const myContact = doc.data().contact;\r\n        const chatterRef = myContact[chatterObj.id].reference;\r\n  \r\n        chatterRef.get().then((doc) => {\r\n          const contact = doc.data()[\"contact\"];\r\n          // pull db chats\r\n          const dbChats = contact[myUID].chats ? contact[myUID].chats : [];\r\n          // push chat to array\r\n          dbChats.push(text);\r\n          // push to db\r\n          const pushChatData = {\r\n            [`contact.${myUID}`] : {\r\n              reference: myRef,\r\n              state: CONTACT.FRIEND,\r\n              chats: dbChats\r\n            }\r\n          }\r\n          chatterRef.update(pushChatData);\r\n        })\r\n      })\r\n    }\r\n  }\r\n\r\n\r\n  // context value\r\n  const contextValue = {isChatting, setIsChatting, pushChat, chatterObj, setChatterObj, localChats};\r\n  return(\r\n    <chatContext.Provider value={contextValue}>\r\n      {children}\r\n    </chatContext.Provider>\r\n  );\r\n}\r\n\r\n// ================== create context hook ===================\r\n/**\r\n * @description\r\n * @return {{isChatting: boolean, setIsChatting: function, pushChat: function, chatterObj: object, setChatterObj: function, localChats: object}}\r\n */\r\nexport const useChat = () => {\r\n  const chat = useContext(chatContext);\r\n  return chat;\r\n}","import { dbService } from './fbase';\r\nimport { useUser } from './ProvideAuth';\r\nimport { createContext, useContext, useEffect, useState } from 'react'\r\nimport { CONTACT } from 'constants.js';\r\n\r\n// create context object\r\nconst contactContext = createContext();\r\n\r\n// ===================== Parent Component ================================\r\nexport default function ProvideContact({children}) {\r\n  const [friend, setFriend] = useState({list:[]});\r\n  const [request, setRequest] = useState({});\r\n\r\n  const {userObj} = useUser();\r\n  const [cancelOnSnapshot, setCancelOnSnapshot] = useState(null);\r\n\r\n  useEffect(() => {\r\n\t\t// if no user is logged in, don't add onSnapshot observer\r\n    if(!userObj) {\r\n      return;\r\n    }\r\n    // delete onSnapshot observer of previous user\r\n    cancelOnSnapshot && cancelOnSnapshot.run();\r\n\r\n    const cancelFunc = dbService\r\n    .doc(`/users/${userObj.email}`).onSnapshot(async(snapshot) => {\r\n      const data = snapshot.data();\r\n      \r\n      if(data.contact) {\r\n      // when there's contact\r\n        const {contact} = data;\r\n        const friendArray = [];\r\n        const requestObj = {};\r\n  \r\n        for(const uid in contact) {\r\n          const {reference, state} = contact[uid];\r\n          const {displayName, photoURL} = (await reference.get()).data();\r\n          const contactObj = {\r\n            uid,\r\n            displayName,\r\n            photoURL,\r\n            state,\r\n            reference\r\n          }\r\n\r\n          if(contact[uid].state == CONTACT.FRIEND) {\r\n            friendArray.push(contactObj);\r\n          }\r\n          else {\r\n            const email = reference.id;\r\n            requestObj[email] = {...contactObj}; \r\n          }\r\n        }\r\n        setFriend({list: friendArray});\r\n        setRequest(requestObj);\r\n\r\n      }\r\n      else {\r\n        // when there's no contact\r\n        setFriend({list:[]});\r\n        setRequest({});\r\n      }\r\n    })\r\n    setCancelOnSnapshot({run: cancelFunc});\r\n\r\n\t}, [userObj]);\r\n\r\n  \r\n  // ================== Context Value ======================\r\n  const contextValue = {friend, request};\r\n  \r\n  return (\r\n    <contactContext.Provider value={contextValue}>\r\n      {children}\r\n    </contactContext.Provider>\r\n  );\r\n}\r\n// ================== create context hook ===================\r\n/**\r\n * @description \r\n * @return {{friend: array, request: object}}\r\n */\r\nexport const useContact = () => {\r\n\tconst contact = useContext(contactContext);\r\n\tif (contact === undefined)\r\n\t\tconsole.warn(\"useContact() must be used inside ProvideContact!\");\r\n\treturn contact;\r\n}","import styled from 'styled-components';\r\nimport { DEFAULT_PHOTOURL } from 'constants.js';\r\nimport { useChat } from 'components_controll/ProvideChat';\r\nimport { Shared } from './CommonStyle';\r\nimport { useContact } from 'components_controll/ProvideContact';\r\n\r\nexport default function ContactSlot({id, displayName, photoURL, children}) {\r\n  const {setIsChatting, setChatterObj} = useChat();\r\n  const {friend: {list}} = useContact();\r\n  \r\n  const friendUID = [];\r\n  list.map(friend => friendUID.push(friend.uid));\r\n\r\n  const onClick = () => {\r\n    if(friendUID.includes(id)) {\r\n      setIsChatting(true);\r\n      const chatterObj = {id, displayName, photoURL};\r\n      setChatterObj(chatterObj);\r\n    }\r\n  }\r\n  \r\n  return(\r\n    <ContactSlotContainer key={id} onClick={onClick}>\r\n      <ContactInfo>\r\n        <ContactPhoto src={photoURL || DEFAULT_PHOTOURL}/>\r\n        <span>{displayName}</span>\r\n      </ContactInfo>\r\n      \r\n      {children}     \r\n    </ContactSlotContainer>\r\n  );\r\n}\r\n\r\n//================= Styled Components ====================\r\nconst ContactSlotContainer = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  /* margin-top: 0.8rem; */\r\n  width: 25rem;\r\n  padding: 0.5rem;\r\n  border-radius: 0.5rem;\r\n  cursor: pointer;\r\n  transition: all 200ms ease-in-out;\r\n\r\n  &:hover {\r\n    background: #EBEEF0;\r\n  }\r\n`;\r\n\r\nconst ContactPhoto = styled(Shared.ProfilePhoto)``;\r\n\r\nconst ContactInfo = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n`;","import React from 'react';\r\nimport { Shared } from 'components_view/CommonStyle';\r\nimport styled from 'styled-components';\r\nimport ContactSlot from 'components_view/ContactSlot';\r\nimport { useContact } from 'components_controll/ProvideContact';\r\n\r\nexport default function Contact() {\r\n  const {friend:{list}} = useContact();\r\n  \r\n  return (\r\n    <ContactContainer>\r\n      <Shared.Header><span>Messages</span></Shared.Header>\r\n\r\n      {list.length == 0 ? (\r\n        <span>Add friends by searching</span>\r\n      ) : (\r\n        <FriendContainer>\r\n          {list.map(({uid, displayName, photoURL}) => (\r\n            <ContactSlot \r\n              key={uid}\r\n              id={uid}\r\n              displayName={displayName}\r\n              photoURL={photoURL}\r\n            />\r\n          ))}\r\n        </FriendContainer>\r\n      )\r\n      }\r\n    </ContactContainer>\r\n  );\r\n}\r\n\r\n//=========== Styled Components =============\r\nconst ContactContainer = styled(Shared.Container)`\r\n\talign-items: center;\r\n`;\r\n\r\nconst FriendContainer = styled.div`\r\n  align-items: center;\r\n  justify-content: center;\r\n\tmargin-top: 2rem;\r\n`;\r\n\r\n","import { createContext, useContext, useEffect, useState } from 'react'\r\nimport { dbService, storageService } from './fbase';\r\nimport { useUser } from './ProvideAuth';\r\nimport { v4 as uuidv4 } from 'uuid';\r\n\r\n// create context object\r\nconst yuweetsContext = createContext();\r\n\r\nexport default function ProvideYuweets({children}) {\r\n\t// out of [] add {}, to refresh when set whole list again\r\n\tconst [yuweets, setYuweets] = useState({list:[]});\r\n\tconst [comments, setComments] = useState({});\r\n\tconst [likes, setLikes] = useState({});\r\n\tconst {userObj} = useUser();\r\n\tconst [cancelOnSnaphot, setCancelOnSnaphot] = useState(null);  // function\r\n\r\n  useEffect(() => {\t\t\r\n\t\t// if no user is logged in, don't add onSnapshot observer\r\n\t\tif(!userObj) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t// delete onSnapshot observer of previous user\r\n\t\tcancelOnSnaphot && cancelOnSnaphot.run();\r\n\t\t\r\n\t\tconst cancelFunc = dbService\r\n\t\t\t.collection(\"yuweets\")\r\n\t\t\t.orderBy(\"createdAt\", \"desc\")\r\n\t\t\t.onSnapshot((snapshot) => {\r\n\t\t\t\t// console.log('getPost on snapshot');\r\n\t\t\t\t//====== Yuweets =========\r\n\t\t\t\tconst yuweetArray = snapshot.docs.map(doc => ({\r\n\t\t\t\t\tid: doc.id,\r\n\t\t\t\t\tdisplayName: null,\r\n\t\t\t\t\tphotoURL: null,\r\n\t\t\t\t\tisOwner: doc.data().creatorId === userObj.uid,\r\n\t\t\t\t\t...doc.data()\r\n\t\t\t\t}));\r\n\t\t\t\tsetYuweets({list: yuweetArray});\r\n\r\n\t\t\t\t//====== Comments =========\r\n\t\t\t\tconst dbComment = snapshot.docs.map(doc => ({\r\n\t\t\t\t\t[`${doc.id}`] : doc.data().comment\r\n\t\t\t\t}));\r\n\r\n\t\t\t\tsetComments(dbComment)\r\n\r\n\t\t\t\t//====== Likes =========\r\n\t\t\t\tconst likeObj = {};\r\n\r\n\t\t\t\tfor(let i = 0; i < yuweetArray.length; ++i) {\r\n\t\t\t\t\tlikeObj[yuweetArray[i].id] = yuweetArray[i].like;\r\n\t\t\t\t}\r\n\t\t\t\tsetLikes(likeObj)\r\n\t\t\t\t\r\n\t\t\t\t//======== Implement Fake Relational Dabatase =========\r\n\t\t\t\t// get array of user's unique email  \r\n\t\t\t\tconst uniqueUsers = getUniqueUsers(yuweetArray);\r\n\t\t\t\t\r\n\t\t\t\t// get user collection from server just once\r\n\t\t\t\tconst userCollection = dbService.collection(\"users\");\r\n\r\n\t\t\t\tfor(let i = 0; i < uniqueUsers.length; ++i) {\r\n\t\t\t\t\tconst email = uniqueUsers[i];\r\n\r\n\t\t\t\t\tuserCollection.doc(email).get()\r\n\t\t\t\t\t.then((doc) => {\r\n\t\t\t\t\t\tconst user = doc.data();\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tfor(let i = 0; i < yuweetArray.length; ++i ) {\r\n\t\t\t\t\t\t\tif(yuweetArray[i].email == email) {\r\n\t\t\t\t\t\t\t\tyuweetArray[i].displayName = user.displayName;\r\n\t\t\t\t\t\t\t\tyuweetArray[i].photoURL = user.photoURL || null;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tsetYuweets({list: yuweetArray});\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch((error) => console.log(\"Error getting document:\", error));\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t\r\n\t\tsetCancelOnSnaphot({run:cancelFunc});\r\n  }, [userObj]);\r\n  \r\n  // =================== Auth Functions =======================\r\n\tconst addYuweet = async (text, attachment) => {\r\n\t\tif(text === \"\") {\r\n\t\t\twindow.alert(\"Write some text\")\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t\tlet attachmentUrl = \"\";\r\n\r\n\t\tif(attachment !== \"\") {\r\n\t\t\tconst attachmentRef = storageService\r\n\t\t\t\t.ref()\r\n\t\t\t\t.child(`Yuweet/${userObj.email}/${uuidv4()}`);\r\n\t\t\tconst response = await attachmentRef.putString(attachment, \"data_url\");\r\n\t\t\tattachmentUrl = await response.ref.getDownloadURL();\r\n\t\t}\r\n\r\n\t\tconst yuweetObj = {\r\n\t\t\temail: userObj.email,\r\n\t\t\tcreatedAt: Date.now(),\r\n\t\t\tcreatorId: userObj.uid,\r\n\t\t\ttext: text,\r\n\t\t\tattachmentUrl,\r\n\t\t\tcomment: null,\r\n\t\t\tlike: {}\r\n\t\t}\r\n\r\n\t\tawait dbService.collection(\"yuweets\").add(yuweetObj);\r\n\t}\r\n\r\n\tconst editYuweet = async (id, newYuweet) => {\r\n\t\tawait dbService.doc(`yuweets/${id}`).update({\r\n      text: newYuweet\r\n    });\r\n\t}\r\n\r\n\tconst deleteYuweet = async (id, attachmentUrl) => {\r\n\t\tconst ok = window.confirm(\"Are you sure delete Yuweet?\");\r\n    if(ok) {\r\n      // delete yuweet\r\n      await dbService.doc(`yuweets/${id}`).delete();\r\n      // delete attachment\r\n      await storageService.refFromURL(attachmentUrl).delete();\r\n    }\r\n\t}\r\n\r\n\tconst addComment = (id, comment) => {\r\n\t\tconst {displayName, photoURL} = userObj;\r\n\t\tlet prevComment = [];\r\n\r\n\t\tfor(let i = 0; i < comments.length; ++i) {\r\n\t\t\tif(comments[i][id]) {\r\n\t\t\t\tprevComment = comments[i][id];\r\n\t\t\t}\r\n\t\t}\r\n\t\tprevComment.push({comment, displayName, photoURL});\r\n\t\tconst commentData = {[`comment`] : prevComment};\r\n\t\tdbService.doc(`yuweets/${id}`).update(commentData);\r\n\t}\r\n\r\n\tconst clickLike = (id) => {\r\n\t\tconst {uid, displayName} = userObj;\r\n\t\tconst likeObj = likes[id];\r\n\r\n\t\tif(!likes[id][uid]) {\r\n\t\t\t// add who likes\r\n\t\t\tlikeObj[uid] = displayName;\r\n\t\t}\r\n\t\telse {\r\n\t\t\t// delete who cancled like\r\n\t\t\tdelete likeObj[uid];\t\r\n\t\t}\r\n\r\n\t\tconst likeData = {[`like`] : likeObj};\r\n\t\tdbService.doc(`yuweets/${id}`).update(likeData);\r\n\t}\r\n\r\n  // =================== context value  =======================\r\n  const contextValue = {yuweets, addYuweet, editYuweet, deleteYuweet, addComment, clickLike};\r\n\r\n  return (\r\n    <yuweetsContext.Provider value={contextValue}>\r\n      {children}\r\n    </yuweetsContext.Provider>\r\n  );\r\n}\r\n\r\n// =================== Other Functions =======================\r\nfunction getUniqueUsers(yuweetArray) {\r\n\tlet uniqueSet = new Set(); // setObj is an unique item collection\r\n\tfor(let i = 0; i < yuweetArray.length; ++i) {\r\n\t\tuniqueSet.add(yuweetArray[i].email)\r\n\t}\r\n\treturn [...uniqueSet];   // convert setObj to array\r\n}\r\n\r\n// =================== create context hook =====================\r\n/**\r\n * @description \r\n * @return {{yuweets: array, addYuweet: function, editYuweet: function, deleteYuweet: function, addComment: function, clickLike: function}}\r\n */\r\nexport const useYuweets = () => {\r\n\tconst yuweets = useContext(yuweetsContext);\r\n\tif (yuweets === undefined)\r\n\t\tconsole.warn(\"useYuweets() must be used inside ProvideYuweets!\");\r\n\treturn yuweets;\r\n}","import React, { useState } from \"react\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { faTrash, faPencilAlt } from \"@fortawesome/free-solid-svg-icons\";\r\nimport styled from 'styled-components';\r\nimport { Shared } from 'components_view/CommonStyle';\r\nimport { useYuweets } from 'components_controll/ProvideYuweets';\r\nimport { DEFAULT_PHOTOURL } from 'constants.js';\r\nimport { Favorite, FavoriteBorder, ModeCommentOutlined } from '@material-ui/icons';\r\nimport { useUser } from 'components_controll/ProvideAuth';\r\n\r\n//========================= Child Component ==============================\r\nfunction EditManageBox({id, newYuweet, setEditing}) {\r\n  const {editYuweet} = useYuweets();\r\n  const toggleEditing = () => setEditing(prev => !prev);\r\n  \r\n  const onEditSubmitClick = async () => {\r\n    editYuweet(id, newYuweet);\r\n    setEditing(false);\r\n  }\r\n\r\n  return (\r\n    <div style={{display: \"flex\", justifyContent: \"space-around\"}}>\r\n      <Shared.FormSubmit type=\"submit\" value=\"Update yuweet\" onClick={onEditSubmitClick}/>\r\n      <Shared.CancelButton onClick={toggleEditing}>\r\n        Cancel\r\n      </Shared.CancelButton>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction YuweetManager({id, attachmentUrl, setEditing}) {\r\n  const {deleteYuweet} = useYuweets();\r\n\r\n  const toggleEditing = () => setEditing(prev => !prev);\r\n\r\n  const onDeleteClick = async () => {\r\n    deleteYuweet(id, attachmentUrl);\r\n  };\r\n\r\n  return (\r\n    <ManagerBox>\r\n      <ManagerSpan onClick={toggleEditing}>\r\n        <FontAwesomeIcon icon={faPencilAlt} />\r\n      </ManagerSpan>\r\n      <ManagerSpan onClick={onDeleteClick}>\r\n        <FontAwesomeIcon icon={faTrash} />\r\n      </ManagerSpan>\r\n    </ManagerBox>\r\n  );\r\n}\r\n\r\nfunction Like({id, like}) {\r\n  const {userObj: {uid}} = useUser();\r\n  const myLike = like[uid];\r\n  const dbLikeSize = Object.keys(like).length;\r\n\r\n  const [liked, setLiked] = useState(myLike ? true : false);\r\n  const {clickLike} = useYuweets();\r\n\r\n  const toggleLike = () => {\r\n    clickLike(id);\r\n    setLiked(prev => !prev)\r\n  }\r\n\r\n  return (\r\n    <LikeAction onClick={toggleLike}>\r\n      <LikeHoverDIV>\r\n        {liked === false && (\r\n          <FavoriteBorder></FavoriteBorder>\r\n        )}\r\n        {liked === true && (\r\n          <Favorite style={{color:\"#ED4956\"}}></Favorite>\r\n        )}\r\n      </LikeHoverDIV>\r\n      \r\n      {dbLikeSize !== 0 && <span>{dbLikeSize}</span>}\r\n    </LikeAction>\r\n  );\r\n}\r\n\r\nfunction Actions({setCommenting, comment, like, id}) {\r\n  const toggleCommenting = () => setCommenting(prev => !prev);\r\n\r\n  return(\r\n    <ActionBox>\r\n      <CommentAction onClick={toggleCommenting}>\r\n        <Shared.HoverDIV>\r\n          <ModeCommentOutlined />\r\n        </Shared.HoverDIV>\r\n        {comment && <span>{comment.length}</span>}\r\n      </CommentAction>\r\n\r\n      <Like id={id} like={like} />\r\n     \r\n    </ActionBox>\r\n  );\r\n}\r\n\r\nfunction Comments({id, comment}) {\r\n  const [commentText, setCommentText] = useState(\"\");\r\n  const {addComment} = useYuweets();\r\n  const {userObj} = useUser();\r\n\r\n  const onCommentChange = (event) => {\r\n    const {target: {value}} = event;\r\n    setCommentText(value);\r\n  }\r\n\r\n  const onSubmitComment = () => {\r\n    addComment(id, commentText);\r\n    setCommentText(\"\");\r\n  }\r\n\r\n  return (\r\n    <CommentContainer>\r\n      {comment && comment.map(({photoURL, displayName, comment}, id) => (\r\n        <CommentBox key={id} style={{marginBottom: \"0.5rem\"}}>\r\n          <CommenterPhoto src={photoURL || DEFAULT_PHOTOURL} />\r\n\r\n          <CommentBox_right>\r\n            <CommenterInfo>\r\n              {displayName}\r\n            </CommenterInfo>\r\n            {comment}\r\n          </CommentBox_right>\r\n\r\n        </CommentBox>\r\n      ))}\r\n\r\n      <CommentInputForm onSubmit={onSubmitComment}>\r\n        <CommenterPhoto src={userObj.photoURL || DEFAULT_PHOTOURL} />\r\n        <Shared.InputText \r\n          value={commentText}\r\n          type=\"text\"\r\n          placeholder=\"Write some comments\"\r\n          onChange={onCommentChange}\r\n          style={{width: \"100%\"}}\r\n        />\r\n      </CommentInputForm>\r\n    </CommentContainer>\r\n  );\r\n}\r\n\r\n//====================== Parent Component ===============================\r\nexport default function Yuweet({id, displayName, photoURL, isOwner, text, attachmentUrl, email, comment, like}) {\r\n  // update boolean\r\n  const [editing, setEditing] = useState(false);\r\n  const [commenting, setCommenting] = useState(false);\r\n  // update input value\r\n  const [newYuweet, setNewYuweet] = useState(text);\r\n\r\n  const onYuweetChange = async (event) => {\r\n    const {target:{value}} = event;\r\n    setNewYuweet(value);\r\n  };\r\n\r\n  return (\r\n    <YuweetContainer>\r\n      <YuweetBox>\r\n        <CreatorPhoto src={photoURL || DEFAULT_PHOTOURL}/>\r\n\r\n        <Shared.Container style={{width: \"494px\"}}>\r\n          <CreatorInfo>\r\n            {displayName}\r\n            <Email>@{email.split(\"@\")[0]}</Email>\r\n          </CreatorInfo>\r\n          \r\n          {editing ? (\r\n            <>\r\n              <Shared.InputTextArea\r\n                value={newYuweet} \r\n                onChange={onYuweetChange} \r\n                type=\"text\" \r\n                placeholder=\"Edit your yuweet\" \r\n                maxLength={100} \r\n                required\r\n                autoFocus\r\n              />\r\n              {attachmentUrl && <YuweetImg src={attachmentUrl} />}\r\n              <EditManageBox id={id} newYuweet={newYuweet} setEditing={setEditing} />\r\n            </>\r\n          ) : (\r\n            <>\r\n              <Text>{text}</Text>\r\n              {attachmentUrl && <YuweetImg src={attachmentUrl} />}\r\n              {isOwner && <YuweetManager id={id} attachmentUrl={attachmentUrl} setEditing={setEditing} />}\r\n              <Actions setCommenting={setCommenting} comment={comment} like={like} id={id}/>\r\n              {commenting && <Comments id={id} comment={comment} />}\r\n            </>\r\n          )}\r\n        </Shared.Container>\r\n\r\n      </YuweetBox>\r\n    </YuweetContainer>\r\n  );\r\n};\r\n\r\n//================= Styled Components ====================\r\nconst YuweetContainer = styled.div`\r\n  margin: 1rem 0;\r\n  padding: 20px;\r\n  position: relative;\r\n  color: rgba(0, 0, 0, 0.8);\r\n  border-top: 1px solid #EBEEF0;\r\n  border-bottom: 1px solid #EBEEF0;\r\n`;\r\n\r\nconst YuweetBox = styled.div`\r\n  display: flex;\r\n  flex-direction: row;\r\n`;\r\n\r\nconst CreatorPhoto = styled(Shared.ProfilePhoto)``;\r\n\r\nconst CreatorInfo = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  font-size: 1rem;\r\n  font-weight: 700;\r\n  margin-bottom: 0.5rem;\r\n`;\r\n\r\nconst CommenterInfo = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  font-size: 1rem;\r\n  font-weight: 700;\r\n`;\r\n\r\nconst Email = styled.span`\r\n  margin-left: 5px;\r\n  color: grey;\r\n  font-weight: lighter;\r\n`;\r\n\r\nconst Text = styled.p`\r\n  font-size: 1rem;\r\n  line-height: 20px;\r\n\r\n  white-space: pre-wrap;      /* CSS3 */   \r\n  white-space: -moz-pre-wrap; /* Firefox */    \r\n  white-space: -pre-wrap;     /* Opera <7 */   \r\n  white-space: -o-pre-wrap;   /* Opera 7 */    \r\n  word-wrap: break-word;      /* IE */\r\n`;\r\n\r\nconst YuweetImg = styled.img`\r\n  width: 100%;\r\n  border-radius: 1rem;\r\n  margin-top: 1rem;\r\n`;\r\n\r\nconst ManagerBox = styled.div`\r\n  position: absolute;\r\n  right: 10px;\r\n  top: 10px;\r\n`;\r\n\r\nconst ManagerSpan = styled.span`\r\n  cursor: pointer;\r\n  margin: 0 10px 10px 0;\r\n`;\r\n\r\nconst ActionBox = styled.div`\r\n  padding: 0.5rem 0 1rem 0;\r\n  display: flex;\r\n  position: relative;\r\n  left: -0.5rem;\r\n`;\r\n\r\nconst LikeAction = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  cursor: pointer;\r\n  width: 4rem;\r\n\r\n  &:hover {\r\n    color: #ED4956;\r\n  }\r\n`;\r\n\r\nconst CommentAction = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  cursor: pointer;\r\n  width: 4rem;\r\n\r\n  &:hover {\r\n    color: #1DA1F2;\r\n  }\r\n`;\r\n\r\nconst LikeHoverDIV = styled(Shared.HoverDIV)`\r\n  &:hover {\r\n    background: #ffdde8;\r\n  }\r\n`;\r\n\r\nconst CommentContainer = styled.div``;\r\n\r\nconst CommentBox = styled.div`\r\n  display: flex;\r\n  flex-direction: row;\r\n`;\r\n\r\nconst CommentInputForm = styled(Shared.InputForm)`\r\n  padding: 1rem 0;\r\n`;\r\nconst CommenterPhoto = styled(Shared.SmallProfilePhoto)``;\r\n\r\nconst CommentBox_right = styled.div`\r\n  background: #EBEEF0;\r\n  padding: 0.25rem 1rem 0.5rem 1rem;\r\n  border-radius: 1rem;\r\n`;\r\n\r\n","import React, { useRef, useState } from \"react\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport styled from 'styled-components';\r\nimport { useYuweets } from 'components_controll/ProvideYuweets';\r\nimport { Shared } from './CommonStyle';\r\nimport { useUser } from 'components_controll/ProvideAuth';\r\nimport { faTimesCircle } from '@fortawesome/free-regular-svg-icons';\r\nimport { DEFAULT_PHOTOURL } from 'constants.js';\r\nimport { DateRangeOutlined, GifOutlined, ImageOutlined, PollOutlined, SentimentSatisfiedAlt } from '@material-ui/icons';\r\n\r\n// ====================== Child Component ============================\r\nfunction InputContainerDIV({textRef, attachmentRef}) {\r\n  // ------- text ---------\r\n  const [text, setText] = useState(\"\");\r\n  textRef.current = { text, setText };\r\n\r\n  const onChange = (event) => {\r\n    const {target:{value}} = event;\r\n    setText(value);\r\n  }\r\n\r\n  // --------- attachment ---------\r\n  const [attachment, setAttachment] = useState(\"\");\r\n  attachmentRef.current = { attachment, setAttachment };\r\n\r\n  const onChangeFile = (event) => {\r\n    const {target:{files}} = event;\r\n    const theFile = files[0];\r\n\r\n    const reader = new FileReader();\r\n    reader.onloadend = (finishedEvent) => {\r\n      const {currentTarget:{result}} = finishedEvent;\r\n      setAttachment(result);\r\n      // onChange occurs when value of element has been changed\r\n      document.getElementById(\"attach_file\").value = null;\r\n    }\r\n    reader.readAsDataURL(theFile);\r\n  }\r\n\r\n  const onClearAttachment = () => {\r\n    // state\r\n    setAttachment(\"\");\r\n    // dom\r\n    document.getElementById(\"attach_file\").value = null;\r\n  }\r\n\r\n  // --------- submitBTN ---------\r\n  const {addYuweet} = useYuweets();\r\n\r\n  const onSubmitClick = async () => {\r\n    const {current: {text, setText}} = textRef;\r\n    const {current: {attachment, setAttachment}} = attachmentRef;\r\n\r\n    addYuweet(text, attachment);\r\n    setText(\"\");\r\n    setAttachment(\"\");\r\n  }\r\n\r\n  return (\r\n    <Shared.Container>\r\n      {/* ================= text ==================== */}\r\n      <Shared.InputTextArea\r\n        value={text} \r\n        onChange={onChange} \r\n        type=\"text\" \r\n        placeholder=\"What's on your mind?\" \r\n        maxLength={100} \r\n      />\r\n\r\n      {/* ================ attachment ================= */}\r\n      {attachment && (\r\n        <AttachmentContainer>\r\n          <Img src={attachment}/>\r\n          <Clear onClick={onClearAttachment}>\r\n            <FontAwesomeIcon icon={faTimesCircle} size=\"2x\" />\r\n          </Clear>\r\n        </AttachmentContainer>\r\n      )}\r\n\r\n      <InputContainer_bottom>\r\n        <OtherAttachments>\r\n          <input \r\n            id=\"attach_file\" type=\"file\" accept=\"image/*\" \r\n            onChange={onChangeFile} style={{display:\"none\"}}\r\n          />\r\n\r\n          <HoverDIV>\r\n            <label htmlFor=\"attach_file\" style={{cursor: \"pointer\", height: \"24px\"}}>\r\n              <ImageOutlined />\r\n            </label>\r\n          </HoverDIV>\r\n          \r\n          <HoverDIV>\r\n            <GifOutlined />\r\n          </HoverDIV>\r\n\r\n          <HoverDIV>\r\n            <PollOutlined />\r\n          </HoverDIV>\r\n\r\n          <HoverDIV>\r\n            <SentimentSatisfiedAlt />\r\n          </HoverDIV>\r\n\r\n          <HoverDIV>\r\n            <DateRangeOutlined />\r\n          </HoverDIV>\r\n\r\n        </OtherAttachments>\r\n\r\n      {/* ================ submitBTN ================== */}\r\n        <YuweetBTN onClick={onSubmitClick}>Yuweet</YuweetBTN>\r\n      </InputContainer_bottom>\r\n\t\t</Shared.Container>\r\n  );\r\n}\r\n\r\n// ===================== Parent Component ================================\r\nexport default function YuweetFactory() {\r\n  const textRef = useRef();\r\n  const attachmentRef = useRef();\r\n  const {userObj: {photoURL}} = useUser();\r\n  \r\n  return (\r\n    <YuweetFactoryContainer>\r\n      <CreatorPhoto src={photoURL || DEFAULT_PHOTOURL} />\r\n\r\n      <InputContainerDIV \r\n        textRef={textRef} \r\n        attachmentRef={attachmentRef} \r\n      />\r\n    </YuweetFactoryContainer>\r\n  );\r\n}\r\n\r\n//============== Styled Components ===============\r\nconst YuweetFactoryContainer = styled(Shared.Container)`\r\n  flex-direction: row;\r\n  padding: 1rem;\r\n  border-bottom: 1px solid #EBEEF0;\r\n`;\r\n\r\nconst CreatorPhoto = styled(Shared.ProfilePhoto)``;\r\n\r\nconst AttachmentContainer = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n\tposition: relative;\r\n`;\r\n\r\nconst Img = styled.img`\r\n  width: 100%;\r\n  border-radius: 1rem;\r\n  margin-bottom: 1rem;\r\n`;\r\n\r\nconst Clear = styled.div`\r\n  background: #292B2C;\r\n  color: #dadbdc;\r\n  border-radius: 50%;\r\n  cursor: pointer;\r\n  text-align: center;\r\n  position: absolute;\r\n  top: 5px;\r\n  left: 5px;\r\n\r\n  &:hover {\r\n    color: white;\r\n  }\r\n`;\r\n\r\nconst InputContainer_bottom = styled.div`\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  border-top: 1px solid #EBEEF0;\r\n  padding: 1rem 0;\r\n  margin-top: 1rem;\r\n`;\r\n\r\nconst OtherAttachments = styled.div`\r\n  display: flex;\r\n  color: #1DA1F2;\r\n  cursor: pointer;\r\n`;\r\n\r\nconst HoverDIV = styled(Shared.HoverDIV)``;\r\n\r\nconst YuweetBTN = styled(Shared.BTNwithText)``;\r\n\r\n","import React from \"react\";\r\nimport Yuweet from \"components_view/Yuweet\";\r\nimport YuweetFactory from 'components_view/YuweetFactory';\r\nimport { Shared } from 'components_view/CommonStyle';\r\nimport { useYuweets } from 'components_controll/ProvideYuweets';\r\nimport styled from 'styled-components';\r\n\r\nexport default function Home() {\r\n\tconst {yuweets:{list}} = useYuweets();\r\n\r\n\treturn (\r\n\t\t<HomeContainer>\r\n\t\t\t<Shared.Header><span>Home</span></Shared.Header>\r\n\r\n\t\t\t<YuweetFactory/>\r\n\t\t\t<YuweetList>\r\n\t\t\t\t{list.map(({id, displayName, photoURL, isOwner, text, attachmentUrl, email, comment, like}) => (\r\n\t\t\t\t\t<Yuweet \r\n\t\t\t\t\t\tkey={id} \r\n\t\t\t\t\t\tid={id}\r\n\t\t\t\t\t\tdisplayName={displayName}\r\n\t\t\t\t\t\tphotoURL={photoURL}\r\n\t\t\t\t\t\ttext={text}\r\n\t\t\t\t\t\tattachmentUrl={attachmentUrl}\r\n\t\t\t\t\t\temail={email}\r\n\t\t\t\t\t\tisOwner={isOwner}\r\n\t\t\t\t\t\tcomment={comment}\r\n\t\t\t\t\t\tlike={like}\r\n\t\t\t\t\t/> \r\n\t\t\t\t))}\r\n\t\t\t</YuweetList>\r\n\t\t</HomeContainer>\r\n\t);\r\n};\r\n\r\n//================= Styled Components ====================\r\nconst HomeContainer = styled(Shared.Container)`\r\n\talign-items: center;\r\n`;\r\n\r\n\r\nconst YuweetList = styled(Shared.Container)``;\r\n\r\n\r\n","import { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faTwitter, faGoogle, faGithub } from \"@fortawesome/free-brands-svg-icons\";\r\nimport styled from 'styled-components'\r\nimport { Shared } from 'components_view/CommonStyle';\r\nimport { useState } from 'react';\r\nimport { useUser } from 'components_controll/ProvideAuth';\r\n\r\nexport default function LogIn() {\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [isNewAccount, setIsNewAccount] = useState(true);\r\n  const [error, setError] = useState(\"\");\r\n  const {signUp, logIn} = useUser();\r\n\r\n  const onChange = (event) => {\r\n    const {target: {name, value}} = event;\r\n    if(name === \"email\") {\r\n      setEmail(value);\r\n    }\r\n    else if(name === \"password\") {\r\n      setPassword(value);\r\n    }\r\n  };\r\n\r\n  const onSubmitClick = async (event) => {\r\n    // create account or signin\r\n    try {\r\n      if(isNewAccount) {\r\n        await signUp(email, password);\r\n      }\r\n      else {\r\n        await logIn(\"email\", email, password);\r\n      }\r\n    }\r\n    catch(error) {\r\n      setError(error.message);\r\n    }\r\n  };\r\n\r\n  const toggleAuth = () => setIsNewAccount(prev => !prev);\r\n\r\n  const onSocialClick = async (event) => {\r\n    const {target:{ name:type }} = event;\r\n    logIn(type);\r\n  };\r\n\r\n  return(\r\n    <AuthContainer>\r\n      <FontAwesomeIcon icon={faTwitter} color={\"#1DA1F2\"} size=\"3x\" style={{ margin:30 }} />\r\n      <AuthInput \r\n        type=\"email\" placeholder=\"Email\" \r\n        name=\"email\" required \r\n        value={email} onChange={onChange} \r\n      />\r\n      <AuthInput \r\n        type=\"password\" placeholder=\"Password\" \r\n        name=\"password\" required \r\n        value={password} onChange={onChange}\r\n      />\r\n      <AuthSubmit \r\n        type=\"submit\" onClick={onSubmitClick} \r\n        value={isNewAccount ? \"Create Account\" : \"Sign In\"} \r\n      />\r\n      {error && <AuthError>{error}</AuthError>}\r\n\r\n      <AuthSwitch onClick={toggleAuth}>\r\n      {isNewAccount ? \"Sign In\" : \"Create Account\"}\r\n      </AuthSwitch>\r\n\r\n      <Buttons>\r\n        <Button onClick={onSocialClick} name=\"google\">\r\n          Log In with Google <FontAwesomeIcon icon={faGoogle} />\r\n        </Button>\r\n        <Button onClick={onSocialClick} name=\"github\">\r\n          Log In with Github <FontAwesomeIcon icon={faGithub} />\r\n        </Button>\r\n      </Buttons>\r\n    </AuthContainer>\r\n  );\r\n}\r\n\r\n\r\n//============= Styled Components =============\r\nconst AuthContainer = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n\r\n  justify-content: center;\r\n\talign-items: center;\r\n  width: 21rem;\r\n`;\r\n\r\nconst AuthInput = styled(Shared.InputText)`\r\n  margin-bottom: 10px;\r\n`;\r\n\r\nconst AuthSubmit = styled(AuthInput)`\r\n\ttext-align: center;\r\n  background: #1DA1F2;\r\n  color: white;\r\n  cursor: pointer;\r\n  font-weight: bold;\r\n`;\r\n\r\n\r\nconst AuthSwitch = styled.span`\r\n  color: #1DA1F2;\r\n  cursor: pointer;\r\n  margin-top: 10px;\r\n  margin-bottom: 50px;\r\n  display: block;\r\n  font-size: 12px;\r\n  font-weight: bold;\r\n  text-decoration: underline;\r\n`;\r\n\r\nconst AuthError = styled.span`\r\n \tcolor: tomato;\r\n  text-align: center;\r\n  font-weight: 500;\r\n  font-size: 12px;\r\n`;\r\n\r\nconst Buttons = styled.div`\r\n\tdisplay: flex;\r\n  justify-content: space-between;\r\n  width: 100%;\r\n  height: 40px;\r\n`;\r\n\r\nconst Button = styled(Shared.BTNwithText)`\r\n  color: #1DA1F2;\r\n  background: white;\r\n  border: 1px solid #1DA1F2;\r\n  padding: 10px 1rem;\r\n  font-size: 12px;\r\n`;","import { dbService } from './fbase';\r\nimport { useUser } from './ProvideAuth';\r\n\r\nconst { createContext, useEffect, useState, useContext } = require('react');\r\n\r\nconst profileContext = createContext();\r\n\r\nexport default function ProvideProfile({children}) {\r\n  const [newBgPhotoURL, setNewBgPhotoURL] = useState(\"\");\r\n  const {userObj} = useUser();\r\n\r\n  useEffect(() => {\r\n    if(!userObj) {\r\n      return;\r\n    }\r\n\r\n    dbService.doc(`users/${userObj.email}`).get().then(doc => {\r\n    setNewBgPhotoURL(doc.data().bgPhotoURL);\r\n    })\r\n  }, [userObj])\r\n  \r\n\r\n  const contextValue = {newBgPhotoURL, setNewBgPhotoURL};\r\n  return (\r\n    <profileContext.Provider value={contextValue}>\r\n      {children}\r\n    </profileContext.Provider>\r\n  );\r\n}\r\n\r\n\r\n//================= Hook ===================\r\n/** \r\n * @description\r\n * @return {{newBgPhotoURL: string, setNewBgPhotoURL: function}}\r\n*/\r\nexport const useProfile = () => {\r\n  const profile = useContext(profileContext);\r\n  return profile;\r\n}","import { Shared } from 'components_view/CommonStyle';\r\nimport React, { useRef, useState } from \"react\";\r\nimport { useHistory } from 'react-router-dom';\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { faUserCircle } from \"@fortawesome/free-solid-svg-icons\";\r\nimport styled from 'styled-components';\r\nimport { useUser } from 'components_controll/ProvideAuth';\r\nimport { storageService } from 'components_controll/fbase';\r\nimport { useProfile } from 'components_controll/ProvideProfile';\r\n\r\n// ====================== Child Component ============================\r\n// isolate state\r\nfunction BGPhoto({reference}) {\r\n\tconst {newBgPhotoURL, setNewBgPhotoURL} = useProfile();\r\n\treference.current = newBgPhotoURL;\r\n\r\n\tconst onChangeFile = (event) => {\r\n\t\tconst {target: {files}} = event;\r\n\t\tconst theFile = files[0];\r\n\r\n\t\tconst reader = new FileReader();\r\n\t\treader.onloadend = (finishedEvent) => {\r\n\t\t\tconst {currentTarget:{result}} = finishedEvent;\r\n\t\t\tsetNewBgPhotoURL(result);\r\n\t\t};\r\n\t\treader.readAsDataURL(theFile);\r\n\t}\r\n\t\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<BGContainer>\r\n\t\t\t\t{newBgPhotoURL && <img width=\"100%\" src={newBgPhotoURL}/>}\r\n\t\t\t</BGContainer>\r\n\r\n\t\t\t<input \r\n\t\t\t\tid=\"bg_photo\"\r\n\t\t\t\ttype=\"file\" accept=\"image/*\"\r\n\t\t\t\tonChange={onChangeFile}\r\n\t\t\t\tstyle={{display:\"none\"}}\r\n\t\t\t/>\r\n\t\t</>\r\n\t);\r\n}\r\n\r\nfunction ProfilePhoto({reference}) {\r\n\tconst {userObj} = useUser();\r\n\r\n\t// edit local state before submit\r\n\tconst [newPhotoURL, setNewPhotoURL] = useState(userObj ? userObj.photoURL : \"\");\r\n\treference.current = newPhotoURL;   // deliever url\r\n\r\n\tconst onChangeFile = (event) => {\r\n\t\tconst {target:{files}} = event;\r\n\t\tconst theFile = files[0];\r\n\r\n\t\tconst reader = new FileReader();\r\n\t\treader.onloadend = (finishedEvent) => {\r\n\t\t\tconst {currentTarget:{result}} = finishedEvent;\r\n\t\t\tsetNewPhotoURL(result);\r\n\t\t};\r\n\t\treader.readAsDataURL(theFile);\r\n\t};\r\n\r\n\treturn(\r\n\t\t<ProfilePhotoContainer>\r\n\t\t\t\t{newPhotoURL ? (\r\n\t\t\t\t\t\t<Img src={newPhotoURL}/>\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<FontAwesomeIcon icon={faUserCircle} size=\"9x\" color=\"lightGrey\" \r\n\t\t\t\t\t\tstyle={{background: \"white\", border: \"2px solid white\", borderRadius: \"50%\"}}/>\r\n\t\t\t\t\t)\r\n\t\t\t\t}\r\n\r\n\t\t\t<input \r\n\t\t\t\t\tid=\"profile_photo\"\r\n\t\t\t\t\ttype=\"file\"\taccept=\"image/*\"\r\n\t\t\t\t\tonChange={onChangeFile}\r\n\t\t\t\t\tstyle={{display:\"none\"}}\r\n\t\t\t/>\r\n\t\t</ProfilePhotoContainer>\r\n\t);\r\n}\r\n\r\nfunction UserName({reference}) {\r\n\tconst {userObj} = useUser();\r\n\t// edit local state before submit\r\n\tconst [newDisplayName, setNewDisplayName] = useState(userObj ? (userObj.displayName ? userObj.displayName : userObj.email.split(\"@\")[0]) : \"\");\r\n\treference.current = newDisplayName;\r\n\r\n\tconst onChange = (event) => {\r\n\t\tconst {target: {value}} = event;\r\n\t\tsetNewDisplayName(value);\r\n\t};\r\n\r\n\treturn(\r\n\t\t<Shared.FormInput \r\n\t\t\tonChange={onChange}\r\n\t\t\ttype=\"text\" \r\n\t\t\tautoFocus\r\n\t\t\tplaceholder=\"Display Name\" \r\n\t\t\tvalue={newDisplayName}\r\n\t\t\tmaxLength={8}\r\n\t\t\tstyle={{marginTop: \"5rem\", width: \"50%\"}}\r\n\t\t/>\r\n\t);\r\n}\r\n\r\nfunction SubmitBTN({bgPhotoRef, profilePhotoRef, nameRef}) {\r\n\tconst {editUserObj, userObj} = useUser();\r\n\r\n\tconst onSubmitClick = async () => {\r\n\t\tlet newBgPhotoURL = bgPhotoRef.current;\r\n\t\tconst newPhotoURL = profilePhotoRef.current;\r\n\t\tconst newDisplayName = nameRef.current;\r\n\r\n\t\tif(newDisplayName === \"\" || newDisplayName == null) {\r\n\t\t\treturn window.alert(\"Please input name.\");\r\n\t\t}\r\n\r\n\t\t//=========== update bgPhoto ===========\r\n\t\tif(newBgPhotoURL && newBgPhotoURL.charAt(0) === \"d\") {\r\n\t\t\t//get ref\r\n\t\t\tconst bgPhotoStorageRef = storageService\r\n\t\t\t\t.ref()\r\n\t\t\t\t.child(`BackgroundPhoto/${userObj.email}`);\r\n\t\t\t\t\r\n\t\t\t// upload photo from local url to storage by using storage reference\r\n\t\t\tconst response = await bgPhotoStorageRef.putString(newBgPhotoURL, \"data_url\");\r\n\t\t\t// then get remote url from storage \r\n\t\t\tnewBgPhotoURL = await response.ref.getDownloadURL();\r\n\r\n\t\t\tconst bgData = {\r\n\t\t\t\t[\"bgPhotoURL\"] : newBgPhotoURL\r\n\t\t\t}\r\n\t\t\tuserObj.myRef.update(bgData);\r\n\t\t}\r\n\t\r\n\t\t//=========== update displayName, profilePhoto ==============\r\n\t\teditUserObj({displayName: newDisplayName, photoURL: newPhotoURL });\r\n\t\twindow.alert(\"Updated successfully\");\t\t\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Shared.FormSubmit \r\n\t\t\tonClick={onSubmitClick}\r\n\t\t\ttype=\"submit\" \r\n\t\t\tvalue=\"Update Profile\" \r\n\t\t/>\r\n\t);\r\n}\r\n\r\nfunction ProfileSpan() {\r\n\tconst {userObj} = useUser();\r\n\r\n\treturn (\r\n\t\t<NavSpan>\r\n\t\t\t{userObj && userObj.displayName\r\n\t\t\t\t? userObj.displayName\r\n\t\t\t\t: \"My Profile\"\r\n\t\t\t}\r\n\t\t</NavSpan>\r\n\t);\r\n}\r\n\r\nfunction LogOutBTN() {\r\n\tconst {logOut} = useUser();\r\n\tconst history = useHistory();\r\n\tconst onLogOutClick = async () => {\r\n\t\tawait logOut();\r\n\t\thistory.push(\"/\");\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Shared.CancelButton onClick={onLogOutClick}>\r\n\t\t\tLog Out\r\n\t\t</Shared.CancelButton>\r\n\t);\r\n\r\n}\r\n\r\n// ===================== Parent Component ================================\r\nexport default function Profile() {\r\n\tconst bgPhotoRef = useRef();\r\n\tconst profilePhotoRef = useRef();\r\n\tconst nameRef = useRef();\r\n\tconst {userObj} = useUser();\r\n\t\r\n\treturn (\r\n\t\t<ProfileContainer>\r\n\t\t\t<Shared.Header><ProfileSpan /></Shared.Header>\r\n\r\n\t\t\t<InputLabel htmlFor=\"bg_photo\">\r\n\t\t\t\t<BGPhoto reference={bgPhotoRef} />\r\n\t\t\t</InputLabel>\r\n\r\n\t\t\t<InputLabel htmlFor=\"profile_photo\">\r\n\t\t\t\t<ProfilePhoto reference={profilePhotoRef}/>\r\n\t\t\t</InputLabel>\r\n\r\n\t\t\t<InfoContainer>\r\n\t\t\t\t<UserName reference={nameRef} />\r\n\t\t\t\t{userObj && <span>{userObj.email}</span>}\r\n\t\t\t</InfoContainer>\r\n\r\n\t\t\t<ActionContainer>\r\n\t\t\t\t<SubmitBTN bgPhotoRef={bgPhotoRef} profilePhotoRef={profilePhotoRef} nameRef={nameRef}/>\r\n\t\t\t\t<LogOutBTN />\r\n\t\t\t</ActionContainer>\r\n\t\t\t\r\n\t\t</ProfileContainer>\r\n\t);\r\n};\r\n\r\n//============ Styled Components ============\r\nconst ProfileContainer = styled(Shared.Container)`\r\n\talign-items: center;\r\n`;\r\n\r\nconst InputLabel = styled.label`\r\n\tcursor: pointer;\r\n`;\r\n\r\nconst ProfilePhotoContainer = styled.div`\r\n\tposition: absolute;\r\n\ttop: 8rem;\r\n\tleft: 1rem;\r\n\twidth: 9em;\r\n`;\r\n\r\nconst Img = styled.img`\r\n\twidth: 100%;\r\n\theight: 100%;\r\n\tborder-radius: 50%;\r\n\tborder: 4px solid white;\r\n`;\r\n\r\nconst NavSpan = styled.span`\r\n\tmargin-left: 1rem;\r\n\tfont-weight: bold;\r\n\tfont-size: 1.2rem;\r\n`;\r\n\r\nconst BGContainer = styled.div`\r\n\tbackground: #C4CFD6;\r\n\twidth: 600px;\r\n\theight: 12.5rem;\r\n\toverflow: hidden;\r\n`;\r\n\r\nconst InfoContainer = styled(Shared.Container)`\r\n\theight: 10rem;\r\n\tpadding-left: 1rem;\r\n`;\r\n\r\nconst ActionContainer = styled(Shared.Container)`\r\n\tflex-direction: row;\r\n\tjustify-content: space-around;\r\n`;","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { faTwitter } from \"@fortawesome/free-brands-svg-icons\";\r\nimport styled from 'styled-components';\r\nimport { AccountCircleOutlined, BookmarkBorderOutlined, HomeOutlined, MailOutlined, MoreHoriz, NotificationsOutlined, PersonAddOutlined, Subject } from '@material-ui/icons';\r\n\r\nexport default function Navigation() {\r\n\t\r\n\treturn (\r\n\t\t<Navbar>\r\n\t\t\t<LinkBox to=\"/\">\r\n\t\t\t\t<HoverDIV>\r\n\t\t\t\t\t<FontAwesomeIcon icon={faTwitter} color={\"#1DA1F2\"} size=\"2x\" />\r\n\t\t\t\t</HoverDIV>\r\n\t\t\t</LinkBox>\r\n\r\n\t\t\t<LinkBox to=\"/\">\r\n\t\t\t\t<HoverDIV>\r\n\t\t\t\t\t<HomeOutlined fontSize=\"large\" />\r\n\t\t\t\t\t<NavSpan>Home</NavSpan>\r\n\t\t\t\t</HoverDIV>\r\n\t\t\t</LinkBox>\r\n\r\n\t\t\t<LinkBox to=\"/contact\">\r\n\t\t\t\t<HoverDIV>\r\n\t\t\t\t\t<div style={{ display: \"flex\", alignItems: \"center\", width:\"35px\", height: \"35px\"}}>\r\n\t\t\t\t\t\t<MailOutlined style={{ fontSize: 30, marginLeft: \"3px\"}} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<NavSpan>Messages</NavSpan>\r\n\t\t\t\t</HoverDIV>\r\n\t\t\t</LinkBox>\r\n\r\n\t\t\t<LinkBox to=\"/add_contact\">\r\n\t\t\t\t<HoverDIV>\r\n\t\t\t\t\t<PersonAddOutlined fontSize=\"large\"  />\r\n\t\t\t\t\t<NavSpan>Add Friends</NavSpan>\r\n\t\t\t\t</HoverDIV>\r\n\t\t\t</LinkBox>\r\n\t\t\t\r\n\t\t\t<LinkBox to=\"/profile\">\r\n\t\t\t\t<HoverDIV>\r\n\t\t\t\t\t<AccountCircleOutlined fontSize=\"large\" />\r\n\t\t\t\t\t<NavSpan>Profile</NavSpan>\r\n\t\t\t\t</HoverDIV>\r\n\t\t\t</LinkBox>\r\n\r\n\t\t\t<LinkBox to=\"\">\r\n\t\t\t\t<HoverDIV>\r\n\t\t\t\t\t<NotificationsOutlined fontSize=\"large\" />\r\n\t\t\t\t\t<NavSpan>Notifications</NavSpan>\r\n\t\t\t\t</HoverDIV>\r\n\t\t\t</LinkBox>\r\n\r\n\t\t\t<LinkBox to=\"\">\r\n\t\t\t\t<HoverDIV>\r\n\t\t\t\t\t<BookmarkBorderOutlined fontSize=\"large\" />\r\n\t\t\t\t\t<NavSpan>Bookmarks</NavSpan>\r\n\t\t\t\t</HoverDIV>\r\n\t\t\t</LinkBox>\r\n\r\n\t\t\t<LinkBox to=\"\">\r\n\t\t\t\t<HoverDIV>\r\n\t\t\t\t\t<Subject fontSize=\"large\" />\r\n\t\t\t\t\t<NavSpan>Lists</NavSpan>\r\n\t\t\t\t</HoverDIV>\r\n\t\t\t</LinkBox>\r\n\r\n\t\t\t<LinkBox to=\"\">\r\n\t\t\t\t<HoverDIV>\r\n\t\t\t\t\t<MoreHoriz fontSize=\"large\" />\r\n\t\t\t\t\t<NavSpan>More</NavSpan>\r\n\t\t\t\t</HoverDIV>\r\n\t\t\t</LinkBox>\r\n\r\n\t\t</Navbar>\r\n\t);\r\n}\r\n\r\n//=================== Styled Components ==================\r\nconst Navbar = styled.nav`\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\talign-items: flex-start;\r\n\twidth: 16rem;\r\n\t/* background: yellow; */\r\n\tposition: fixed;\r\n\tz-index: 1;\r\n`;\r\n\r\nconst HoverDIV = styled.div`\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\tpadding: 0.5rem;\r\n\tborder-radius: 2rem;\r\n`;\r\n\r\nconst LinkBox = styled(Link)`\r\n\tdisplay: flex; \r\n\tjustify-content: flex-start;\r\n\talign-items: center;\r\n\twidth: 100%;\r\n\tpadding: 0.3rem 1rem;\r\n  transition: all 200ms ease-in-out;\r\n\r\n\t&:hover ${HoverDIV}{\r\n\t\tbackground: #E8F5FE;\r\n\t\tcolor: #1DA1F2;\r\n\t}\r\n`;\r\n\r\nconst NavSpan = styled.span`\r\n\tmargin-left: 1rem;\r\n\tfont-weight: bold;\r\n\tfont-size: 1.2rem;\r\n\tpadding-right: 1.5rem;\r\n\r\n`;\r\n","import { CONTACT, SEARCH } from 'constants.js';\r\nimport { createContext, useContext, useEffect, useState } from 'react'\r\nimport { dbService } from './fbase';\r\nimport { useUser } from './ProvideAuth';\r\nimport { useContact } from './ProvideContact';\r\n\r\n// create context object\r\nconst AddContactContext = createContext();\r\n\r\n// =========================== Functions ===========================\r\n// handle change of state by using reference\r\nfunction onHandleReuqest(targetUID, targetRef, targetState, myUID, myRef, myState) {\r\n  // have to use dot notation for updating nested fields\r\n  // request sender\r\n  const sendRequestData = {\r\n    [`contact.${targetUID}`] : {\r\n      reference : targetRef,\r\n      state : myState\r\n    }\r\n  }\r\n  myRef.update(sendRequestData);\r\n\r\n  // request receiver\r\n  const receiveRequestData = {\r\n    [`contact.${myUID}`] : {\r\n      reference : myRef,\r\n      state : targetState\r\n    }\r\n  }\r\n  targetRef.update(receiveRequestData);\r\n}\r\n\r\n// add stateText, onClick to request object, according to state\r\nfunction mutateContactData(targetContactData, myUID, myRef, onClicked) {\r\n  const {uid:targetUID, reference:targetRef, state, ...rest} = targetContactData; // ..rest = displayName, photoURL\r\n  let mutatedData = {uid:targetUID, ...rest};\r\n\r\n  switch(state) {\r\n    case CONTACT.REQUESTING: \r\n      mutatedData.stateText = \"Sent\";\r\n      mutatedData.onClick = null;\r\n      break;\r\n\r\n    case CONTACT.ACCEPTING:\r\n      mutatedData.stateText = \"Accept\";\r\n      mutatedData.onClick = () => {\r\n        onHandleReuqest(targetUID, targetRef, CONTACT.FRIEND, myUID, myRef, CONTACT.FRIEND);\r\n        onClicked && onClicked(); \r\n      }\r\n      break;\r\n\r\n    default:\r\n      mutatedData.stateText = \"Add\";\r\n      mutatedData.onClick = () => {\r\n        onHandleReuqest(targetUID, targetRef, CONTACT.ACCEPTING, myUID, myRef, CONTACT.REQUESTING);\r\n        onClicked && onClicked();\r\n      }\r\n      break;\r\n  }\r\n  return mutatedData;\r\n}\r\n\r\n// ================= Parent Component ======================\r\nexport default function ProvideAddContact({children}) {\r\n  // searchResult == null means empty\r\n  const [searchResult, setSearchResult] = useState(SEARCH.NO_SEARCH);\r\n  const userCollection = dbService.collection(\"users\");\r\n  const {request} = useContact();  // object\r\n  const {userObj: {uid:myUID, myRef}} = useUser();\r\n  const [requestList, setRequestList] = useState([]); // array of mutated request \r\n\r\n  // get request list\r\n  useEffect(() => {\r\n    const requestArray = [];\r\n    // convert request object into list\r\n    for(const email in request) {\r\n      const targetContactData = request[email];\r\n      // add stateText, onClick\r\n      const mutatedResult = mutateContactData(targetContactData, myUID, myRef); \r\n      requestArray.push(mutatedResult);\r\n    }\r\n    setRequestList(requestArray);\r\n\r\n  }, [request])\r\n  \r\n  // =========== Add Contact Function ============\r\n  const searchUser = (email) => {\r\n    // default: no SearchResult\r\n    setSearchResult(SEARCH.SEARCHING);\r\n    // After btn clicked, clear SearchResult\r\n    const onClicked = () => setSearchResult(SEARCH.NO_SEARCH);\r\n\r\n    if (request[email]) {\r\n      // exist requesting contact\r\n      const targetContactData = request[email];\r\n      const mutatedResult = mutateContactData(targetContactData, myUID, myRef, onClicked); \r\n      setSearchResult(mutatedResult);\r\n    }\r\n    else {\r\n      // completely new contact\r\n      const targetRef = userCollection.doc(email);\r\n\r\n      targetRef.get().then((doc) => {\r\n        if (doc.exists) {\r\n          const {uid, displayName, photoURL} = doc.data();\r\n          const targetContactData = {\r\n            uid, \r\n            displayName,\r\n            photoURL,\r\n            state: null,\r\n            reference: targetRef\r\n          };\r\n          \r\n          const mutatedResult = mutateContactData(targetContactData, myUID, myRef, onClicked);\r\n          setSearchResult(mutatedResult);\r\n        }\r\n        else {\r\n          // can't find SearchResult\r\n          setSearchResult(SEARCH.NO_RESULT);\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        console.log(\"Error getting document:\", error);\r\n        setSearchResult(SEARCH.NO_RESULT);\r\n      });\r\n    }\r\n  }\r\n \r\n  // =================== context value  =======================\r\n  const contextValue = {searchUser, searchResult, requestList}\r\n\r\n  return (\r\n    <AddContactContext.Provider value={contextValue}>\r\n      {children}\r\n    </AddContactContext.Provider>\r\n  );\r\n}\r\n\r\n// ================== create context hook ===================\r\n/**\r\n * @description\r\n * @returns {{searchUser: function, searchResult: object, requestList: array}}\r\n */\r\nexport const useAddContact = () => {\r\n  const addContact = useContext(AddContactContext);\r\n  if(addContact === undefined) {\r\n    console.warn(\"error\");\r\n  }\r\n  return addContact;\r\n}","import React, { useRef, useState } from 'react';\r\nimport { Shared } from 'components_view/CommonStyle';\r\nimport styled from 'styled-components';\r\nimport ProvideAddContact, { useAddContact } from 'components_controll/ProvideAddContact';\r\nimport ContactSlot from 'components_view/ContactSlot';\r\nimport { SEARCH } from 'constants.js';\r\nimport Button from '@material-ui/core/Button';\r\n\r\n// ================ Children Component ==================\r\nfunction Text({reference}) {\r\n  const [text, setText] = useState(\"\");\r\n  reference.current = {text, setText};\r\n\r\n  const onChange = (event) => {\r\n    const {target: {value}} = event;\r\n    setText(value);\r\n  }\r\n\r\n  return (\r\n    <Input value={text} type=\"text\"\r\n    onChange={onChange} maxLength={20}\r\n    placeholder=\"Enter Friend's email\" />\r\n  );\r\n}\r\n\r\nfunction SubmitBTN({textRef}) {\r\n  const {searchUser} = useAddContact();\r\n\r\n  const onSubmitClick = async () => {\r\n    const {current:{text, setText}} = textRef;\r\n\r\n    if(text === \"\" || text == null) {\r\n\t\t\treturn window.alert(\"Please input email.\");\r\n    }\r\n    setText(\"\")\r\n    searchUser(text);\r\n  }\r\n\r\n  return(\r\n    <Arrow type=\"submit\" onClick={onSubmitClick} value=\"&rarr;\" />\r\n  );\r\n}\r\n\r\n// inheritance of ContactSlot\r\nfunction AddContactSlot({stateText, onClick, ...props}) {\r\n\r\n  return(\r\n    <ContactSlot {...props} >\r\n      {onClick ? (\r\n        <Button variant=\"contained\" color=\"secondary\" onClick={onClick} style={{marginRight: 10}}>{stateText}</Button>\r\n      ) : (\r\n        <span style={{marginRight: 40}}>{stateText}</span>\r\n      )}\r\n    </ContactSlot>\r\n  );\r\n}\r\n\r\nfunction InputFormContainer({textRef}) {\r\n  const onSubmitChat = (e) => {\r\n    e.preventDefault();\r\n  }\r\n\r\n  return (\r\n    <InputForm style={{width: \"23rem\", marginTop: \"1rem\"}} onSubmit={onSubmitChat}>\r\n      <Text reference={textRef}/>\r\n      <SubmitBTN textRef={textRef}/>\r\n    </InputForm>\r\n  );\r\n}\r\n\r\nfunction SearchResult() {\r\n  const {searchResult} = useAddContact();\r\n  \r\n  return (\r\n    <>\r\n      {(searchResult === SEARCH.NO_RESULT) && (<span> &#128546; There's no matched email user</span>)}\r\n      {(searchResult === SEARCH.SEARCHING) && (<span>searching...</span>)}\r\n      {(typeof searchResult == 'object') && (<AddContactSlot {...searchResult}/>)}\r\n    </>\r\n  );\r\n}\r\n\r\nfunction Request() {\r\n  const {requestList} = useAddContact();\r\n\r\n  return (\r\n    <RequestContainer>\r\n        {requestList.map(({uid, ...rest}) => (\r\n          <AddContactSlot key={uid} {...rest} />\r\n        ))}\r\n    </RequestContainer>\r\n  );\r\n}\r\n\r\n// ==================== Parent Component ====================\r\nexport default function AddContact() {\r\n  \r\n  const textRef = useRef();\r\n\r\n  return (\r\n    <ProvideAddContact>\r\n      <AddContactContainer>\r\n        <Shared.Header><span>Add Friends</span></Shared.Header>\r\n        <InputFormContainer textRef={textRef}/>\r\n        <SearchResult />\r\n        <Request />\r\n\r\n      </AddContactContainer>\r\n    </ProvideAddContact>\r\n  );\r\n}\r\n\r\n//============== Styled Components ===============\r\nconst AddContactContainer = styled(Shared.Container)`\r\n\talign-items: center;\r\n`;\r\n\r\nconst InputForm = styled(Shared.InputForm)``;\r\n\r\nconst Input = styled(Shared.InputText)``;\r\n\r\nconst Arrow = styled(Shared.Arrow)`\r\n  margin-right: 8rem;\r\n`;\r\n\r\nconst RequestContainer = styled(Shared.Container)`\r\n  align-items: center;\r\n  margin-top: 2rem;\r\n`;\r\n\r\n\r\n","import { faChevronLeft, faEllipsisV } from '@fortawesome/free-solid-svg-icons';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { useChat } from 'components_controll/ProvideChat';\r\nimport { DEFAULT_PHOTOURL } from 'constants.js';\r\nimport { useRef, useState } from 'react';\r\nimport styled from 'styled-components';\r\nimport { Shared } from './CommonStyle';\r\n\r\n// ====================== Child Component ============================\r\nfunction TextInput({reference}) {\r\n  const [text, setText] = useState(\"\");\r\n  reference.current = {text, setText};\r\n\r\n  const onChange = (e) => {\r\n    const {target:{value}} = e;\r\n    setText(value);\r\n  }\r\n\r\n  return(\r\n    <Input \r\n      value={text}\r\n      type=\"text\"\r\n      autoFocus\r\n      placeholder=\"Write Message\"\r\n      onChange={onChange}\r\n    />\r\n  );\r\n}\r\n\r\nfunction SubmitBTN({textRef}) {\r\n  const {pushChat} = useChat();\r\n\r\n  const onSubmitClick = async () => {\r\n\t\tconst {current: {text, setText}} = textRef;\r\n\r\n    pushChat(text);\r\n    setText(\"\");\r\n  }\r\n\r\n  return(\r\n    <Arrow type=\"submit\" value=\"&rarr;\" onClick={onSubmitClick} />\r\n  );\r\n}\r\n\r\nfunction InputFormContainer({textRef}) {\r\n  const onSubmitChat = (e) => {\r\n    e.preventDefault();\r\n  }\r\n\r\n  return (\r\n    <InputForm onSubmit={onSubmitChat}>\r\n      <TextInput reference={textRef}/>\r\n      <SubmitBTN textRef={textRef}/>\r\n    </InputForm>\r\n  );\r\n}\r\n\r\n// ====================== Parend Component ============================\r\nexport default function ChatBox() {\r\n  const textRef = useRef();\r\n  const {chatterObj: {id, photoURL, displayName}, setIsChatting, localChats} = useChat();\r\n  let chatArray = [];\r\n\r\n  if(localChats && localChats[id]) {\r\n    chatArray = localChats[id];\r\n  }\r\n\r\n  const onCloseClick = () => {\r\n    setIsChatting();\r\n  }\r\n\r\n  return(\r\n    <ChatBoxContainer>\r\n      <ChatHeader>\r\n        <CloseAction onClick={onCloseClick}>\r\n          <FontAwesomeIcon icon={faChevronLeft} color={\"#1DA1F2\"} size=\"2x\" />\r\n        </CloseAction>\r\n        <ChatterName>{displayName}</ChatterName>\r\n        <SettingAction>\r\n          <FontAwesomeIcon icon={faEllipsisV} color={\"lightGrey\"} size=\"lg\"/>\r\n        </SettingAction>\r\n      </ChatHeader>\r\n\r\n      <ChatContainer>\r\n        {chatArray.length !== 0 && chatArray.map(({chats, state}, id) => \r\n          (\r\n            state === 0 ? (\r\n              <MyChat key={id}>\r\n                <MyChatBox>\r\n                  <ChatText>{chats}</ChatText>\r\n                </MyChatBox>\r\n              </MyChat>\r\n            ) : (\r\n              <ChatterChat key={id}>\r\n                <ChatterPhoto src={photoURL || DEFAULT_PHOTOURL}/>\r\n                <ChatterChatBox>\r\n                  <ChatText style={{color: \"black\"}}>{chats}</ChatText>\r\n                </ChatterChatBox>\r\n              </ChatterChat>\r\n            )\r\n          )\r\n        )}\r\n      </ChatContainer>\r\n\r\n      <InputFormContainer textRef={textRef} />\r\n\r\n    </ChatBoxContainer>\r\n  );\r\n}\r\n\r\n//================= Styled Components ====================\r\nconst ChatBoxContainer = styled.div`\r\n  background-color: white;\r\n  width: 21rem;\r\n  height: 36rem;\r\n  position: fixed;\r\n  bottom: 4rem;\r\n  right: 8rem;\r\n  border-radius: 1rem;\r\n\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: space-between;\r\n  box-shadow: 0 12px 28px 0 rgba(0, 0, 0, 0.2), 0 2px 4px 0 rgba(0, 0, 0, 0.1), inset 0 0 0 1px rgba(255, 255, 255, 0.5);\r\n`;\r\n\r\nconst ChatHeader = styled.div`\r\n  width: 100%;\r\n  flex: 1;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  padding: 0 1rem;\r\n  border-radius: 1rem 1rem 0 0;\r\n  box-shadow: 0 4px 6px rgba(50, 50, 93, 0.11), 0 1px 3px rgba(0, 0, 0, 0.08);\r\n`;\r\n\r\nconst CloseAction = styled.span`\r\n  cursor: pointer;\r\n`;\r\n\r\nconst ChatterName = styled.span`\r\n  color: black; \r\n  font-weight: bold;\r\n  font-size: 1rem;\r\n`;\r\n\r\nconst SettingAction = styled.span`\r\n  cursor: pointer;\r\n`;\r\n\r\nconst MyChat = styled.div`\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  margin-bottom: 1rem;\r\n  position: relative;\r\n`;\r\n\r\nconst ChatterChat = styled.div`\r\n  display: flex;\r\n  align-items: flex-start;\r\n  margin-bottom: 1rem;\r\n  \r\n  position: relative;\r\n`;\r\n\r\nconst ChatterPhoto = styled.img`\r\n  width: 30px;\r\n  height: 30px;\r\n  margin-right: 0.8rem;\r\n  border-radius: 15px;\r\n`;\r\n\r\nconst ChatContainer = styled(Shared.Container)`\r\n  max-width: 100%;\r\n  flex: 9;\r\n\toverflow-x: hidden;\r\n  padding: 1rem 1.5rem 1rem 1rem;\r\n`;\r\n\r\nconst MyChatBox = styled.div`\r\n  background: #1DA1F2;\r\n  border-radius: 0.5rem;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  max-width: 70%;\r\n\r\n  &:before {\r\n    content: \"\";\r\n    position: absolute;\r\n    top: 0.5rem;\r\n    left: 100%;\r\n    border-top: 3.5px solid transparent;\r\n    border-left: 7px solid #1DA1F2;\r\n    border-bottom: 3.5px solid transparent;\r\n  } \r\n`;\r\n\r\n\r\nconst ChatterChatBox = styled.div`\r\n  background: lightgrey;\r\n  border-radius: 0.5rem;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n\r\n  max-width: 70%;\r\n\r\n  &:before {\r\n    content: \"\";\r\n    position: absolute;\r\n    top: 0.5rem;\r\n    left: 2.3rem;\r\n    border-top: 3.5px solid transparent;\r\n    border-right: 7px solid lightgrey;\r\n    border-bottom: 3.5px solid transparent;\r\n  } \r\n`;\r\n\r\nconst ChatText = styled.span`\r\n  /* display: block; */\r\n  /* box-sizing: padding-box; */\r\n  /* overflow: hidden; */\r\n  padding: 0.5rem;\r\n`;\r\n\r\n\r\nconst InputForm = styled(Shared.InputForm)``;\r\n\r\nconst Input = styled(Shared.InputText)``;\r\n\r\nconst Arrow = styled(Shared.Arrow)`\r\n  margin-right: 1rem;\r\n`;\r\n\r\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAATCAYAAAByUDbMAAABgWlDQ1BzUkdCIElFQzYxOTY2LTIuMQAAKJF1kc8rRFEUxz/mR8RoFAvKYhJWQ37UxMZi5FdhMTPKr82b570ZNT9e771JslW2ihIbvxb8BWyVtVJESnbKmtig5zyjRjL3ds/53O8953TvueBJZNSs5euCbM42YyPR0PTMbKjyER9NeMX6FdUyJuLDCcqOtxsqXH/V4dYqH/fvqFnQLBUqqoQHVMO0hUeFx5dsw+VN4QY1rSwIHwuHTbmg8LWrJ4v85HKqyB8um4nYIHjqhEOpX5z8xWrazArLy2nNZgrqz33clwS03FRcfIusZixijBAlxBhDDBKhm36xETrooVN2lMnv+s6fJC+5qliDZUwWSZHGJixqQapr4nXRNZkZlt3+/+2rpff2FKsHouB/cJyXNqjcgM91x3nfd5zPA/Dew1mulJ/fg75X0ddLWusuBFfh5LykJbfgdA0a7wzFVL4lryyPrsPzEdTOQP0lVM8Ve/ZzzuEtJFbkqy5gewfaJT44/wXsNGeuPCWHwQAAAAlwSFlzAAAuIwAALiMBeKU/dgAAAc5JREFUOI2VlL9LW1EUxz/vR374Eh4FyaAQrB3bTmlpC1mFYgVd3R5YEBcdFbWLQvMHxKlDBgeXLgUHp+BSIgpVCu1UBIc3KKhDLT6TJmkc7r32PXPzmn63e865X86P7zkGMchvXo0BC0ARqAFl33OrveINDUEOCIBHwAEwEHIHwEvgBHB8zz3XkuU3rwaBEvAWsIAmkNAkoOxtoAKs+J57CWCHgkrAbOitIwrbLRnfAebuMpOlncqA/0ULGPY999yUhpt+iayuLmMjeokiG0X0IhZvRmy+TWdJmBFzU/7HkOPfJjq1LgymDaqTGb5etJnZvaETdQfAlInQUSwRwNqLNEkTlvfr94kAHGDeRAgygoxt8Cxn3enmdd5m8qHN+pcGZ4GGSqBoIpQdwVDG4NO4w+rzFA9SBqVXaT6ftvh4HNvWmgmUkdNQOP75h/eHDWYfJ9mZcHASsLjX0JWnEAAbSmdPgSPuCXXuSZKlQop3B3W2fvTMqgkUfM/9rsiywC9dZNKC3+246gDI+p57rRQzgNi1LvRB1EJMU4hWbn/ln9/0qKjrEdbyCvAhlGGvJil7S8avKkfcPRtF3DMn5O7vnukgV22ev5d2I+7S3gL6soOyOW+zuQAAAABJRU5ErkJggg==\"","import styled from 'styled-components';\r\nimport React from \"react\";\r\nimport { Shared } from './CommonStyle';\r\nimport verified from '../image/verified.png';\r\n\r\nfunction ShowMore() {\r\n  return(\r\n    <ShowMoreContent>\r\n      <span style={{color:\"#1DA1F2\", fontSize:\"15px\"}}>Show more</span>\r\n    </ShowMoreContent>\r\n  );\r\n}\r\n\r\nexport default function RightAside() {\r\n  return (\r\n    <RightAsideContainer>\r\n      <SearchHeader>\r\n        <Shared.InputForm>\r\n          <Shared.InputText \r\n            placeholder=\"Search Google\"\r\n          />\r\n        </Shared.InputForm>\r\n      </SearchHeader>\r\n\r\n      <ContentBox>\r\n        <ContentHeader>What's Happening</ContentHeader>\r\n        <Content>\r\n          <LeftContent>\r\n            <SmallText>COVID-19LIVE</SmallText>\r\n            <Title>COVID-19: News and updates for California</Title>\r\n          </LeftContent>\r\n          <RightContent>\r\n            <ImageMask>\r\n              <img src=\"https://pbs.twimg.com/semantic_core_img/1338525361693368320/g6ZLOAcn?format=jpg&name=240x240\"/>\r\n            </ImageMask>\r\n          </RightContent>\r\n        </Content>\r\n\r\n        <Content>\r\n          <LeftContent>\r\n            <SmallText>PopTrending</SmallText>\r\n            <Title>Rihanna</Title>\r\n            <MiddleText>Rihanna fans are loving new photos shared by the singer</MiddleText>\r\n            <SmallText>115K Yuweets</SmallText>\r\n          </LeftContent>\r\n          <RightContent>\r\n            <ImageMask>\r\n              <img src=\"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS1DfSxkKXv_IeNZe4PeIzFM46ZMVjCh_FjWQ&usqp=CAU\"/>\r\n            </ImageMask>\r\n          </RightContent>\r\n        </Content>\r\n\r\n        <Content>\r\n          <LeftContent>\r\n            <SmallText>World newsLIVE</SmallText>\r\n            <Title>Death toll climbs as violence between Israeli forces and Hamas escalates</Title>\r\n            <SmallText>Trending with <A>Palestine</A>, <A>Netanyahu</A></SmallText>\r\n          </LeftContent>\r\n          <RightContent>\r\n            <ImageMask>\r\n              <img src=\"https://pbs.twimg.com/semantic_core_img/1391670316003254272/QuAohtuT?format=jpg&name=120x120\"/>\r\n            </ImageMask>\r\n          </RightContent>\r\n        </Content>\r\n        <ShowMore />\r\n      </ContentBox>\r\n\r\n      <ContentBox>\r\n        <ContentHeader>Who to follow</ContentHeader>\r\n        <Content>\r\n          <AccountContent>\r\n            <AccountPhoto src=\"https://pbs.twimg.com/profile_images/1387421728251408385/gVcCautU_400x400.jpg\"/>\r\n            <div>\r\n              <AccountName>\r\n                <Title>BTS_official</Title>\r\n                <img src={verified} width=\"100%\" height=\"100%\" style={{marginLeft:\"3px\"}} />\r\n              </AccountName>\r\n\r\n              <SmallText>@bts_bighit</SmallText>\r\n            </div>\r\n          </AccountContent>\r\n          <FollowBox>\r\n            <FollowBTN>Follow</FollowBTN>\r\n          </FollowBox>\r\n        </Content>\r\n        \r\n        <Content>\r\n          <AccountContent>\r\n            <AccountPhoto src=\"https://events.recode.net/wp-content/uploads/2016/05/elon-musk-square.jpg?quality=80&strip=info\"/>\r\n            <AccountInfo>\r\n              <AccountName>\r\n                <Title>Elon Musk</Title>\r\n                <img src={verified} width=\"18px\" height=\"18px\" style={{marginLeft:\"3px\"}} />\r\n              </AccountName>\r\n\r\n              <SmallText>@elonmusk</SmallText>\r\n            </AccountInfo>\r\n          </AccountContent>\r\n          <FollowBox>\r\n            <FollowBTN>Follow</FollowBTN>\r\n          </FollowBox>\r\n        </Content>\r\n\r\n        <Content>\r\n          <AccountContent>\r\n            <AccountPhoto src=\"https://pbs.twimg.com/profile_images/1262824892535373825/BiXDFDDp_400x400.jpg\"/>\r\n            <AccountInfo>\r\n              <AccountName>\r\n                <Title>Node.js</Title>\r\n                <img src={verified} width=\"18px\" height=\"18px\" style={{marginLeft:\"3px\"}} />\r\n              </AccountName>\r\n\r\n              <SmallText>@nodejs</SmallText>\r\n            </AccountInfo>\r\n          </AccountContent>\r\n          <FollowBox>\r\n            <FollowBTN>Follow</FollowBTN>\r\n          </FollowBox>\r\n        </Content>\r\n\r\n        <Content>\r\n          <AccountContent>\r\n            <AccountPhoto src=\"https://pbs.twimg.com/profile_images/1204796287696064512/6TcDDSFu_400x400.jpg\"/>\r\n            <AccountInfo>\r\n              <AccountName>\r\n                <Title>TikTok</Title>\r\n                <img src={verified} width=\"18px\" height=\"18px\" style={{marginLeft:\"3px\"}} />\r\n              </AccountName>\r\n\r\n              <SmallText>@tiktok_us</SmallText>\r\n            </AccountInfo>\r\n          </AccountContent>\r\n          <FollowBox>\r\n            <FollowBTN>Follow</FollowBTN>\r\n          </FollowBox>\r\n        </Content>\r\n\r\n        <Content>\r\n          <AccountContent>\r\n            <AccountPhoto src=\"https://pbs.twimg.com/profile_images/1363208451153821701/1VN0f5aI_400x400.png\"/>\r\n            <AccountInfo>\r\n              <AccountName>\r\n                <Title>Nintendo</Title>\r\n                <img src={verified} width=\"18px\" height=\"18px\" style={{marginLeft:\"3px\"}} />\r\n              </AccountName>\r\n\r\n              <SmallText>@Nintendo</SmallText>\r\n            </AccountInfo>\r\n          </AccountContent>\r\n          <FollowBox>\r\n            <FollowBTN>Follow</FollowBTN>\r\n          </FollowBox>\r\n        </Content>\r\n\r\n        <ShowMore />\r\n      </ContentBox>\r\n\r\n\r\n    </RightAsideContainer>\r\n  );\r\n}\r\n\r\n\r\n//=================== Styled Components ==================\r\nconst RightAsideContainer = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  width: 25rem;\r\n  padding-top: 57px;\r\n`;\r\n\r\nconst SearchHeader = styled(Shared.Header)`\r\n  width: 25rem;\r\n  padding: 0;\r\n`;\r\n\r\nconst ContentBox = styled.div`\r\n  background: #F7F9FA;\r\n  width: 22rem;\r\n  margin: 1rem;\r\n  border-radius: 1rem;\r\n`;\r\n\r\nconst ContentHeader = styled.p`\r\n  padding: 1rem;\r\n  border-bottom: 1px solid #EBEEF0;\r\n  font-size: 20px;\r\n  font-weight: 800;\r\n`;\r\n\r\nconst Content = styled.div`\r\n  display: flex;\r\n  width: 100%;\r\n  padding: 1rem;\r\n  cursor: pointer;\r\n  border-bottom: 1px solid #EBEEF0;\r\n  transition: all 200ms ease-in-out;\r\n  /* background: pink; */\r\n\r\n  &:hover {\r\n    background: #EFF1F2;\r\n  }\r\n`;\r\n\r\nconst ShowMoreContent = styled(Content)`\r\n  border: none;\r\n\r\n  &:hover {\r\n    border-radius: 0 0 1rem 1rem;\r\n  }\r\n`;\r\n\r\nconst LeftContent = styled.div``;\r\n\r\nconst SmallText = styled.p`\r\n  font-size: 13px;\r\n  color: rgb(91, 112, 131);\r\n  font-weight: 400;\r\n`;\r\n\r\nconst A = styled.span`\r\n  color: #1DA1F2;\r\n\r\n  &:hover {\r\n    text-decoration: 1px #1DA1F2 underline;\r\n  }\r\n`;\r\n\r\nconst MiddleText = styled.p`\r\n  font-size: 15px;\r\n  color: rgb(91, 112, 131);\r\n  font-weight: 400;\r\n`;\r\n\r\nconst Title = styled.p`\r\n  font-weight: 700;\r\n  font-size: 15px;\r\n  margin: 0.2rem 0;\r\n`;\r\n\r\nconst RightContent = styled.div`\r\n  display: flex;\r\n`;\r\n\r\nconst ImageMask = styled.div`\r\n  display: flex;\r\n  justify-content: center;\r\n  width: 68px;\r\n  height: 68px;\r\n  overflow: hidden;\r\n  border-radius: 15%;\r\n`;\r\n\r\n//====================\r\n\r\nconst AccountContent = styled(LeftContent)`\r\n  display: flex;\r\n  flex: 1;\r\n`;\r\n\r\nconst FollowBox = styled(RightContent)`\r\n  align-items: center;\r\n`;\r\n\r\nconst FollowBTN = styled(Shared.BTNwithText)`\r\n  color: #1DA1F2;\r\n  background-color: white;\r\n  border: 1px solid #1DA1F2;\r\n\r\n  &:hover {\r\n    background: #E8F5FE;\r\n  }\r\n`;\r\n\r\nconst AccountPhoto = styled(Shared.ProfilePhoto)``;\r\n\r\nconst AccountInfo = styled.div`\r\n  flex: 1;\r\n`;\r\n\r\nconst AccountName = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  width: 100%;\r\n`;","import { HashRouter, Route, Switch } from \"react-router-dom\";\r\nimport { useInit } from 'components_controll/ProvideAuth';\r\nimport Contact from 'routes/Contact';\r\nimport Home from 'routes/Home';\r\nimport LogIn from 'routes/LogIn';\r\nimport Profile from 'routes/Profile';\r\nimport Navigation from 'components_view/Navigation.js';\r\nimport styled from 'styled-components';\r\nimport AddContact from 'routes/AddContact';\r\nimport ChatBox from './ChatBox';\r\nimport { useChat } from 'components_controll/ProvideChat';\r\nimport { faTwitter } from '@fortawesome/free-brands-svg-icons';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport RightAside from './RightAside';\r\n\r\n\r\nexport default function AppRouter() {\r\n  const {isInit, isUserLogin} = useInit();\r\n  const {isChatting} = useChat();\r\n\r\n  return (\r\n    <div>\r\n      {isInit ? (\r\n        <HashRouter>\r\n          {isUserLogin ? (\r\n            <div style={{display: \"flex\", flexDirection: \"row\"}}>\r\n              <Navigation />\r\n              <Switch>\r\n                <RouteContainer>\r\n                  <Route exact path=\"/\"> <Home /> </Route>\r\n                  <Route exact path=\"/contact\"> <Contact /> </Route>\r\n                  <Route exact path=\"/add_contact\"> <AddContact /> </Route>\r\n                  <Route exact path=\"/profile\"> <Profile /> </Route>\r\n                </RouteContainer>\r\n              </Switch>\r\n              {isChatting && <ChatBox />}\r\n              <RightAside />\r\n            </div>\r\n          ) : (\r\n            <Route exact path=\"/\"> <LogIn /> </Route>\r\n          )}\r\n        </HashRouter>\r\n      ) : (\r\n        <FontAwesomeIcon icon={faTwitter} color={\"#1DA1F2\"} size=\"4x\" style={{marginTop: \"20rem\"}}/>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\n// ================ Styled Components ==============\r\nconst RouteContainer = styled.div`\r\n  border-left: 1px solid #EBEEF0;\r\n  border-right: 1px solid #EBEEF0;\r\n  \r\n  position: relative;\r\n  width: 600px;\r\n  margin-left: 16rem;\r\n  margin-top: 3.5rem;\r\n`;\r\n\r\n\r\n","import { createMuiTheme } from '@material-ui/core/styles';\r\n\r\nconst theme = createMuiTheme({\r\n  palette: {\r\n    primary: { \r\n      // light: ',\r\n      main: '#1DA1F2',\r\n      // dark: ,\r\n      contrastText: 'white',\r\n    },\r\n    secondary: { \r\n      // light: ',\r\n      main: '#ffcc00',\r\n      // dark: ,\r\n      contrastText: 'black',\r\n    },\r\n  }\r\n\r\n  // typography: {\r\n  //   fontFamily:['Arial']\r\n  // }\r\n});\r\n\r\nexport default theme;","import AppRouter from \"components_view/AppRouter\";\r\nimport ProvideAuth  from 'components_controll/ProvideAuth';\r\nimport styled, { createGlobalStyle } from 'styled-components';\r\nimport ProvideYuweets from 'components_controll/ProvideYuweets';\r\nimport ProvideContact from 'components_controll/ProvideContact';\r\n\r\nimport { ThemeProvider } from '@material-ui/core';\r\nimport theme from './theme.js'\r\nimport ProvideChat from 'components_controll/ProvideChat.js';\r\nimport ProvideProfile from 'components_controll/ProvideProfile.js';\r\n\r\nexport default function App() {\r\n  return (\r\n    <AppContainer>\r\n      <GlobalStyle />\r\n      <ProvideAuth>\r\n        <ProvideProfile>\r\n        <ProvideYuweets>\r\n        <ProvideContact>\r\n\r\n        <ProvideChat>\r\n        <ThemeProvider theme={theme}>\r\n          <AppRouter />\r\n        </ThemeProvider>\r\n        </ProvideChat>\r\n\r\n        </ProvideContact>\r\n        </ProvideYuweets>\r\n        </ProvideProfile>\r\n      </ProvideAuth>\r\n      {/* <Footer>&copy; Yuwitter {new Date().getFullYear()}</Footer> */}\r\n    \r\n    </AppContainer>\r\n  );\r\n}\r\n\r\n// ================ Styled Components ==============\r\nconst AppContainer = styled.div`\r\n  display: flex;\r\n  justify-content: center;\r\n\t/* background: beige; */\r\n  height: 100vh;\r\n`;\r\n\r\nconst GlobalStyle = createGlobalStyle`\r\n  * {\r\n    box-sizing: border-box;\r\n    padding: 0;\r\n    margin: 0;\r\n  }\r\n\r\n  body {\r\n    ${'' /* background: grey; */}\r\n    padding: 0 9rem;\r\n    user-select: none;\r\n    font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, Oxygen,\r\n    Ubuntu, Cantarell, \"Open Sans\", \"Helvetica Neue\", sans-serif;\r\n    font-size: 1rem;\r\n  }\r\n\r\n  img {\r\n    user-drag: none; \r\n    user-select: none;\r\n    -moz-user-select: none;\r\n    -webkit-user-drag: none;\r\n    -webkit-user-select: none;\r\n    -ms-user-select: none;\r\n    pointer-events:none;\r\n  }\r\n  \r\n  ${'' /* form {\r\n    width: 100%;\r\n  } */}\r\n\r\n  input {\r\n    all: unset;\r\n    box-sizing: border-box;\r\n    appearance: none;\r\n  }\r\n\r\n  button {\r\n    color: white;\r\n    border: none;\r\n    outline: none;\r\n    cursor: pointer;\r\n  }\r\n  \r\n  a {\r\n    text-decoration: none;\r\n    color: inherit;\r\n  }\r\n`;\r\n\r\nconst Footer = styled.footer`\r\n  height: 30px;\r\n  text-align: center;\r\n  margin-top: 3rem;\r\n  margin-bottom: 1rem;\r\n`;\r\n\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from 'components_view/App';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n"],"sourceRoot":""}