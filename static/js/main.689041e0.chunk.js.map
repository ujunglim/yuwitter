{"version":3,"sources":["components_controll/fbase.js","components_controll/ProvideAuth.js","components_view/CommonStyle.js","constants.js","components_controll/ProvideChat.js","localStorage.js","components_controll/ProvideContact.js","components_view/ContactSlot.js","routes/Contact.js","components_controll/ProvideYuweets.js","components_controll/ProvideOthers.js","components_view/ProfileImg.js","components_view/ProfileName.js","components_view/Yuweet.js","components_view/YuweetFactory.js","routes/Home.js","routes/LogIn.js","components_controll/ProvideProfile.js","components_controll/ProvideModal.js","components_view/Modal.js","routes/Profile.js","components_view/Navigation.js","components_controll/ProvideAddContact.js","routes/AddContact.js","components_view/ChatBox.js","image/verified.png","components_view/RightAside.js","routes/Notification.js","components_view/AppRouter.js","components_view/theme.js","components_view/App.js","index.js"],"names":["firebase","initializeApp","apiKey","process","authDomain","projectId","storageBucket","messagingSenderId","appId","firebaseInstance","authService","auth","dbService","firestore","storageService","storage","initContext","createContext","userContext","ProvideInit","children","useState","isInit","setInit","isUserLogin","setUserLogin","useEffect","onAuthStateChanged","a","user","contextValue","Provider","value","ProvideUser","userObj","setUserObj","displayName","uid","photoURL","providerData","email","updateProfile","args","myRef","doc","setNewUser","userCredential","dbUserObj","bgPhotoURL","collection","set","signUp","password","createUserWithEmailAndPassword","logIn","type","signInWithEmailAndPassword","google","GoogleAuthProvider","signInWithPopup","github","GithubAuthProvider","additionalUserInfo","isNewUser","logOut","signOut","editUserObj","newUserObj","profilePhotoRef","ref","child","putString","response","getDownloadURL","update","ProvideAuth","useUser","useContext","undefined","console","warn","FormButton","css","Shared","Container","styled","div","Header","InputForm","form","InputTextArea","textarea","InputText","input","ImageMask","ImgInMask","img","BTNwithText","button","Arrow","HoverDIV","FormInput","FormSubmit","CancelButton","span","CONTACT","SEARCH","CHAT","DEFAULT_PHOTOURL","chatContext","ProvideChat","isChatting","setIsChatting","chatterObj","setChatterObj","cancelOnSnapshot","setCancelOnSnapshot","key","initialValue","item","localStorage","getItem","JSON","parse","error","log","storedValue","setStoredValue","setItem","stringify","useLocalStorage","localChats","setLocalChats","run","cancelFunc","onSnapshot","snapshot","myContact","data","contact","chats","localChatArray","targetRef","reference","chatObj","state","push","clearChatData","pushChat","text","myUID","id","get","then","chatterRef","dbChats","pushChatData","useChat","contactContext","ProvideContact","list","friend","setFriend","request","setRequest","friendArray","requestObj","contactObj","i","length","j","temp","useContact","ContactSlot","friendUID","map","ContactSlotContainer","onClick","includes","ContactInfo","ContactImgMask","ContactImg","src","style","marginLeft","Contact","ContactContainer","FriendContainer","yuweetsContext","ProvideYuweets","yuweets","setYuweets","cancelOnSnaphot","setCancelOnSnaphot","orderBy","yuweetArray","docs","isOwner","creatorId","addYuweet","attachment","window","alert","attachmentUrl","attachmentRef","uuidv4","yuweetObj","createdAt","Date","now","creatorRef","comment","like","add","editYuweet","newYuweet","deleteYuweet","confirm","delete","refFromURL","addComment","commentText","catch","dbComment","commentData","clickLike","dbLike","likeData","useYuweets","othersContext","ProvideOthers","getPhoto","setCallback","getName","useOthers","ProfileImg","setPhotoURL","ProfileName","name","setName","CommenterInfo","EditManageBox","setEditing","onEditSubmitClick","display","justifyContent","prev","YuweetManager","onDeleteClick","ManagerBox","ManagerSpan","icon","faPencilAlt","faTrash","Like","myLike","dbLikeSize","Object","keys","liked","setLiked","LikeAction","LikeHoverDIV","FavoriteBorder","Favorite","color","Actions","setCommenting","ActionBox","CommentAction","ModeCommentOutlined","Comments","setCommentText","CommentBox","marginBottom","CommentBox_right","CommentInputForm","onSubmit","event","preventDefault","CommenterImgMask","Img","placeholder","onChange","target","width","required","memo","editing","commenting","setNewYuweet","onYuweetChange","useSpring","xys","config","mass","tension","friction","props","YuweetContainer","onMouseMove","clientX","clientY","currentTarget","getBoundingClientRect","left","top","height","onMouseLeave","transform","to","x","y","s","YuweetBox","CreatorInfo","Email","split","maxLength","autoFocus","YuweetImg","Text","animated","p","InputContainerDIV","textRef","setText","current","setAttachment","onSubmitClick","AttachmentContainer","AttachmentImg","Clear","document","getElementById","faTimesCircle","size","InputContainer_bottom","OtherAttachments","accept","theFile","files","reader","FileReader","onloadend","finishedEvent","result","readAsDataURL","htmlFor","cursor","ImageOutlined","GifOutlined","PollOutlined","SentimentSatisfiedAlt","DateRangeOutlined","YuweetBTN","useRef","YuweetFactoryContainer","CreatorImg","CreatorImgMask","Home","HomeContainer","YuweetList","LogIn","setEmail","setPassword","isNewAccount","setIsNewAccount","setError","message","onSocialClick","AuthContainer","faTwitter","margin","AuthInput","AuthSubmit","AuthError","AuthSwitch","Buttons","Button","faGoogle","faGithub","profileContext","ProvideProfile","newBgPhotoURL","setNewBgPhotoURL","prevBgPhotoURL","setPrevBgPhotoURL","bio","setBio","location","setLocation","website","setWebsite","useProfile","modalContext","ProvideModal","isModalOpen","setIsModalOpen","useModal","Modal","body","overflow","ModalDIV","ProfileSpan","NavSpan","EditBTN","EditButton","LogOutBTN","history","useHistory","onLogOutClick","LogOutBTNwithText","SaveBTN","bgPhotoRef","nameRef","bioRef","locationRef","websiteRef","errorMessage","onClickSave","newPhotoURL","newDisplayName","newBio","newLocation","newWebsite","charAt","bgPhotoStorageRef","bgData","otherInfoData","BGPhoto","position","BGContainer","ShadowDIV","PhotoCameraOutlined","BGImgMask","BGImg","ProfilePhoto","setNewPhotoURL","ProfilePhotoContainer","ProfileImgMask","faUserCircle","background","border","borderRadius","useStyles","makeStyles","theme","root","TextFields","setErrorMessage","classes","setNewDisplayName","className","noValidate","autoComplete","TextField","label","variant","multiline","rows","startsWith","ErrorSpan","EditContainer","from","scale","wobbly","EditDIV","EditHeader","EditHeader_left","CloseHoverDIV","Close","EditContent","InputLabel","Profile","ProfileContainer","InfoContainer","NameSpan","GreySpan","Link","WebsiteA","href","LocationOn","Navigation","Array","fill","isActive","setIsActive","switchActive","index","Navbar","LinkBox","HomeOutlined","fontSize","alignItems","MailOutlined","PersonAddOutlined","AccountCircleOutlined","NotificationsOutlined","BookmarkBorderOutlined","Subject","MoreHoriz","nav","AddContactContext","onHandleReuqest","targetUID","targetState","myState","sendRequestData","receiveRequestData","mutateContactData","targetContactData","onClicked","rest","mutatedData","stateText","ProvideAddContact","searchResult","setSearchResult","userCollection","requestList","setRequestList","requestArray","mutatedResult","searchUser","exists","useAddContact","addContact","Input","SubmitBTN","AddContactSlot","marginRight","InputFormContainer","marginTop","e","SearchResult","Request","RequestContainer","AddContact","AddContactContainer","TextInput","ChatBox","chatArray","bottom","stiff","ChatBoxContainer","ChatHeader","CloseAction","faChevronLeft","ChatterName","SettingAction","faEllipsisV","ChatContainer","MyChat","MyChatBox","ChatText","ChatterChat","ChatterPhoto","ChatterChatBox","SearchHeaderContainer","searchText","setSearchText","SearchHeader","SearchHeaderForm","open","Search","ShowMore","ShowMoreContent","RightAside","RightAsideContainer","ContentBox","ContentHeader","Content","SmallText","Title","NewsMask","MiddleText","A","AccountContent","WhoMask","AccountName","verified","FollowBox","FollowBTN","AccountInfo","TabPanel","other","role","hidden","aria-labelledby","Box","padding","Typography","component","a11yProps","backgroundColor","palette","paper","FullWidthTabs","useTheme","React","setValue","AppBar","boxShadow","Tabs","newValue","indicatorColor","textColor","aria-label","StyledTab","fontFamily","fontWeight","dir","direction","NotiBox","NotiDiv_top","NotiDiv_bottom","MentionsDiv","Notification","NotiContainer","Tab","AppRouter","init","useInit","flexDirection","RouteContainer","exact","path","createMuiTheme","primary","main","contrastText","secondary","App","AppContainer","GlobalStyle","ThemeProvider","createGlobalStyle","footer","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.689041e0.chunk.js","sourcesContent":["// Firebase configuration\r\nimport firebase from \"firebase/app\";\r\nimport \"firebase/auth\";\r\nimport \"firebase/firestore\";\r\nimport \"firebase/storage\";\r\n\r\nconst firebaseConfig = {\r\n    apiKey: process.env.REACT_APP_API_KEY,\r\n    authDomain: process.env.REACT_APP_AUTH_DOMAIN,\r\n    projectId: process.env.REACT_APP_PROJECT_ID,\r\n    storageBucket: process.env.REACT_APP_STORAGE_BUCKET,\r\n    messagingSenderId: process.env.REACT_APP_MESSAGIN_ID,\r\n    appId: process.env.REACT_APP_APP_ID\r\n  };\r\n// Initialize Firebase, call services once and export\r\nfirebase.initializeApp(firebaseConfig);\r\nexport const firebaseInstance = firebase;\r\nexport const authService = firebase.auth(); // suppors authentication backend services\r\nexport const dbService = firebase.firestore(); // supports cloud-hosted, NoSQL database\r\nexport const storageService = firebase.storage(); // supports user generated content, such as images and video","import { authService, dbService, firebaseInstance, storageService } from 'components_controll/fbase';\r\nimport React, { createContext, useContext, useEffect, useState } from 'react';\r\n\r\n// create context object\r\nconst initContext = createContext();\r\nconst userContext = createContext();\r\n\r\n// ====================== Child Component ============================\r\nfunction ProvideInit({children}) {\r\n  const [isInit, setInit] = useState(false); // loading time until app is ready\r\n  const [isUserLogin, setUserLogin] = useState(false); // initially user is not logged in\r\n\r\n  useEffect(() => {\r\n    // add observer for changes to user's sign-in state\r\n    authService.onAuthStateChanged(async (user) => {\r\n      setUserLogin(user ? true : false);\r\n      setInit(true); // when app is ready to start, stop loading\r\n    });\r\n  }, []);\r\n\r\n  // context value \r\n  const contextValue = {isInit, isUserLogin};\r\n  return (\r\n    <initContext.Provider value={contextValue}>\r\n      {children}\r\n    </initContext.Provider>\r\n  );\r\n}\r\n\r\nfunction ProvideUser({children}) {\r\n  // initially there's no userObj\r\n  const [userObj, setUserObj] = useState(null);\r\n  \r\n  useEffect(() => {\r\n    // add observer for changes to user's sign-in state\r\n    authService.onAuthStateChanged(async (user) => {\r\n      if(user) {\r\n        // User signed in, set UserObj\r\n        setUserObj({\r\n          displayName: user.displayName,\r\n          uid: user.uid,\r\n          photoURL: user.photoURL || user.providerData[0].photoURL,\r\n          email: user.email,\r\n          updateProfile: (args) => user.updateProfile(args),\r\n          myRef: dbService.doc(`/users/${user.email}`)\r\n        });\r\n      }\r\n      else {\r\n        //  User is signed out, set UserObj as null\r\n        setUserObj(null);\r\n      }\r\n    });\r\n  }, []);\r\n\r\n  // ---------------- Auth Functions --------------------------\r\n  // After got userCredential, then push to db\r\n  const setNewUser = (userCredential) => {\r\n    const {user} = userCredential;\r\n    // this is data, upload to firestore\r\n    const dbUserObj = {\r\n      displayName: user.displayName,\r\n      uid: user.uid,\r\n      photoURL: user.photoURL || user.providerData[0].photoURL,\r\n      bgPhotoURL: null\r\n    };\r\n\r\n    dbService.collection(\"users\").doc(`${user.email}`).set(dbUserObj);\r\n  }\r\n\r\n  // New User create account with specified email and passworc\r\n  const signUp = async (email, password) => {\r\n    const userCredential = await authService.createUserWithEmailAndPassword(email, password);\r\n    setNewUser(userCredential);\r\n  };\r\n\r\n  // logIn types are email and social(google, github)\r\n  const logIn = async (type, email, password) => {\r\n    let userCredential = null;\r\n    \r\n    switch(type) {\r\n      case \"email\":  \r\n        userCredential = await authService.signInWithEmailAndPassword(email, password);\r\n        break; \r\n      case \"google\": \r\n        const google = new firebaseInstance.auth.GoogleAuthProvider();\r\n        userCredential = await authService.signInWithPopup(google);\r\n        break;\r\n      case \"github\": \r\n        const github = new firebaseInstance.auth.GithubAuthProvider();\r\n        userCredential = await authService.signInWithPopup(github);\r\n        break;    \r\n    }\r\n    userCredential.additionalUserInfo.isNewUser && setNewUser(userCredential);\r\n  }\r\n\r\n  const logOut = async () => {\r\n\t\tawait authService.signOut();\r\n  };\r\n  \r\n  const editUserObj = async (newUserObj) => {\r\n    newUserObj = {...userObj, ...newUserObj};\r\n\r\n    // reupload new photoURL to storage\r\n    if(newUserObj[\"photoURL\"] !== userObj[\"photoURL\"]) {\r\n      // get ref\r\n      const profilePhotoRef = storageService\r\n        .ref()\r\n        .child(`ProfilePhoto/${userObj.email}`);\r\n      // upload photo from local url to storage by using storage reference\r\n      const response = await profilePhotoRef.putString(newUserObj.photoURL, \"data_url\");\r\n      // then get remote url from storage \r\n      newUserObj.photoURL = await response.ref.getDownloadURL();\r\n    }\r\n\r\n    // update local app\r\n    setUserObj(newUserObj);\r\n    // update firebase auth\r\n    await userObj.updateProfile(newUserObj);  \r\n    // update firestore\r\n    await dbService.doc(`users/${userObj.email}`).update({\r\n      displayName: newUserObj.displayName, \r\n      photoURL: newUserObj.photoURL\r\n      // bgPhotoURL: newUserObj.bgPhotoURL\r\n    });\r\n  };\r\n\r\n  // context value \r\n  const contextValue = {userObj, signUp, logIn, logOut, editUserObj};\r\n  return (\r\n    <userContext.Provider value={contextValue}>\r\n      {children}\r\n    </userContext.Provider>\r\n  );\r\n}\r\n\r\n// ===================== Parent Component ================================\r\n// ProvideInit covers ProvideUser\r\nexport default function ProvideAuth({children}) {\r\n  return (\r\n    <ProvideInit>\r\n      <ProvideUser>\r\n        {children}\r\n      </ProvideUser>\r\n    </ProvideInit>\r\n  );\r\n}\r\n\r\n// ===================== create context hook =========================== \r\n/**\r\n * @description \r\n * @return {{isInit:boolean, isUserLogin:boolean}}\r\n */\r\nexport const useInit = () => {\r\n  const init = useContext(initContext);\r\n  if (init === undefined)\r\n    console.warn(\"useInit() must be used inside ProvideAuth!\");\r\n  return init;\r\n}\r\n\r\n/**\r\n * @description \r\n * @return {{ userObj:object, signUp:function, logIn:function, logOut:function, editUserObj: function}}\r\n */\r\nexport const useUser = () => {\r\n  const user = useContext(userContext);\r\n  if (user === undefined)\r\n    console.warn(\"useUser() must be used inside ProvideAuth!\");\r\n  return user;\r\n}","import styled, { css } from 'styled-components';\r\n\r\nconst FormButton = css`\r\n  cursor: pointer;\r\n  width: 100%;\r\n  padding: 7px 20px;\r\n  text-align: center;\r\n  color: white;\r\n  border-radius: 20px;\r\n  \r\n  margin-top: 15px;\r\n  margin-bottom: 5px;\r\n`;\r\n\r\nexport const Shared = {\r\n  Container : styled.div`\r\n    display: flex;\r\n    flex-direction: column;\r\n    width: 100%;\r\n`,\r\n\r\n  Header : styled.div`\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n\r\n    font-weight: bold;\r\n    font-size: large;\r\n    padding: 1rem;\r\n    width: 600px;\r\n    height: 57px;\r\n    border: 1px solid #EBEEF0;\r\n    border-top: none;\r\n    position: fixed;\r\n    top: 0;\r\n    background: white;\r\n    z-index: 1;\r\n\r\n`,\r\n\r\n  InputForm : styled.form`\r\n    display: flex;\r\n    flex: 1;\r\n    align-items: center;\r\n    padding: 0.5rem 1rem;\r\n`,\r\n\r\n  InputTextArea : styled.textarea`\r\n    background: none;\r\n    resize: none;\r\n    border: none;\r\n    outline: none;\r\n    height: 3rem;\r\n    display: block;\r\n    overflow: hidden;\r\n    box-sizing: padding-box;\r\n    font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, Oxygen,\r\n      Ubuntu, Cantarell, \"Open Sans\", \"Helvetica Neue\", sans-serif;\r\n    font-size: large;\r\n  `,\r\n  \r\n\tInputText : styled.input`\r\n\t  /* flex-grow: 1; */\r\n\t\tmin-height: 40px;\r\n\t\tpadding: 0px 20px;\r\n\t\tcolor: black;\r\n\t\tborder: 1px solid #1DA1F2;\r\n\t\tborder-radius: 20px;\r\n\t\tfont-size: 1rem;\r\n    width: 100%;\r\n\t`,\r\n\r\n  ImageMask : styled.div`\r\n    display: flex;\r\n    justify-content: center;\r\n    width: 68px;\r\n    height: 68px;\r\n    overflow: hidden;\r\n    border-radius: 50%;\r\n\t\tmargin-right: 0.7rem;\r\n  `,\r\n\r\n  ImgInMask : styled.img`\r\n    width: auto;\r\n    height: auto;\r\n  `,\r\n\r\n\tBTNwithText : styled.button`\r\n\t  color: white;\r\n\t\tbackground-color: #1DA1F2;\r\n\t\tpadding: 0.6rem 1rem;\r\n\t\tborder-radius: 1.5rem;\r\n\t\tfont-weight: bold;\r\n\t`,\r\n\r\n\tArrow : styled.input`\r\n\t\tposition: absolute;\r\n\t\tright: 0;\r\n\t\tbackground-color: #1DA1F2;\r\n\t\theight: 40px;\r\n\t\twidth: 40px;\r\n\t\tpadding: 10px 0px;\r\n\t\ttext-align: center;\r\n\t\tborder-radius: 20px;\r\n\t\tcolor: white;\r\n\t\tcursor: pointer;\r\n`,\r\n\r\n  HoverDIV : styled.div`\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    cursor: pointer;\r\n    border-radius: 50%;\r\n    transition: all 200ms ease-in-out;\r\n    padding: 0.5rem;\r\n    width: 38px;\r\n    height: 38px;\r\n\r\n    &:hover {\r\n      background: #E8F5FE;\r\n    }\r\n`,\r\n\r\n// ============\r\n\r\n\r\n  FormInput : styled.input`\r\n    /* width: 100%; */\r\n    padding: 10px 20px;\r\n    border-radius: 20px;\r\n    border: 1px solid black;\r\n    text-align: center;\r\n    background-color: white;\r\n    color: black;\r\n  `,\r\n\r\n  FormSubmit : styled.input`\r\n    ${FormButton}\r\n    background-color: #1DA1F2;\r\n    width: 13rem;\r\n  `,\r\n\r\n  CancelButton : styled.span`\r\n    ${FormButton}\r\n    background-color: tomato;\r\n    width: 13rem;\r\n  `\r\n  \r\n} \r\n","// ============ contact state =================\r\nexport const CONTACT = {\r\n  REQUESTING: 0,\r\n  ACCEPTING: 1,\r\n  FRIEND: 2\r\n}\r\n\r\n// ============= search state ==============\r\nexport const SEARCH = { \r\n  NO_SEARCH: -3,\r\n  SEARCHING: -2,\r\n  NO_RESULT: -1\r\n}\r\n\r\n// ============= search state ==============\r\nexport const CHAT = {\r\n  SEND: 0,\r\n  RECEIVED: 1\r\n}\r\n\r\n// ============== default ===========\r\nexport const DEFAULT_PHOTOURL = \"https://cdn2.iconfinder.com/data/icons/user-people-4/48/5-512.png\";","import { CHAT, CONTACT } from 'constants.js';\r\nimport { useLocalStorage } from 'localStorage';\r\nimport { createContext, useContext, useEffect, useState } from 'react';\r\nimport { dbService } from './fbase';\r\nimport { useUser } from './ProvideAuth';\r\n\r\n// create context object\r\nconst chatContext = createContext();\r\n\r\nexport default function ProvideChat({children}) {\r\n  const [isChatting, setIsChatting] = useState(false);\r\n  const [chatterObj, setChatterObj] = useState(null);\r\n  const {userObj} = useUser();\r\n  const [cancelOnSnapshot, setCancelOnSnapshot] = useState(null);\r\n  // useLocalStorage is advanced useState\r\n  const [localChats, setLocalChats] = useLocalStorage(\"chats\", {});\r\n\r\n  useEffect(() => {\r\n    if(!userObj) {\r\n      return;\r\n    }\r\n\r\n    // delete onSnapshot observer of previous user\r\n    cancelOnSnapshot && cancelOnSnapshot.run();\r\n\r\n    // ========== pullChat =========\r\n    const cancelFunc = dbService.doc(`/users/${userObj.email}`).onSnapshot(snapshot => {\r\n      const myContact = snapshot.data().contact;\r\n\r\n      // check whether chats exist or not in db\r\n      for(let uid in myContact) {\r\n        if(myContact[uid].chats) {\r\n          // pull previous local chat of specific chatter\r\n          const localChatArray = localChats[uid] ? localChats[uid] : [];\r\n          const targetRef = myContact[uid].reference;\r\n\r\n          // pull chat from db\r\n          const chatObj = { \r\n            chats: myContact[uid].chats,\r\n            state: CHAT.RECEIVED\r\n          }\r\n\r\n          // push chat to localChats\r\n          localChatArray.push(chatObj);\r\n          localChats[uid] = localChatArray;\r\n\r\n          // save to localstorage\r\n          setLocalChats({...localChats});\r\n\r\n          // clear chat from db \r\n          const {myRef} = userObj;\r\n          const clearChatData = {\r\n            [`contact.${uid}`]: {\r\n              reference: targetRef,\r\n              state: CONTACT.FRIEND\r\n            }\r\n          }\r\n          myRef.update(clearChatData);\r\n        }\r\n      }\r\n    })\r\n    setCancelOnSnapshot({run: cancelFunc});\r\n\r\n  }, [userObj]);\r\n  \r\n\r\n  // =================== Chat Functions =======================\r\n  const pushChat = (text) => {\r\n    if(text !== \"\") {\r\n      const {uid:myUID, myRef} = userObj;\r\n      // pull previous local chat of specific chatter\r\n      const localChatArray = localChats[chatterObj.id] ? localChats[chatterObj.id] : [];\r\n  \r\n      const chatObj = {\r\n        chats: [text],\r\n        state: CHAT.SEND\r\n      }\r\n      localChatArray.push(chatObj);\r\n      localChats[chatterObj.id] = localChatArray;\r\n      // push to localstorage\r\n      setLocalChats({...localChats});\r\n  \r\n      // pull previous db chats\r\n      dbService.doc(`/users/${userObj.email}`).get().then(doc => {\r\n        const myContact = doc.data().contact;\r\n        const chatterRef = myContact[chatterObj.id].reference;\r\n  \r\n        chatterRef.get().then((doc) => {\r\n          const contact = doc.data()[\"contact\"];\r\n          // pull db chats\r\n          const dbChats = contact[myUID].chats ? contact[myUID].chats : [];\r\n          // push chat to array\r\n          dbChats.push(text);\r\n          // push to db\r\n          const pushChatData = {\r\n            [`contact.${myUID}`] : {\r\n              reference: myRef,\r\n              state: CONTACT.FRIEND,\r\n              chats: dbChats\r\n            }\r\n          }\r\n          chatterRef.update(pushChatData);\r\n        })\r\n      })\r\n    }\r\n  }\r\n\r\n\r\n  // context value\r\n  const contextValue = {isChatting, setIsChatting, pushChat, chatterObj, setChatterObj, localChats};\r\n  return(\r\n    <chatContext.Provider value={contextValue}>\r\n      {children}\r\n    </chatContext.Provider>\r\n  );\r\n}\r\n\r\n// ================== create context hook ===================\r\n/**\r\n * @description\r\n * @return {{isChatting: boolean, setIsChatting: function, pushChat: function, chatterObj: object, setChatterObj: function, localChats: object}}\r\n */\r\nexport const useChat = () => {\r\n  const chat = useContext(chatContext);\r\n  return chat;\r\n}","import { useState } from \"react\";\r\n\r\nexport const useLocalStorage = (key, initialValue) => {\r\n  const [storedValue, setStoredValue] = useState(() => {\r\n    try {\r\n      // get previous storedValue from local storage by key\r\n      const item = localStorage.getItem(key);\r\n      return item ? JSON.parse(item) : initialValue;\r\n    }\r\n    catch (error) {\r\n      console.log(error);\r\n      return initialValue;\r\n    }\r\n  });\r\n\r\n  const setValue = (value) => {\r\n    try {\r\n      // save state\r\n      setStoredValue(value);\r\n      // save localstorage\r\n      localStorage.setItem(key, JSON.stringify(value))\r\n    }\r\n    catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  return [storedValue, setValue];\r\n}","import { dbService } from './fbase';\r\nimport { useUser } from './ProvideAuth';\r\nimport { createContext, useContext, useEffect, useState } from 'react'\r\nimport { CONTACT } from 'constants.js';\r\n\r\n// create context object\r\nconst contactContext = createContext();\r\n\r\n// ===================== Parent Component ================================\r\nexport default function ProvideContact({children}) {\r\n  const [friend, setFriend] = useState({list:[]});\r\n  const [request, setRequest] = useState({});\r\n\r\n  const {userObj} = useUser();\r\n  const [cancelOnSnapshot, setCancelOnSnapshot] = useState(null);\r\n\r\n  useEffect(() => {\r\n\t\t// if no user is logged in, don't add onSnapshot observer\r\n    if(!userObj) {\r\n      return;\r\n    }\r\n    // delete onSnapshot observer of previous user\r\n    cancelOnSnapshot && cancelOnSnapshot.run();\r\n\r\n    const cancelFunc = dbService\r\n    .doc(`/users/${userObj.email}`).onSnapshot(async(snapshot) => {\r\n      const data = snapshot.data();\r\n      \r\n      if(data.contact) {\r\n      // when there's contact\r\n        const {contact} = data;\r\n        const friendArray = [];\r\n        const requestObj = {};\r\n  \r\n        for(const uid in contact) {\r\n          const {reference, state} = contact[uid];\r\n          const {displayName, photoURL} = (await reference.get()).data();\r\n          const contactObj = {\r\n            uid,\r\n            displayName,\r\n            photoURL,\r\n            state,\r\n            reference\r\n          }\r\n\r\n          if(contact[uid].state == CONTACT.FRIEND) {\r\n            friendArray.push(contactObj);\r\n          }\r\n          else {\r\n            const email = reference.id;\r\n            requestObj[email] = {...contactObj}; \r\n          }\r\n        }\r\n        // order friendArray by name\r\n        for(let i = 0; i < friendArray.length; ++i) {\r\n          for(let j = i; j > 0; --j) {\r\n            if(friendArray[j-1]['displayName'] > friendArray[j]['displayName']) {\r\n              const temp = friendArray[j-1];\r\n              friendArray[j-1] = friendArray[j];\r\n              friendArray[j] = temp;\r\n            }\r\n            else break;\r\n          }\r\n        }\r\n\r\n        setFriend({list: friendArray});\r\n        setRequest(requestObj);\r\n\r\n      }\r\n      else {\r\n        // when there's no contact\r\n        setFriend({list:[]});\r\n        setRequest({});\r\n      }\r\n    })\r\n    setCancelOnSnapshot({run: cancelFunc});\r\n\r\n\t}, [userObj]);\r\n\r\n  \r\n  // ================== Context Value ======================\r\n  const contextValue = {friend, request};\r\n  \r\n  return (\r\n    <contactContext.Provider value={contextValue}>\r\n      {children}\r\n    </contactContext.Provider>\r\n  );\r\n}\r\n// ================== create context hook ===================\r\n/**\r\n * @description \r\n * @return {{friend: array, request: object}}\r\n */\r\nexport const useContact = () => {\r\n\tconst contact = useContext(contactContext);\r\n\tif (contact === undefined)\r\n\t\tconsole.warn(\"useContact() must be used inside ProvideContact!\");\r\n\treturn contact;\r\n}","import styled from 'styled-components';\r\nimport { DEFAULT_PHOTOURL } from 'constants.js';\r\nimport { useChat } from 'components_controll/ProvideChat';\r\nimport { Shared } from './CommonStyle';\r\nimport { useContact } from 'components_controll/ProvideContact';\r\n\r\nexport default function ContactSlot({id, displayName, photoURL, children}) {\r\n  const {setIsChatting, setChatterObj} = useChat();\r\n  const {friend: {list}} = useContact();\r\n  \r\n  const friendUID = [];\r\n  list.map(friend => friendUID.push(friend.uid));\r\n\r\n  const onClick = () => {\r\n    if(friendUID.includes(id)) {\r\n      setIsChatting(true);\r\n      const chatterObj = {id, displayName, photoURL};\r\n      setChatterObj(chatterObj);\r\n    }\r\n  }\r\n  \r\n  return(\r\n    <ContactSlotContainer key={id} onClick={onClick}>\r\n      <ContactInfo>\r\n        <ContactImgMask>\r\n          <ContactImg src={photoURL || DEFAULT_PHOTOURL} />\r\n        </ContactImgMask>\r\n\r\n        <span style={{marginLeft:\"1rem\"}}>{displayName}</span>\r\n      </ContactInfo>\r\n      \r\n      {children}     \r\n    </ContactSlotContainer>\r\n  );\r\n}\r\n\r\n//================= Styled Components ====================\r\nconst ContactSlotContainer = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  width: 25rem;\r\n  padding: 0.5rem;\r\n  border-radius: 0.5rem;\r\n  cursor: pointer;\r\n  transition: all 200ms ease-in-out;\r\n\r\n  &:hover {\r\n    background: #EBEEF0;\r\n  }\r\n`;\r\n\r\nconst ContactImgMask = styled(Shared.ImageMask)`\r\n  width: 3rem;\r\n  height: 3rem;\r\n`;\r\n\r\nconst ContactImg = styled(Shared.ImgInMask)``;\r\n\r\nconst ContactInfo = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n`;","import React from 'react';\r\nimport { Shared } from 'components_view/CommonStyle';\r\nimport styled from 'styled-components';\r\nimport ContactSlot from 'components_view/ContactSlot';\r\nimport { useContact } from 'components_controll/ProvideContact';\r\n\r\nexport default function Contact() {\r\n  const {friend:{list}} = useContact();\r\n  \r\n  return (\r\n    <ContactContainer>\r\n      <Shared.Header><span>Messages</span></Shared.Header>\r\n\r\n      {list.length == 0 ? (\r\n        <span>Add friends by searching</span>\r\n      ) : (\r\n        <FriendContainer>\r\n          {list.map(({uid, displayName, photoURL}) => (\r\n            <ContactSlot \r\n              key={uid}\r\n              id={uid}\r\n              displayName={displayName}\r\n              photoURL={photoURL}\r\n            />\r\n          ))}\r\n        </FriendContainer>\r\n      )\r\n      }\r\n    </ContactContainer>\r\n  );\r\n}\r\n\r\n//=========== Styled Components =============\r\nconst ContactContainer = styled(Shared.Container)`\r\n\talign-items: center;\r\n`;\r\n\r\nconst FriendContainer = styled.div`\r\n  align-items: center;\r\n  justify-content: center;\r\n\tmargin-top: 2rem;\r\n`;\r\n\r\n","import { createContext, useContext, useEffect, useState } from 'react'\r\nimport { dbService, storageService } from './fbase';\r\nimport { useUser } from './ProvideAuth';\r\nimport { v4 as uuidv4 } from 'uuid';\r\n\r\n// create context object\r\nconst yuweetsContext = createContext();\r\n\r\nexport default function ProvideYuweets({children}) {\r\n  // out of [] add {}, to refresh when set whole list again\r\n  const [yuweets, setYuweets] = useState({list:[]}); \r\n  const {userObj} = useUser();\r\n  const [cancelOnSnaphot, setCancelOnSnaphot] = useState(null); \r\n\r\n  useEffect(() => {   \r\n    // if no user is logged in, don't add onSnapshot observer\r\n    if(!userObj) {\r\n      return;\r\n    }\r\n    // delete onSnapshot observer of previous user\r\n    cancelOnSnaphot && cancelOnSnaphot.run();\r\n    \r\n    // get realtime documents of yuweets collection\r\n    const cancelFunc = dbService\r\n      .collection(\"yuweets\")\r\n      .orderBy(\"createdAt\", \"desc\") // sort yuweets in descending order of created time\r\n      .onSnapshot((snapshot) => {\r\n        const yuweetArray = snapshot.docs.map(doc => ({\r\n          id: doc.id,\r\n          isOwner: doc.data().creatorId === userObj.uid,  // to let only owner of yuweet can edit and delete. \r\n          ...doc.data()\r\n        }));\r\n\r\n        setYuweets({list: yuweetArray});\r\n      });\r\n    \r\n    // set cancel snapshot method\r\n    setCancelOnSnaphot({run:cancelFunc});\r\n  }, [userObj]);\r\n  \r\n  // =================== Functions =======================\r\n  const addYuweet = async (text, attachment) => {\r\n    // if(text === \"\") {\r\n    //   window.alert(\"Write some text\")\r\n    //   return;\r\n    // }\r\n    window.alert(\"Posting yuweet...\");\r\n    \r\n    let attachmentUrl = \"\";\r\n\r\n    // when yuweet has attachment, upload it's url to firebase storage \r\n    if(attachment !== \"\") {\r\n      // get reference of attachment file\r\n      const attachmentRef = storageService\r\n        .ref()\r\n        .child(`Yuweet/${userObj.email}/${uuidv4()}`);\r\n\r\n      // putString() uploads string data (raw, base64, base64url, or data_url encoded string) to storage\r\n      const response = await attachmentRef.putString(attachment, \"data_url\");\r\n      // download url from reference\r\n      attachmentUrl = await response.ref.getDownloadURL();\r\n    }\r\n\r\n    const yuweetObj = {\r\n      email: userObj.email,\r\n      createdAt: Date.now(),\r\n      creatorId: userObj.uid,\r\n      creatorRef: userObj.myRef,\r\n      text: text,\r\n      attachmentUrl, // if attachment exists save url string, if not save \"\"\r\n      comment: [],\r\n      like: {}\r\n    }\r\n\r\n    // add new yuweet obj to yuweets collection\r\n    await dbService.collection(\"yuweets\").add(yuweetObj);\r\n    window.alert(\"Post yuweet successfully!\")\r\n  }\r\n\r\n  const editYuweet = async (id, newYuweet) => {\r\n    // update part of a document without overwriting the entire document\r\n    await dbService.doc(`yuweets/${id}`).update({\r\n      text: newYuweet\r\n    });\r\n  }\r\n\r\n  const deleteYuweet = async (id, attachmentUrl) => {\r\n    const ok = window.confirm(\"Are you sure delete Yuweet?\");\r\n    if(ok) {\r\n      // delete yuweet\r\n      await dbService.doc(`yuweets/${id}`).delete();\r\n      // delete attachment\r\n      // refFromURL returns reference for given URL\r\n      await storageService.refFromURL(attachmentUrl).delete();\r\n    }\r\n  }\r\n\r\n  const addComment = async (id, commentText) => {\r\n    const {myRef} = userObj;\r\n    // get previous dbComment of specific yuweet\r\n    const dbComment = await dbService.doc(`/yuweets/${id}`).get()\r\n      .then((doc) => (doc.data().comment))\r\n      .catch((error) => console.log(error));\r\n\r\n    // add new comment to previous dbComment\r\n    dbComment.push({comment:commentText, reference:myRef});\r\n    const commentData = {[`comment`] : dbComment};\r\n    // update comment part of yuweet\r\n    dbService.doc(`yuweets/${id}`).update(commentData);\r\n  }\r\n\r\n  const clickLike = async (id) => {\r\n    const {uid, displayName} = userObj;\r\n    // get previous dbLike data of specific yuweet\r\n    const dbLike = await dbService.doc(`yuweets/${id}`).get()\r\n      .then((doc) => (doc.data().like))\r\n      .catch((error) => console.log(error));\r\n\r\n    if(!dbLike[uid]) {\r\n      // add id of who likes\r\n      dbLike[uid] = displayName;\r\n    }\r\n    else {\r\n      // delete id of who canceled like\r\n      delete dbLike[uid];  \r\n    }\r\n    \r\n    const likeData = {[`like`] : dbLike};\r\n    // update dbLike of yuweet\r\n    dbService.doc(`yuweets/${id}`).update(likeData);\r\n  }\r\n\r\n  // =================== context value  =======================\r\n  const contextValue = {yuweets, addYuweet, editYuweet, deleteYuweet, addComment, clickLike};\r\n\r\n  return (\r\n    <yuweetsContext.Provider value={contextValue}>\r\n      {children}\r\n    </yuweetsContext.Provider>\r\n  );\r\n}\r\n\r\n// =================== create context hook =====================\r\n/**\r\n * @description \r\n * @return {{yuweets: array, addYuweet: function, editYuweet: function, deleteYuweet: function, addComment: function, clickLike: function}}\r\n */\r\nexport const useYuweets = () => {\r\n  const yuweets = useContext(yuweetsContext);\r\n  if (yuweets === undefined)\r\n    console.warn(\"useYuweets() must be used inside ProvideYuweets!\");\r\n  return yuweets;\r\n}","import { dbService } from './fbase';\r\nimport { createContext, useContext } from \"react\";\r\n\r\nconst othersContext = createContext();\r\n\r\nexport default function ProvideOthers({children}) {\r\n\r\n  const getPhoto = async (reference, setCallback) => {\r\n    const ref = (typeof reference == 'string') ? dbService.doc(reference) : reference;\r\n    const {photoURL} = (await ref.get()).data();\r\n    setCallback(photoURL);\r\n  }\r\n\r\n  const getName = async (reference, setCallback) => {\r\n    const ref = (typeof reference == 'string') ? dbService.doc(reference) : reference;\r\n    const {displayName} = (await ref.get()).data();\r\n    setCallback(displayName);\r\n  }\r\n\r\n  const contextValue = {getPhoto, getName};\r\n  return (\r\n    <othersContext.Provider value={contextValue}>\r\n      {children}\r\n    </othersContext.Provider>\r\n  );\r\n}\r\n\r\n//================= Hook ===================\r\n/** \r\n * @description\r\n * @return {{getPhoto: function, getName: function}}\r\n*/\r\nexport const useOthers = () => {\r\n  const others = useContext(othersContext);\r\n  return others;\r\n}","import styled from 'styled-components';\r\nimport { DEFAULT_PHOTOURL } from 'constants.js';\r\nimport { Shared } from './CommonStyle';\r\nimport { useEffect, useState } from 'react';\r\nimport { useOthers } from 'components_controll/ProvideOthers';\r\n\r\nexport default function ProfileImg({reference}) {\r\n  const {getPhoto} = useOthers();\r\n  const [photoURL, setPhotoURL] = useState(DEFAULT_PHOTOURL);\r\n\r\n  useEffect(() => {\r\n    getPhoto(reference, setPhotoURL);\r\n  }, [reference])\r\n  \r\n  return(\r\n    <ContactImgMask>\r\n      <ContactImg src={photoURL || DEFAULT_PHOTOURL} />\r\n    </ContactImgMask>\r\n  );\r\n}\r\n\r\nconst ContactImgMask = styled(Shared.ImageMask)`\r\n  width: 3rem;\r\n  height: 3rem;\r\n`;\r\n\r\nconst ContactImg = styled(Shared.ImgInMask)``;","import { useEffect, useState } from 'react';\r\nimport { useOthers } from 'components_controll/ProvideOthers';\r\nimport styled from 'styled-components';\r\n\r\nexport default function ProfileName({reference}) {\r\n  const {getName} = useOthers();\r\n  const [name, setName] = useState('');\r\n\r\n  useEffect(() => {\r\n    getName(reference, setName);\r\n  }, [reference])\r\n\r\n  return(<CommenterInfo>{name}</CommenterInfo>);\r\n}\r\n\r\n//================= Styled Components ====================\r\nconst CommenterInfo = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  font-size: 1rem;\r\n  font-weight: 700;\r\n`;\r\n","import React, { useState } from \"react\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { faTrash, faPencilAlt } from \"@fortawesome/free-solid-svg-icons\";\r\nimport styled from \"styled-components\";\r\nimport { Shared } from \"components_view/CommonStyle\";\r\nimport { useYuweets } from \"components_controll/ProvideYuweets\";\r\nimport { DEFAULT_PHOTOURL } from \"constants.js\";\r\nimport { Favorite, FavoriteBorder, ModeCommentOutlined} from \"@material-ui/icons\";\r\nimport { useUser } from \"components_controll/ProvideAuth\";\r\nimport { memo } from 'react';\r\nimport ProfileImg from './ProfileImg';\r\nimport ProfileName from './ProfileName';\r\nimport { animated, useSpring } from '@react-spring/web';\r\n\r\n//========================= Child Component ==============================\r\nfunction EditManageBox({ id, newYuweet, setEditing }) {\r\n  const { editYuweet } = useYuweets();\r\n  const toggleEditing = () => setEditing((prev) => !prev); // open and close edit mode\r\n\r\n  const onEditSubmitClick = async () => {\r\n    // send id and new text of edited yuweet\r\n    editYuweet(id, newYuweet);\r\n    setEditing(false); // close edit mode\r\n  };\r\n\r\n  return (\r\n    <div style={{ display: \"flex\", justifyContent: \"space-around\" }}>\r\n      <Shared.FormSubmit\r\n        type=\"submit\"\r\n        value=\"Update yuweet\"\r\n        onClick={onEditSubmitClick}\r\n      />\r\n      <Shared.CancelButton onClick={toggleEditing}>Cancel</Shared.CancelButton>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction YuweetManager({ id, attachmentUrl, setEditing }) {\r\n  const { deleteYuweet } = useYuweets();\r\n  const toggleEditing = () => setEditing((prev) => !prev); // set opposite value or previous\r\n\r\n  const onDeleteClick = async () => {\r\n    deleteYuweet(id, attachmentUrl);\r\n  };\r\n\r\n  return (\r\n    <ManagerBox>\r\n      <ManagerSpan onClick={toggleEditing}>\r\n        <FontAwesomeIcon icon={faPencilAlt} />\r\n      </ManagerSpan>\r\n      <ManagerSpan onClick={onDeleteClick}>\r\n        <FontAwesomeIcon icon={faTrash} />\r\n      </ManagerSpan>\r\n    </ManagerBox>\r\n  );\r\n}\r\n\r\nfunction Like({ id, like }) {\r\n  const {userObj: { uid }} = useUser();\r\n  const myLike = like[uid]; // check like array to know whether or not I liked before\r\n  const dbLikeSize = Object.keys(like).length; // get how many likes are\r\n\r\n  const [liked, setLiked] = useState(myLike ? true : false);\r\n  const { clickLike } = useYuweets();\r\n\r\n  const toggleLike = () => {\r\n    clickLike(id);\r\n    setLiked((prev) => !prev); // set opposite value or previous\r\n  };\r\n\r\n  return (\r\n    <LikeAction onClick={toggleLike}>\r\n      <LikeHoverDIV>\r\n        {liked === false && <FavoriteBorder></FavoriteBorder>}\r\n        {liked === true && <Favorite style={{ color: \"#ED4956\" }}></Favorite>}\r\n      </LikeHoverDIV>\r\n\r\n      {dbLikeSize !== 0 && <span>{dbLikeSize}</span>}\r\n    </LikeAction>\r\n  );\r\n}\r\n\r\nfunction Actions({ setCommenting, comment, like, id }) {\r\n  const onClickComment = () => {\r\n    setCommenting((prev) => !prev); // open or close comment box\r\n  };\r\n\r\n  return (\r\n    <ActionBox>\r\n      <CommentAction onClick={onClickComment}>\r\n        <Shared.HoverDIV>\r\n          <ModeCommentOutlined />\r\n        </Shared.HoverDIV>\r\n        {comment.length !== 0  && <span>{comment.length}</span>}\r\n      </CommentAction>\r\n\r\n      <Like id={id} like={like} />\r\n    </ActionBox>\r\n  );\r\n}\r\n\r\nfunction Comments({ id, comment}) {\r\n  const [commentText, setCommentText] = useState(\"\");\r\n  const { addComment } = useYuweets();\r\n  const { userObj } = useUser();\r\n\r\n  const onCommentChange = (event) => {\r\n    const {target: { value }} = event;\r\n    setCommentText(value); // show changed comment\r\n  };\r\n\r\n  const onSubmitComment = (event) => {\r\n    event.preventDefault();\r\n    // return when empty comment has submitted\r\n    if(commentText == \"\") {\r\n      return;\r\n    }\r\n    addComment(id, commentText);\r\n    setCommentText(\"\");\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {comment && comment.map(({ comment, reference }, id) => (\r\n        <CommentBox key={id} style={{ marginBottom: \"0.5rem\" }}>\r\n          <ProfileImg reference={reference} />\r\n          <CommentBox_right>\r\n            <ProfileName reference={reference} />\r\n            {comment}\r\n          </CommentBox_right>\r\n        </CommentBox>\r\n      ))}\r\n\r\n      <CommentInputForm onSubmit={onSubmitComment}>\r\n        <div>\r\n          <CommenterImgMask>\r\n            <Img src={userObj.photoURL || DEFAULT_PHOTOURL} />\r\n          </CommenterImgMask>\r\n        </div>\r\n\r\n        <Shared.InputText\r\n          value={commentText}\r\n          type=\"text\"\r\n          placeholder=\"Write some comments\"\r\n          onChange={onCommentChange}\r\n          style={{ width: \"100%\" }}\r\n          required\r\n        />\r\n      </CommentInputForm>\r\n    </>\r\n  );\r\n}\r\n\r\n//====================== Parent Component ===============================\r\nexport default memo(function Yuweet({\r\n  id,\r\n  creatorRef,\r\n  isOwner,\r\n  text,\r\n  attachmentUrl,\r\n  email,\r\n  comment,\r\n  like\r\n}) {\r\n  \r\n  // update boolean\r\n  const [editing, setEditing] = useState(false);\r\n  const [commenting, setCommenting] = useState(false);\r\n  // update input value\r\n  const [newYuweet, setNewYuweet] = useState(text);\r\n\r\n  const onYuweetChange = async (event) => {\r\n    const {target: { value }} = event;\r\n    setNewYuweet(value);\r\n  };\r\n\r\n  // ============= spring animation ==============\r\n  const [props, set] = useSpring(() => ({ xys:[0, 0, 1], config: { mass:15, tension: 350, friction: 60 } }));\r\n\r\n  const trans = (x, y, s) => `perspective(600px) rotateX(${x}deg) rotateY(${y}deg) scale(${s})`  \r\n  // animation depends on mouse move\r\n  const onMouseMove = ({ clientX, clientY, currentTarget:dom }) => {\r\n    const {left, top, width, height} = dom.getBoundingClientRect();\r\n    const x = clientX - left;\r\n    const y = clientY - top;\r\n\r\n    const newX = -(y - height / 2) / height * 10;\r\n    const newY = (x - width / 2) / width * 10;\r\n    const newScale = 1.03;\r\n    // set animation props\r\n    set({ xys: [newX, newY, newScale] });\r\n  }\r\n\r\n  return (\r\n    <YuweetContainer\r\n      onMouseMove={onMouseMove}\r\n      onMouseLeave={() => set({ xys: [0, 0, 1] })}\r\n      style={{ transform: props.xys.to(trans) }}\r\n    >\r\n\r\n      <YuweetBox>\r\n        {creatorRef && <ProfileImg reference={creatorRef} />}\r\n\r\n        <Shared.Container style={{ width: \"494px\" }}>\r\n          <CreatorInfo>\r\n            {creatorRef && <ProfileName reference={creatorRef} />}\r\n            <Email>@{email.split(\"@\")[0]}</Email>\r\n          </CreatorInfo>\r\n\r\n          {/* is editing yuweet or not */}\r\n          {editing ? (\r\n            <>\r\n              <Shared.InputTextArea\r\n                value={newYuweet}\r\n                onChange={onYuweetChange}\r\n                type=\"text\"\r\n                placeholder=\"Edit your yuweet\"\r\n                maxLength={100}\r\n                required\r\n                autoFocus\r\n              />\r\n              {/* if attachment exists show it */}\r\n              {attachmentUrl && <YuweetImg src={attachmentUrl} />}\r\n              <EditManageBox\r\n                id={id}\r\n                newYuweet={newYuweet}\r\n                setEditing={setEditing}\r\n              />\r\n            </>\r\n          ) : (\r\n            <>\r\n              <Text>{text}</Text>\r\n              {attachmentUrl && <YuweetImg src={attachmentUrl} />}\r\n              {isOwner && (\r\n                <YuweetManager\r\n                  id={id}\r\n                  attachmentUrl={attachmentUrl}\r\n                  setEditing={setEditing}\r\n                />\r\n              )}\r\n              <Actions\r\n                setCommenting={setCommenting}\r\n                comment={comment}\r\n                like={like}\r\n                id={id}\r\n              />\r\n              {commenting && <Comments id={id} comment={comment}/>}\r\n            </>\r\n          )}\r\n        </Shared.Container>\r\n      </YuweetBox>\r\n    </YuweetContainer>\r\n  );\r\n})\r\n\r\n//================= Styled Components ====================\r\nconst YuweetContainer = styled(animated.div)`\r\n  margin: 1rem 0;\r\n  padding: 20px;\r\n  position: relative;\r\n  color: rgba(0, 0, 0, 0.8);\r\n  border-top: 1px solid #ebeef0;\r\n  border-bottom: 1px solid #ebeef0;\r\n  background: white;\r\n\r\n  box-shadow: 0px 10px 30px -5px rgba(0, 0, 0, 0.2);\r\n  transition: box-shadow 0.5s;\r\n  will-change: transform;\r\n\r\n  &:hover {\r\n    box-shadow: 0px 10px 30px -5px rgba(0, 0, 0, 0.3);\r\n  }\r\n`;\r\n\r\nconst YuweetBox = styled.div`\r\n  display: flex;\r\n  flex-direction: row;\r\n`;\r\n\r\nconst CreatorImgBox = styled.div`\r\n  width: 3rem;\r\n  height: 3rem;\r\n  margin-right: 0.7rem;\r\n`;\r\n\r\nconst CreatorImgMask = styled(Shared.ImageMask)`\r\n  width: 3rem;\r\n  height: 3rem;\r\n  margin-right: 0.7rem;\r\n`;\r\n\r\nconst Img = styled(Shared.ImgInMask)``;\r\n\r\nconst CreatorInfo = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  font-size: 1rem;\r\n  font-weight: 700;\r\n  margin-bottom: 0.5rem;\r\n`;\r\n\r\nconst CommentBox = styled.div`\r\n  display: flex;\r\n  flex-direction: row;\r\n`;\r\n\r\nconst CommenterImgMask = styled(Shared.ImageMask)`\r\n  width: 2rem;\r\n  height: 2rem;\r\n\r\n  margin-right: 0.5rem;\r\n  border-radius: 50%;\r\n`;\r\n\r\nconst Email = styled.span`\r\n  margin-left: 5px;\r\n  color: grey;\r\n  font-weight: lighter;\r\n`;\r\n\r\nconst Text = styled.p`\r\n  font-size: 1rem;\r\n  line-height: 20px;\r\n\r\n  white-space: pre-wrap; /* CSS3 */\r\n  white-space: -moz-pre-wrap; /* Firefox */\r\n  white-space: -pre-wrap; /* Opera <7 */\r\n  white-space: -o-pre-wrap; /* Opera 7 */\r\n  word-wrap: break-word; /* IE */\r\n`;\r\n\r\nconst YuweetImg = styled.img`\r\n  width: 100%;\r\n  border-radius: 1rem;\r\n  margin-top: 1rem;\r\n`;\r\n\r\nconst ManagerBox = styled.div`\r\n  position: absolute;\r\n  right: 10px;\r\n  top: 10px;\r\n`;\r\n\r\nconst ManagerSpan = styled.span`\r\n  cursor: pointer;\r\n  margin: 0 10px 10px 0;\r\n`;\r\n\r\nconst ActionBox = styled.div`\r\n  padding: 0.5rem 0 1rem 0;\r\n  display: flex;\r\n  position: relative;\r\n  left: -0.5rem;\r\n`;\r\n\r\nconst LikeAction = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  cursor: pointer;\r\n  width: 4rem;\r\n\r\n  &:hover {\r\n    color: #ed4956;\r\n  }\r\n`;\r\n\r\nconst CommentAction = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  cursor: pointer;\r\n  width: 4rem;\r\n\r\n  &:hover {\r\n    color: #1da1f2;\r\n  }\r\n`;\r\n\r\nconst LikeHoverDIV = styled(Shared.HoverDIV)`\r\n  &:hover {\r\n    background: #ffdde8;\r\n  }\r\n`;\r\n\r\nconst CommentInputForm = styled(Shared.InputForm)`\r\n  padding: 1rem 0;\r\n`;\r\n\r\nconst CommentBox_right = styled.div`\r\n  background: #ebeef0;\r\n  padding: 0.25rem 1rem 0.5rem 1rem;\r\n  border-radius: 1rem;\r\n`;","import React, { useRef, useState } from \"react\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport styled from 'styled-components';\r\nimport { useYuweets } from 'components_controll/ProvideYuweets';\r\nimport { Shared } from './CommonStyle';\r\nimport { useUser } from 'components_controll/ProvideAuth';\r\nimport { faTimesCircle } from '@fortawesome/free-regular-svg-icons';\r\nimport { DEFAULT_PHOTOURL } from 'constants.js';\r\nimport { DateRangeOutlined, GifOutlined, ImageOutlined, PollOutlined, SentimentSatisfiedAlt } from '@material-ui/icons';\r\nimport { memo } from 'react';\r\n\r\n// ====================== Child Component ============================\r\nfunction InputContainerDIV({textRef, attachmentRef}) {\r\n  // ------- text ---------\r\n  const [text, setText] = useState(\"\");\r\n  textRef.current = { text, setText };\r\n\r\n  const onChange = (event) => {\r\n    const {target:{value}} = event;\r\n    setText(value);\r\n  }\r\n\r\n  // --------- attachment ---------\r\n  const [attachment, setAttachment] = useState(\"\");\r\n  attachmentRef.current = { attachment, setAttachment };\r\n\r\n  // get file that user selected\r\n  const onChangeFile = (event) => {\r\n    const {target:{files}} = event;\r\n    const theFile = files[0]; // get one file\r\n\r\n    // create reader and start reading file\r\n    const reader = new FileReader();\r\n    // add event listener to reader\r\n    // it is triggered when reading is finished, and return finishedEvent\r\n    reader.onloadend = (finishedEvent) => {\r\n      const {currentTarget:{result}} = finishedEvent;\r\n      setAttachment(result); // save to attachment state\r\n      // onChange occurs when value of element has been changed\r\n      document.getElementById(\"attach_file\").value = null;\r\n    }\r\n    // get data after get finishedEvent\r\n    reader.readAsDataURL(theFile);\r\n  }\r\n\r\n  const onClearAttachment = () => {\r\n    // clear state\r\n    setAttachment(\"\");\r\n    // clear dom\r\n    document.getElementById(\"attach_file\").value = null;\r\n  }\r\n\r\n  // --------- submitBTN ---------\r\n  const {addYuweet} = useYuweets();\r\n\r\n  const onSubmitClick = async () => {\r\n    const {current: {text, setText}} = textRef;\r\n    const {current: {attachment, setAttachment}} = attachmentRef;\r\n\r\n    // sent text, attachment to addYuweet method\r\n    addYuweet(text, attachment);\r\n    // clear text, attachment state\r\n    setText(\"\");\r\n    setAttachment(\"\");\r\n  }\r\n\r\n  return (\r\n    <Shared.Container>\r\n      {/* ================= text ==================== */}\r\n      <Shared.InputTextArea\r\n        value={text} \r\n        onChange={onChange} \r\n        type=\"text\" \r\n        placeholder=\"What's on your mind?\" \r\n        maxLength={100} \r\n      />\r\n\r\n      {/* ================ attachment ================= */}\r\n      {attachment && (\r\n        <AttachmentContainer>\r\n          <AttachmentImg src={attachment}/>\r\n          <Clear onClick={onClearAttachment}>\r\n            <FontAwesomeIcon icon={faTimesCircle} size=\"2x\" />\r\n          </Clear>\r\n        </AttachmentContainer>\r\n      )}\r\n\r\n      <InputContainer_bottom>\r\n        <OtherAttachments>\r\n          <input \r\n            id=\"attach_file\" type=\"file\" accept=\"image/*\" \r\n            onChange={onChangeFile} style={{display:\"none\"}}\r\n          />\r\n\r\n          <HoverDIV>\r\n            <label htmlFor=\"attach_file\" style={{cursor: \"pointer\", height: \"24px\"}}>\r\n              <ImageOutlined />\r\n            </label>\r\n          </HoverDIV>\r\n          \r\n          <HoverDIV>\r\n            <GifOutlined />\r\n          </HoverDIV>\r\n\r\n          <HoverDIV>\r\n            <PollOutlined />\r\n          </HoverDIV>\r\n\r\n          <HoverDIV>\r\n            <SentimentSatisfiedAlt />\r\n          </HoverDIV>\r\n\r\n          <HoverDIV>\r\n            <DateRangeOutlined />\r\n          </HoverDIV>\r\n\r\n        </OtherAttachments>\r\n\r\n      {/* ================ submitBTN ================== */}\r\n        <YuweetBTN onClick={onSubmitClick}>Yuweet</YuweetBTN>\r\n      </InputContainer_bottom>\r\n\t\t</Shared.Container>\r\n  );\r\n}\r\n\r\n// ===================== Parent Component ================================\r\nexport default memo(function YuweetFactory() {\r\n  const textRef = useRef();\r\n  const attachmentRef = useRef();\r\n  const {userObj: {photoURL}} = useUser();\r\n  \r\n  return (\r\n    <YuweetFactoryContainer>\r\n      <div>\r\n        <CreatorImgMask>\r\n          <CreatorImg src={photoURL || DEFAULT_PHOTOURL}/>\r\n        </CreatorImgMask>\r\n      </div>\r\n     \r\n      <InputContainerDIV \r\n        textRef={textRef} \r\n        attachmentRef={attachmentRef} \r\n      />\r\n    </YuweetFactoryContainer>\r\n  );\r\n})\r\n\r\n//============== Styled Components ===============\r\nconst YuweetFactoryContainer = styled(Shared.Container)`\r\n  flex-direction: row;\r\n  padding: 1rem;\r\n  border-bottom: 1px solid #EBEEF0;\r\n`;\r\n\r\nconst CreatorImgMask = styled(Shared.ImageMask)`\r\n  width: 3rem;\r\n  height: 3rem;\r\n  margin-right: 0.7rem;\r\n`;\r\n\r\nconst CreatorImg = styled(Shared.ImgInMask)``;\r\n\r\nconst AttachmentContainer = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n\tposition: relative;\r\n`;\r\n\r\nconst AttachmentImg = styled.img`\r\n  width: 100%;\r\n  border-radius: 1rem;\r\n  margin-bottom: 1rem;\r\n`;\r\n\r\nconst Clear = styled.div`\r\n  background: #292B2C;\r\n  color: #dadbdc;\r\n  border-radius: 50%;\r\n  cursor: pointer;\r\n  text-align: center;\r\n  position: absolute;\r\n  top: 5px;\r\n  left: 5px;\r\n\r\n  &:hover {\r\n    color: white;\r\n  }\r\n`;\r\n\r\nconst InputContainer_bottom = styled.div`\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  border-top: 1px solid #EBEEF0;\r\n  padding: 1rem 0;\r\n  margin-top: 1rem;\r\n`;\r\n\r\nconst OtherAttachments = styled.div`\r\n  display: flex;\r\n  color: #1DA1F2;\r\n  cursor: pointer;\r\n`;\r\n\r\nconst HoverDIV = styled(Shared.HoverDIV)``;\r\n\r\nconst YuweetBTN = styled(Shared.BTNwithText)``;\r\n\r\n","import React from \"react\";\r\nimport Yuweet from \"components_view/Yuweet\";\r\nimport YuweetFactory from 'components_view/YuweetFactory';\r\nimport { Shared } from 'components_view/CommonStyle';\r\nimport { useYuweets } from 'components_controll/ProvideYuweets';\r\nimport styled from 'styled-components';\r\n\r\nexport default function Home() {\r\n\t// get yuweet list from ProvideYuweets\r\n\tconst {yuweets:{list}} = useYuweets();\r\n\r\n\treturn (\r\n\t\t<HomeContainer>\r\n\t\t\t<Shared.Header><span>Home</span></Shared.Header>\r\n\r\n\t\t\t<YuweetFactory/>\r\n\t\t\t<YuweetList>\r\n\t\t\t\t{list.map(({id, creatorRef, isOwner, text, attachmentUrl, email, comment, like}) => (\r\n\t\t\t\t\t<Yuweet \r\n\t\t\t\t\t\tkey={id} \r\n\t\t\t\t\t\tid={id}\r\n\t\t\t\t\t\tcreatorRef={creatorRef}\r\n\t\t\t\t\t\ttext={text}\r\n\t\t\t\t\t\tattachmentUrl={attachmentUrl}\r\n\t\t\t\t\t\temail={email}\r\n\t\t\t\t\t\tisOwner={isOwner}\r\n\t\t\t\t\t\tcomment={comment}\r\n\t\t\t\t\t\tlike={like}\r\n\t\t\t\t\t/> \r\n\t\t\t\t))}\r\n\t\t\t</YuweetList>\r\n\t\t</HomeContainer>\r\n\t);\r\n};\r\n\r\n//================= Styled Components ====================\r\nconst HomeContainer = styled(Shared.Container)`\r\n\talign-items: center;\r\n`;\r\n\r\nconst YuweetList = styled(Shared.Container)``;\r\n\r\n\r\n","import { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faTwitter, faGoogle, faGithub } from \"@fortawesome/free-brands-svg-icons\";\r\nimport styled from 'styled-components'\r\nimport { Shared } from 'components_view/CommonStyle';\r\nimport { useState } from 'react';\r\nimport { useUser } from 'components_controll/ProvideAuth';\r\n\r\nexport default function LogIn() {\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [isNewAccount, setIsNewAccount] = useState(true);\r\n  const [error, setError] = useState(\"\");\r\n  const {signUp, logIn} = useUser(); // get functions from ProvideAuth\r\n\r\n  // When Input of form has changed\r\n  const onChange = (event) => {\r\n    const {target: {name, value}} = event;\r\n    if(name === \"email\") {\r\n      setEmail(value);\r\n    }\r\n    else if(name === \"password\") {\r\n      setPassword(value);\r\n    }\r\n  };\r\n\r\n  const onSubmitClick = async (event) => {\r\n    try {\r\n      if(isNewAccount) {\r\n        // new user, create new account\r\n        await signUp(email, password);\r\n      }\r\n      else {\r\n        // old user, log in\r\n        await logIn(\"email\", email, password);\r\n      }\r\n    }\r\n    catch(error) {\r\n      // authService provides error message\r\n      setError(error.message);\r\n    }\r\n  };\r\n\r\n  // toggle account from new to exist.\r\n  const toggleAuth = () => setIsNewAccount(prev => !prev);\r\n\r\n  // get type of social login then pass it to logIn method\r\n  const onSocialClick = async (event) => {\r\n    const {target:{ name:type }} = event;\r\n    logIn(type);\r\n  };\r\n\r\n  return(\r\n    <AuthContainer>\r\n      <FontAwesomeIcon icon={faTwitter} color={\"#1DA1F2\"} size=\"3x\" style={{ margin:30 }} />\r\n      <AuthInput \r\n        type=\"email\" placeholder=\"Email\" \r\n        name=\"email\" required \r\n        value={email} onChange={onChange} \r\n      />\r\n      <AuthInput \r\n        type=\"password\" placeholder=\"Password\" \r\n        name=\"password\" required \r\n        value={password} onChange={onChange}\r\n      />\r\n      <AuthSubmit \r\n        type=\"submit\" onClick={onSubmitClick} \r\n        value={isNewAccount ? \"Create Account\" : \"Sign In\"} \r\n      />\r\n      {error && <AuthError>{error}</AuthError>}\r\n\r\n      {/* switch between log in, sign up */}\r\n      <AuthSwitch onClick={toggleAuth}>\r\n      {isNewAccount ? \"Sign In\" : \"Create Account\"}\r\n      </AuthSwitch>\r\n\r\n      {/* social login */}\r\n      <Buttons>\r\n        <Button onClick={onSocialClick} name=\"google\">\r\n          Log In with Google <FontAwesomeIcon icon={faGoogle} />\r\n        </Button>\r\n        <Button onClick={onSocialClick} name=\"github\">\r\n          Log In with Github <FontAwesomeIcon icon={faGithub} />\r\n        </Button>\r\n      </Buttons>\r\n    </AuthContainer>\r\n  );\r\n}\r\n\r\n\r\n//============= Styled Components =============\r\nconst AuthContainer = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n\r\n  justify-content: center;\r\n\talign-items: center;\r\n  width: 21rem;\r\n`;\r\n\r\nconst AuthInput = styled(Shared.InputText)`\r\n  margin-bottom: 10px;\r\n`;\r\n\r\nconst AuthSubmit = styled(AuthInput)`\r\n\ttext-align: center;\r\n  background: #1DA1F2;\r\n  color: white;\r\n  cursor: pointer;\r\n  font-weight: bold;\r\n`;\r\n\r\n\r\nconst AuthSwitch = styled.span`\r\n  color: #1DA1F2;\r\n  cursor: pointer;\r\n  margin-top: 10px;\r\n  margin-bottom: 50px;\r\n  display: block;\r\n  font-size: 12px;\r\n  font-weight: bold;\r\n  text-decoration: underline;\r\n`;\r\n\r\nconst AuthError = styled.span`\r\n \tcolor: tomato;\r\n  text-align: center;\r\n  font-weight: 500;\r\n  font-size: 12px;\r\n`;\r\n\r\nconst Buttons = styled.div`\r\n\tdisplay: flex;\r\n  justify-content: space-between;\r\n  width: 100%;\r\n  height: 40px;\r\n`;\r\n\r\nconst Button = styled(Shared.BTNwithText)`\r\n  color: #1DA1F2;\r\n  background: white;\r\n  border: 1px solid #1DA1F2;\r\n  padding: 10px 1rem;\r\n  font-size: 12px;\r\n`;","import { dbService } from './fbase';\r\nimport { useUser } from './ProvideAuth';\r\nimport {createContext, useEffect, useState, useContext} from \"react\";\r\n\r\nconst profileContext = createContext();\r\n\r\nexport default function ProvideProfile({children}) {\r\n  const [newBgPhotoURL, setNewBgPhotoURL] = useState(\"\");\r\n  const {userObj} = useUser();\r\n  // save and keep previous bg photo url\r\n  const [prevBgPhotoURL, setPrevBgPhotoURL] = useState(\"\");\r\n\r\n  const [bio, setBio] = useState(\"\");\r\n  const [location, setLocation] = useState(\"\");\r\n  const [website, setWebsite] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    if(!userObj) {\r\n      return;\r\n    }\r\n\r\n    dbService.doc(`users/${userObj.email}`).get().then(doc => {\r\n      const data = doc.data();\r\n      setNewBgPhotoURL(data.bgPhotoURL);\r\n      setPrevBgPhotoURL(data.bgPhotoURL);\r\n\r\n      // when db has bio, location, website info set the states\r\n      data.bio && setBio(data.bio);\r\n      data.location && setLocation(data.location);\r\n      data.website && setWebsite(data.website);\r\n    })\r\n  }, [userObj])\r\n\r\n\r\n  const contextValue = {newBgPhotoURL, setNewBgPhotoURL, prevBgPhotoURL, bio, setBio, location, setLocation, website, setWebsite};\r\n  return (\r\n    <profileContext.Provider value={contextValue}>\r\n      {children}\r\n    </profileContext.Provider>\r\n  );\r\n}\r\n\r\n\r\n//================= Hook ===================\r\n/** \r\n * @description\r\n * @return {{newBgPhotoURL: string, setNewBgPhotoURL: function, prevBgPhotoURL: string, bio:string, setBio:function, location:string, setLocation:function, website, setWebsite:function}}\r\n*/\r\nexport const useProfile = () => {\r\n  const profile = useContext(profileContext);\r\n  return profile;\r\n}","import { createContext, useContext, useState } from \"react\";\r\n\r\nconst modalContext = createContext();\r\n\r\nexport default function ProvideModal({children}) {\r\n  const [isModalOpen, setIsModalOpen] = useState(false);\r\n\r\n  const contextValue = {isModalOpen, setIsModalOpen};\r\n\r\n  return (\r\n    <modalContext.Provider value={contextValue}>\r\n      {children}\r\n    </modalContext.Provider>\r\n  );\r\n}\r\n\r\n//======== hook ==========\r\n/**\r\n * @description\r\n * @returns {{isModalOpen:boolean, setIsModalOpen:function}}\r\n */\r\n export const useModal = () => {\r\n  const modal = useContext(modalContext);\r\n  return modal;\r\n}","import React, { useEffect } from \"react\";\r\nimport styled from 'styled-components';\r\n\r\n\r\nexport default function Modal() {\r\n\r\n  useEffect(() => {\r\n    document.body.style.overflow = 'hidden';\r\n    return () => {\r\n      document.body.style.overflow = 'scroll';\r\n    }\r\n  }, []);\r\n\r\n  return (\r\n    <ModalDIV></ModalDIV>\r\n  );\r\n}\r\n\r\nconst ModalDIV = styled.div`\r\n\twidth: 100%;\r\n\theight: 100%;\r\n\tbackground: rgba(100, 100, 100, 0.3);\r\n\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n\r\n  z-index: 3;\r\n`;","import { Shared } from 'components_view/CommonStyle';\r\nimport React, { useRef, useState } from \"react\";\r\nimport { useHistory } from 'react-router-dom';\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { faUserCircle } from \"@fortawesome/free-solid-svg-icons\";\r\nimport styled from 'styled-components';\r\nimport { useUser } from 'components_controll/ProvideAuth';\r\nimport { storageService } from 'components_controll/fbase';\r\nimport { useProfile } from 'components_controll/ProvideProfile';\r\nimport { useModal } from 'components_controll/ProvideModal';\r\nimport Modal from 'components_view/Modal';\r\nimport { Close, Link, LocationOn, PhotoCameraOutlined } from '@material-ui/icons';\r\nimport { makeStyles, TextField } from '@material-ui/core';\r\nimport { config, useSpring } from '@react-spring/core';\r\nimport { animated } from '@react-spring/web';\r\n\r\n// ====================== Child Component ============================\r\nfunction ProfileSpan() {\r\n\tconst {userObj} = useUser();\r\n\r\n\treturn (\r\n\t\t<NavSpan>\r\n\t\t\t{userObj && userObj.displayName\r\n\t\t\t\t? userObj.displayName\r\n\t\t\t\t: \"My Profile\"\r\n\t\t\t}\r\n\t\t</NavSpan>\r\n\t);\r\n}\r\n\r\nfunction EditBTN() {\r\n\tconst {setIsModalOpen} = useModal();\r\n\r\n\tconst onEditClick = () => {\r\n\t\tsetIsModalOpen(true);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<EditButton onClick={onEditClick}>Edit profile</EditButton>\r\n\t);\r\n}\r\n\r\nfunction LogOutBTN() {\r\n\tconst {logOut} = useUser();\r\n\tconst history = useHistory(); \r\n\r\n\tconst onLogOutClick = async () => {\r\n\t\tawait logOut();\r\n\t\thistory.push(\"/\"); // react-router-dom specific redirection\r\n\t};\r\n\r\n\treturn (\r\n\t\t<LogOutBTNwithText onClick={onLogOutClick}>\r\n\t\t\tLog Out\r\n\t\t</LogOutBTNwithText>\r\n\t);\r\n\r\n}\r\n\r\n//=========== Editing components ========================\r\nfunction SaveBTN({bgPhotoRef, profilePhotoRef, nameRef, bioRef, locationRef, websiteRef, errorMessage}) {\r\n\tconst {editUserObj, userObj} = useUser();\r\n\tconst {setIsModalOpen} = useModal();\r\n\r\n\tconst onClickSave = async () => {\r\n\t\tlet newBgPhotoURL = bgPhotoRef.current;\r\n\t\tconst newPhotoURL = profilePhotoRef.current;\r\n\t\tconst newDisplayName = nameRef.current;\r\n\t\tconst newBio = bioRef.current;\r\n\t\tconst newLocation = locationRef.current;\r\n\t\tconst newWebsite = websiteRef.current;\r\n\r\n\t\tif(newDisplayName === \"\" || newDisplayName == null) {\r\n\t\t\treturn window.alert(\"Please input name.\");\r\n\t\t}\r\n\t\tif(errorMessage.length != 0) {\r\n\t\t\treturn window.alert(\"Check website again.\");\r\n\t\t}\r\n\r\n\t\t//=========== update bgPhoto ===========\r\n\t\t// newBgPhotoURL starts with \"d\" like data:image/jpeg......\r\n\t\tif(newBgPhotoURL && newBgPhotoURL.charAt(0) === \"d\") {\r\n\t\t\t//get ref\r\n\t\t\tconst bgPhotoStorageRef = storageService\r\n\t\t\t\t.ref()\r\n\t\t\t\t.child(`BackgroundPhoto/${userObj.email}`);\r\n\t\t\t\t\r\n\t\t\t// upload photo from local url to storage by using storage reference\r\n\t\t\tconst response = await bgPhotoStorageRef.putString(newBgPhotoURL, \"data_url\");\r\n\t\t\t// then get remote url from storage \r\n\t\t\tnewBgPhotoURL = await response.ref.getDownloadURL();\r\n\r\n\t\t\tconst bgData = {\r\n\t\t\t\t[\"bgPhotoURL\"] : newBgPhotoURL\r\n\t\t\t}\r\n\t\t\tuserObj.myRef.update(bgData);\r\n\t\t}\r\n\t\r\n\t\t// update displayName, profilePhoto \r\n\t\teditUserObj({displayName: newDisplayName, photoURL: newPhotoURL });\r\n\r\n\t\t// update bio, location, website\r\n\t\tconst otherInfoData = {\r\n\t\t\t[\"bio\"] : newBio,\r\n\t\t\t[\"location\"] : newLocation,\r\n\t\t\t[\"website\"]: newWebsite\r\n\t\t}\r\n\t\tuserObj.myRef.update(otherInfoData);\r\n\r\n\t\twindow.alert(\"Updated successfully\");\t\t\r\n\t\tsetIsModalOpen(false);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Shared.BTNwithText onClick={onClickSave}>Save</Shared.BTNwithText>\r\n\t);\r\n}\r\n\r\nfunction BGPhoto({reference}) {\r\n\tconst {newBgPhotoURL, setNewBgPhotoURL} = useProfile();\r\n\treference.current = newBgPhotoURL;\r\n\r\n\tconst onChangeFile = (event) => {\r\n\t\tconst {target: {files}} = event;\r\n\t\tconst theFile = files[0];\r\n\r\n\t\tconst reader = new FileReader();\r\n\t\treader.onloadend = (finishedEvent) => {\r\n\t\t\tconst {currentTarget:{result}} = finishedEvent;\r\n\t\t\tsetNewBgPhotoURL(result);\r\n\t\t};\r\n\t\treader.readAsDataURL(theFile);\r\n\t}\r\n\t\r\n\treturn (\r\n\t\t<div style={{position:\"relative\"}}>\r\n\t\t\t<BGContainer>\r\n\t\t\t\t<ShadowDIV>\r\n\t\t\t\t\t<HoverDIV style={{top: \"45%\", left:\"47%\"}}>\r\n\t\t\t\t\t\t<PhotoCameraOutlined style={{color: \"white\"}}/>\r\n\t\t\t\t\t</HoverDIV>\r\n\t\t\t\t</ShadowDIV>\r\n\r\n\t\t\t\t{newBgPhotoURL && (\r\n\t\t\t\t\t<BGImgMask>\r\n\t\t\t\t\t\t<BGImg src={newBgPhotoURL} />\r\n\t\t\t\t\t</BGImgMask>\r\n\t\t\t\t)}\r\n\t\t\t</BGContainer>\r\n\r\n\t\t\t<input \r\n\t\t\t\tid=\"bg_photo\"\r\n\t\t\t\ttype=\"file\" accept=\"image/*\"\r\n\t\t\t\tonChange={onChangeFile}\r\n\t\t\t\tstyle={{display:\"none\"}}\r\n\t\t\t/>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nfunction ProfilePhoto({reference}) {\r\n\tconst {userObj} = useUser();\r\n\r\n\t// edit local state before submit\r\n\tconst [newPhotoURL, setNewPhotoURL] = useState(userObj ? userObj.photoURL : \"\");\r\n\treference.current = newPhotoURL;   // deliever url\r\n\r\n\tconst onChangeFile = (event) => {\r\n\t\tconst {target:{files}} = event;\r\n\t\tconst theFile = files[0];\r\n\r\n\t\tconst reader = new FileReader();\r\n\t\treader.onloadend = (finishedEvent) => {\r\n\t\t\tconst {currentTarget:{result}} = finishedEvent;\r\n\t\t\tsetNewPhotoURL(result);\r\n\t\t};\r\n\t\treader.readAsDataURL(theFile);\r\n\t};\r\n\r\n\r\n\treturn(\r\n\t\t<ProfilePhotoContainer>\r\n\t\t\t<ProfileImgMask>\r\n\t\t\t\t{newPhotoURL ? (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t<ProfileImg src={newPhotoURL}/>\r\n\t\t\t\t\t\t<ShadowDIV>\r\n\t\t\t\t\t\t\t<HoverDIV>\r\n\t\t\t\t\t\t\t\t<PhotoCameraOutlined style={{color: \"white\"}}/>\r\n\t\t\t\t\t\t\t</HoverDIV>\r\n\t\t\t\t\t\t</ShadowDIV>\r\n\t\t\t\t\t</>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t<FontAwesomeIcon icon={faUserCircle} size=\"9x\" color=\"#C4CFD6\" \r\n\t\t\t\t\t\tstyle={{background: \"white\", border: \"2px solid white\", borderRadius: \"50%\", position: \"relative\", top:\"-3px\"}}/>\r\n\t\t\t\t\t\t<ShadowDIV>\r\n\t\t\t\t\t\t\t<HoverDIV>\r\n\t\t\t\t\t\t\t\t<PhotoCameraOutlined style={{color: \"white\"}}/>\r\n\t\t\t\t\t\t\t</HoverDIV>\r\n\t\t\t\t\t\t</ShadowDIV>\r\n\t\t\t\t\t</>\r\n\t\t\t\t)}\r\n\t\t\t</ProfileImgMask>\r\n\t\t\t\r\n\r\n\t\t\t<input \r\n\t\t\t\tid=\"profile_photo\"\r\n\t\t\t\ttype=\"file\"\taccept=\"image/*\"\r\n\t\t\t\tonChange={onChangeFile}\r\n\t\t\t\tstyle={{display:\"none\"}}\r\n\t\t\t/>\r\n\t\t</ProfilePhotoContainer>\r\n\t);\r\n}\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    '& > *': {\r\n      margin: '1rem 0',\r\n      width: '100%',\r\n    },\r\n  },\r\n}));\r\n\r\nfunction TextFields({nameRef, bioRef, locationRef, websiteRef, errorMessage, setErrorMessage}) {\r\n  const classes = useStyles();\r\n\tconst {userObj} = useUser();\r\n\t// edit local state before submit\r\n\tconst [newDisplayName, setNewDisplayName] = useState(userObj ? (userObj.displayName ? userObj.displayName : userObj.email.split(\"@\")[0]) : \"\");\r\n\tnameRef.current = newDisplayName;\r\n\r\n\tconst {bio, setBio, location, setLocation, website, setWebsite} = useProfile();\r\n\r\n\tbioRef.current = bio;\r\n\tlocationRef.current = location;\r\n\twebsiteRef.current = website;\r\n\r\n\tconst onChangeName = (event) => {\r\n\t\tconst {target: {value}} = event;\r\n\t\tsetNewDisplayName(value);\r\n\t};\r\n\r\n\tconst onChangeBio = (event) => {\r\n\t\tconst {target: {value}} = event;\r\n\t\tsetBio(value);\r\n\t};\r\n\r\n\tconst onChangeLocation = (event) => {\r\n\t\tconst {target: {value}} = event;\r\n\t\tsetLocation(value);\r\n\t};\r\n\r\n\tconst onChangeWebsite = (event) => {\r\n\t\tconst {target: {value}} = event;\r\n\t\tif(!value.startsWith('http')) {\r\n\t\t\tsetErrorMessage(\"Enter valid address\");\r\n\t\t}\r\n\t\telse {\r\n\t\t\tsetErrorMessage(\"\");\r\n\t\t}\r\n\t\tsetWebsite(value);\r\n\t};\r\n\r\n\r\n  return (\r\n    <form className={classes.root} noValidate autoComplete=\"off\" style={{width:\"95%\"}}>\r\n      <TextField id=\"outlined-basic\" label=\"Name\" variant=\"outlined\" \r\n\t\t\t\tonChange={onChangeName}\r\n\t\t\t\tvalue={newDisplayName}\r\n\t\t\t\t// maxLength={8}\r\n\t\t\t/>\r\n\t\t\t<TextField\r\n\t\t\t\tid=\"outlined-multiline-static\" label=\"Bio\" multiline rows={3} variant=\"outlined\"\r\n\t\t\t\tonChange={onChangeBio}\r\n\t\t\t\tvalue={bio}\r\n      />\r\n      <TextField id=\"outlined-basic\" label=\"Location\" variant=\"outlined\" \r\n\t\t\t\tonChange={onChangeLocation}\r\n\t\t\t\tvalue={location}\r\n\t\t\t/>\r\n\r\n\t\t\t<TextField id=\"outlined-basic\" label=\"Website\" variant=\"outlined\" \r\n\t\t\t\tonChange={onChangeWebsite}\r\n\t\t\t\tvalue={website}\r\n\t\t\t\tstyle={{marginBottom:\"0\"}}\r\n\t\t\t\terror={(errorMessage.length != 0) ? true : false}\r\n\t\t\t/>\r\n\t\t\t{errorMessage.length != 0 && <ErrorSpan>{errorMessage}</ErrorSpan>}\r\n    </form>\r\n  );\r\n}\r\n\r\nfunction EditContainer({bgPhotoRef, profilePhotoRef, nameRef, bioRef, locationRef, websiteRef}) {\r\n\tconst {setIsModalOpen} = useModal();\r\n\tconst [errorMessage, setErrorMessage] = useState(\"\");\r\n\r\n\tconst onCloseEditClick = () => {\r\n\t\tsetIsModalOpen(false);\r\n\t}\r\n\r\n\tconst props = useSpring({from:{scale:0}, to:{scale:1}, config:config.wobbly})\r\n\r\n\treturn (\r\n\t\t<EditDIV style={{transform:props.scale.to((scale) => `scale(${scale})`)}}>\r\n\t\t\t<EditHeader>\r\n\t\t\t\t<EditHeader_left>\r\n\t\t\t\t\t<CloseHoverDIV>\r\n\t\t\t\t\t\t<Close onClick={onCloseEditClick} style={{color:\"#1DA1F2\", cursor:\"pointer\"}} />\r\n\t\t\t\t\t</CloseHoverDIV>\r\n\t\t\t\t\tEdit profile\r\n\t\t\t\t</EditHeader_left>\r\n\t\t\t\t<SaveBTN bgPhotoRef={bgPhotoRef} profilePhotoRef={profilePhotoRef} nameRef={nameRef} bioRef={bioRef} locationRef={locationRef} websiteRef={websiteRef} errorMessage={errorMessage} />\r\n\t\t\t</EditHeader>\r\n\r\n\t\t\t<EditContent>\r\n\t\t\t\t<InputLabel htmlFor=\"bg_photo\">\r\n\t\t\t\t\t<BGPhoto reference={bgPhotoRef} />\r\n\t\t\t\t</InputLabel>\r\n\r\n\t\t\t\t<div style={{display: \"flex\", width: \"100%\"}}>\r\n\t\t\t\t\t<InputLabel htmlFor=\"profile_photo\" >\r\n\t\t\t\t\t\t<ProfilePhoto reference={profilePhotoRef}/>\r\n\t\t\t\t\t</InputLabel>\r\n\t\t\t\t</div>\r\n\t\t\t\t\r\n\t\t\t\t<TextFields nameRef={nameRef} bioRef={bioRef} locationRef={locationRef} websiteRef={websiteRef} errorMessage={errorMessage} setErrorMessage={setErrorMessage} />\r\n\t\t\t</EditContent>\r\n\t\t</EditDIV>\r\n\t);\r\n}\r\n\r\n// ===================== Parent Component ================================\r\nexport default function Profile() {\r\n\tconst bgPhotoRef = useRef();\r\n\tconst profilePhotoRef = useRef();\r\n\tconst nameRef = useRef();\r\n\tconst bioRef = useRef();\r\n\tconst locationRef = useRef();\r\n\tconst websiteRef = useRef();\r\n\r\n\tconst {userObj} = useUser();\r\n\tconst {isModalOpen} = useModal();\r\n\tconst {prevBgPhotoURL, bio, location, website} = useProfile();\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<ProfileContainer>\r\n\t\t\t\t<Shared.Header><ProfileSpan /></Shared.Header>\r\n\r\n\t\t\t\t<BGContainer>\r\n\t\t\t\t\t{prevBgPhotoURL && (\r\n\t\t\t\t\t\t<BGImgMask>\r\n\t\t\t\t\t\t\t<BGImg src={prevBgPhotoURL} />\r\n\t\t\t\t\t\t</BGImgMask>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</BGContainer>\r\n\r\n\t\t\t\t<ProfilePhotoContainer>\r\n\t\t\t\t\t<ProfileImgMask>\r\n\t\t\t\t\t\t{userObj && userObj.photoURL ? (\r\n\t\t\t\t\t\t\t<ProfileImg src={userObj.photoURL}/>\r\n\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t<FontAwesomeIcon icon={faUserCircle} size=\"9x\" color=\"#C4CFD6\" \r\n\t\t\t\t\t\t\t\tstyle={{background: \"white\", border: \"2px solid white\", borderRadius: \"50%\", position: \"relative\", top: \"-3px\"}}/>\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</ProfileImgMask>\r\n\t\t\t\t\t\r\n\t\t\t\t\t<EditBTN/>\r\n\t\t\t\t</ProfilePhotoContainer>\r\n\t\t\t\t\r\n\t\t\t\t<InfoContainer>\r\n\t\t\t\t\t{userObj && <NameSpan>{userObj.displayName ? userObj.displayName : userObj.email.split('@')[0]}</NameSpan>}\r\n\t\t\t\t\t{userObj && <GreySpan>@{userObj.email.split('@')[0]}</GreySpan>}\r\n\t\t\t\t\t<span style={{margin:\"1rem 0\"}}>{bio}</span>\r\n\r\n\t\t\t\t\t<div style={{display:\"flex\"}}>\r\n\t\t\t\t\t\t{website.startsWith('http') && (\r\n\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t<Link style={{color:\"grey\"}} />\r\n\t\t\t\t\t\t\t\t<WebsiteA href={website} target=\"_blank\">{website.split('//')[1]}</WebsiteA>\r\n\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t{location && (\r\n\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t<LocationOn style={{marginLeft:\"1rem\", color:\"grey\"}} />\r\n\t\t\t\t\t\t\t\t<GreySpan>{location}</GreySpan>\r\n\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</InfoContainer>\r\n\r\n\t\t\t\t<LogOutBTN />\r\n\t\t\t\t\r\n\t\t\t</ProfileContainer>\r\n\t\t\t{isModalOpen && (\r\n\t\t\t\t<>\r\n\t\t\t\t\t<Modal />\r\n\t\t\t\t\t<EditContainer bgPhotoRef={bgPhotoRef} profilePhotoRef={profilePhotoRef} nameRef={nameRef} bioRef={bioRef} locationRef={locationRef} websiteRef={websiteRef} />\r\n\t\t\t\t</>\r\n\t\t\t)}\r\n\t\t</>\r\n\t);\r\n};\r\n\r\n//============ Styled Components ============\r\nconst ProfileContainer = styled(Shared.Container)`\r\n\talign-items: center;\r\n`;\r\n\r\nconst InputLabel = styled.label`\r\n\tcursor: pointer;\r\n\tborder-radius: 50%;\r\n`;\r\n\r\nconst ErrorSpan = styled.span`\r\n\tcolor: tomato;\r\n\tfont-size: 14px;\r\n`;\r\n\r\n//---------- background ----------\r\nconst BGContainer = styled.div`\r\n\twidth: 600px;\r\n\theight: 12.5rem;\r\n\toverflow: hidden;\r\n\tbackground: #C4CFD6;\r\n\r\n`;\r\n\r\nconst BGImgMask = styled(Shared.ImageMask)`\r\n\twidth: 100%;\r\n\theight: auto; \r\n\tborder-radius: 0;\r\n`;\r\n\r\nconst BGImg = styled.img`\r\n\twidth: 100%;\r\n\theight: auto;\r\n`;\r\n\r\n//---------- profile ----------\r\nconst ProfilePhotoContainer = styled.div`\r\n\tdisplay: flex;\r\n\tjustify-content: space-between;\r\n\talign-items: center;\r\n\twidth: 100%;\r\n\theight: 5em;\r\n`;\r\n\r\nconst ProfileImgMask = styled(Shared.ImageMask)`\r\n\twidth: 9em;\r\n\theight: 9em;\r\n\tborder: 4px solid white; \r\n\tbackground: #C4CFD6;\r\n\r\n\tposition: relative;\r\n\ttop: -2rem;\r\n\tleft: 1rem;\r\n`;\r\n\r\nconst ProfileImg = styled(Shared.ImgInMask)``;\r\n\r\nconst ShadowDIV = styled.div`\r\n\tposition: absolute;\r\n\twidth: 100%;\r\n\theight: 100%;\r\n\tbackground: rgba(10,10,10,0.3);\r\n`;\r\n\r\nconst HoverDIV = styled(Shared.HoverDIV)`\r\n\tposition: absolute;\r\n\ttop: 37%;\r\n\tleft: 37%;\r\n\r\n\t&:hover {\r\n\t\tbackground: rgba(255,255,255,0.3);\r\n\t}\r\n`;\r\n\r\nconst NavSpan = styled.span`\r\n\tmargin-left: 1rem;\r\n\tfont-weight: bold;\r\n\tfont-size: 1.2rem;\r\n`;\r\n\r\nconst InfoContainer = styled(Shared.Container)`\r\n\tpadding: 1rem;\r\n\tmargin-bottom: 3rem;\r\n`;\r\n\r\nconst NameSpan = styled.span`\r\n\tfont-weight: 800;\r\n\tfont-size: 1.3rem;\r\n`;\r\n\r\nconst GreySpan = styled.span`\r\n\tcolor: grey;\r\n`;\r\n\r\nconst WebsiteA = styled.a`\r\n\tcolor: #1DA1F2;\r\n\tmargin-left: 3px;\r\n\r\n\t&:hover {\r\n\t\ttext-decoration: underline;\r\n\t}\r\n`;\r\n\r\nconst EditButton = styled(Shared.BTNwithText)`\r\n\tbackground: white;\r\n\tcolor: #1DA1F2;\r\n\tborder: 1px solid #1DA1F2;\r\n\tmargin-right: 1rem;\r\n`;\r\n\r\n//=========== isEditing ==========\r\nconst EditDIV = styled(animated.div)`\r\n\twidth: 38%;\r\n\theight: 90%;\r\n\tbackground: white;\r\n\tpadding-top: 4rem;\r\n\tz-index: 3;\r\n\tborder-radius: 1rem;\r\n\toverflow: hidden;\r\n\r\n\tposition: fixed;\r\n\ttop: 5%;\r\n  left: 30%;\r\n\t/* if used scale transform you have to wrtie below */\r\n\twill-change: transform;\r\n`;\r\n\r\nconst EditHeader = styled(Shared.Header)`\r\n\twidth: 100%;\r\n`;\r\n\r\nconst EditHeader_left = styled.div`\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n`;\r\n\r\nconst CloseHoverDIV = styled(Shared.HoverDIV)`\r\n\tposition: relative;\r\n\tleft: -8px;\r\n\tmargin-right: 1rem;\r\n`;\r\n\r\nconst EditContent = styled(Shared.Container)`\r\n\talign-items: center;\r\n\toverflow-x: hidden;\r\n\toverflow-y: scroll;\r\n\theight: 100%;\r\n\tpadding-bottom: 5rem;\r\n`;\r\n\r\nconst LogOutBTNwithText = styled(Shared.BTNwithText)`\r\n\tbackground-color: tomato;\r\n\twidth: 10rem;\r\n`;","import React, { useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { faTwitter } from \"@fortawesome/free-brands-svg-icons\";\r\nimport styled from 'styled-components';\r\nimport { AccountCircleOutlined, BookmarkBorderOutlined, HomeOutlined, MailOutlined, MoreHoriz, NotificationsOutlined, PersonAddOutlined, Subject } from '@material-ui/icons';\r\n\r\nexport default function Navigation() {\r\n  const [isActive, setIsActive] = useState(new Array(8).fill(false));\r\n\r\n  const switchActive = (index) => {\r\n    isActive.fill(false);\r\n    isActive[index] = true;\r\n    setIsActive([...isActive]);\r\n  }\r\n\r\n  return (\r\n    <Navbar>\r\n      <LinkBox to=\"/\">\r\n        <HoverDIV> \r\n          <FontAwesomeIcon icon={faTwitter} color={\"#1DA1F2\"} size=\"2x\" />\r\n        </HoverDIV>\r\n      </LinkBox>\r\n\r\n      <LinkBox to=\"/\" onClick={() => switchActive(0)}>\r\n        <HoverDIV isActive={isActive[0]}>\r\n          <div><HomeOutlined fontSize=\"large\" /></div>\r\n          <NavSpan>Home</NavSpan>\r\n        </HoverDIV>\r\n      </LinkBox>\r\n\r\n      <LinkBox to=\"/contact\" onClick={() =>switchActive(1)}>\r\n        <HoverDIV isActive={isActive[1]}>\r\n          <div style={{ display: \"flex\", alignItems: \"center\", width:\"35px\", height: \"35px\"}}>\r\n            <MailOutlined style={{ fontSize: 30, marginLeft: \"3px\"}} />\r\n          </div>\r\n          <NavSpan>Messages</NavSpan>\r\n        </HoverDIV>\r\n      </LinkBox>\r\n\r\n      <LinkBox to=\"/add_contact\" onClick={() =>switchActive(2)}>\r\n        <HoverDIV isActive={isActive[2]}>\r\n          <div><PersonAddOutlined fontSize=\"large\" /></div>\r\n          <NavSpan>Add Friends</NavSpan>\r\n        </HoverDIV>\r\n      </LinkBox>\r\n      \r\n      <LinkBox to=\"/profile\" onClick={() =>switchActive(3)}>\r\n        <HoverDIV isActive={isActive[3]}>\r\n          <div><AccountCircleOutlined fontSize=\"large\" /></div>\r\n          <NavSpan>Profile</NavSpan>\r\n        </HoverDIV>\r\n      </LinkBox>\r\n\r\n      <LinkBox to=\"/notification\" onClick={() =>switchActive(4)}>\r\n        <HoverDIV isActive={isActive[4]}>\r\n          <div><NotificationsOutlined fontSize=\"large\" /></div>\r\n          <NavSpan>Notifications</NavSpan>\r\n        </HoverDIV>\r\n      </LinkBox>\r\n\r\n      <LinkBox to=\"\" onClick={() =>switchActive(5)}>\r\n        <HoverDIV isActive={isActive[5]}>\r\n          <div><BookmarkBorderOutlined fontSize=\"large\" /></div>\r\n          <NavSpan>Bookmarks</NavSpan>\r\n        </HoverDIV>\r\n      </LinkBox>\r\n\r\n      <LinkBox to=\"\" onClick={() =>switchActive(6)}>\r\n        <HoverDIV isActive={isActive[6]}>\r\n          <div><Subject fontSize=\"large\" /></div>\r\n          <NavSpan>Lists</NavSpan>\r\n        </HoverDIV>\r\n      </LinkBox>\r\n\r\n      <LinkBox to=\"\" onClick={() =>switchActive(7)}>\r\n        <HoverDIV isActive={isActive[7]}>\r\n          <div><MoreHoriz fontSize=\"large\" /></div>\r\n          <NavSpan>More</NavSpan>\r\n        </HoverDIV>\r\n      </LinkBox>\r\n\r\n    </Navbar>\r\n  );\r\n}\r\n\r\n//=================== Styled Components ==================\r\nconst Navbar = styled.nav`\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: flex-start;\r\n  width: 16rem;\r\n  position: fixed;\r\n  z-index: 1;\r\n`;\r\n\r\nconst HoverDIV = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  padding: 0.5rem;\r\n  border-radius: 2rem;\r\n  color: ${props => props.isActive ? \"#1DA1F2\" : \"none\"};\r\n  transition: all 200ms ease-in-out;\r\n`;\r\n\r\nconst LinkBox = styled(Link)`\r\n  display: flex; \r\n  justify-content: flex-start;\r\n  align-items: center;\r\n  width: 100%;\r\n  padding: 0.3rem 1rem;\r\n\r\n  &:hover ${HoverDIV} {\r\n    background: #E8F5FE;\r\n    color: #1DA1F2;\r\n  }\r\n\r\n  &:hover ${HoverDIV} > div {\r\n    transform: rotate(-10deg);\r\n  }\r\n`;\r\n\r\nconst NavSpan = styled.span`\r\n  margin-left: 1rem;\r\n  font-weight: bold;\r\n  font-size: 1.2rem;\r\n  padding-right: 1.5rem;\r\n`;\r\n","import { CONTACT, SEARCH } from 'constants.js';\r\nimport { createContext, useContext, useEffect, useState } from 'react'\r\nimport { dbService } from './fbase';\r\nimport { useUser } from './ProvideAuth';\r\nimport { useContact } from './ProvideContact';\r\n\r\n// create context object\r\nconst AddContactContext = createContext();\r\n\r\n// =========================== Functions ===========================\r\n// handle change of state by using reference\r\nfunction onHandleReuqest(targetUID, targetRef, targetState, myUID, myRef, myState) {\r\n  // have to use dot notation for updating nested fields\r\n  // request sender\r\n  const sendRequestData = {\r\n    [`contact.${targetUID}`] : {\r\n      reference : targetRef,\r\n      state : myState\r\n    }\r\n  }\r\n  myRef.update(sendRequestData);\r\n\r\n  // request receiver\r\n  const receiveRequestData = {\r\n    [`contact.${myUID}`] : {\r\n      reference : myRef,\r\n      state : targetState\r\n    }\r\n  }\r\n  targetRef.update(receiveRequestData);\r\n}\r\n\r\n// add stateText, onClick to request object, according to state\r\nfunction mutateContactData(targetContactData, myUID, myRef, onClicked) {\r\n  const {uid:targetUID, reference:targetRef, state, ...rest} = targetContactData; // ..rest = displayName, photoURL\r\n  let mutatedData = {uid:targetUID, ...rest};\r\n\r\n  switch(state) {\r\n    case CONTACT.REQUESTING: \r\n      mutatedData.stateText = \"Sent\";\r\n      mutatedData.onClick = null;\r\n      break;\r\n\r\n    case CONTACT.ACCEPTING:\r\n      mutatedData.stateText = \"Accept\";\r\n      mutatedData.onClick = () => {\r\n        onHandleReuqest(targetUID, targetRef, CONTACT.FRIEND, myUID, myRef, CONTACT.FRIEND);\r\n        onClicked && onClicked(); \r\n      }\r\n      break;\r\n\r\n    default:\r\n      mutatedData.stateText = \"Add\";\r\n      mutatedData.onClick = () => {\r\n        onHandleReuqest(targetUID, targetRef, CONTACT.ACCEPTING, myUID, myRef, CONTACT.REQUESTING);\r\n        onClicked && onClicked();\r\n      }\r\n      break;\r\n  }\r\n  return mutatedData;\r\n}\r\n\r\n// ================= Parent Component ======================\r\nexport default function ProvideAddContact({children}) {\r\n  // searchResult == null means empty\r\n  const [searchResult, setSearchResult] = useState(SEARCH.NO_SEARCH);\r\n  const userCollection = dbService.collection(\"users\");\r\n  const {request} = useContact();  // object\r\n  const {userObj: {uid:myUID, myRef}} = useUser();\r\n  const [requestList, setRequestList] = useState([]); // array of mutated request \r\n\r\n  // get request list\r\n  useEffect(() => {\r\n    const requestArray = [];\r\n    // convert request object into list\r\n    for(const email in request) {\r\n      const targetContactData = request[email];\r\n      // add stateText, onClick\r\n      const mutatedResult = mutateContactData(targetContactData, myUID, myRef); \r\n      requestArray.push(mutatedResult);\r\n    }\r\n    setRequestList(requestArray);\r\n\r\n  }, [request])\r\n  \r\n  // =========== Add Contact Function ============\r\n  const searchUser = (email) => {\r\n    // default: no SearchResult\r\n    setSearchResult(SEARCH.SEARCHING);\r\n    // After btn clicked, clear SearchResult\r\n    const onClicked = () => setSearchResult(SEARCH.NO_SEARCH);\r\n\r\n    if (request[email]) {\r\n      // exist requesting contact\r\n      const targetContactData = request[email];\r\n      const mutatedResult = mutateContactData(targetContactData, myUID, myRef, onClicked); \r\n      setSearchResult(mutatedResult);\r\n    }\r\n    else {\r\n      // completely new contact\r\n      const targetRef = userCollection.doc(email);\r\n\r\n      targetRef.get().then((doc) => {\r\n        if (doc.exists) {\r\n          const {uid, displayName, photoURL} = doc.data();\r\n          const targetContactData = {\r\n            uid, \r\n            displayName,\r\n            photoURL,\r\n            state: null,\r\n            reference: targetRef\r\n          };\r\n          \r\n          const mutatedResult = mutateContactData(targetContactData, myUID, myRef, onClicked);\r\n          setSearchResult(mutatedResult);\r\n        }\r\n        else {\r\n          // can't find SearchResult\r\n          setSearchResult(SEARCH.NO_RESULT);\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        console.log(\"Error getting document:\", error);\r\n        setSearchResult(SEARCH.NO_RESULT);\r\n      });\r\n    }\r\n  }\r\n \r\n  // =================== context value  =======================\r\n  const contextValue = {searchUser, searchResult, requestList}\r\n\r\n  return (\r\n    <AddContactContext.Provider value={contextValue}>\r\n      {children}\r\n    </AddContactContext.Provider>\r\n  );\r\n}\r\n\r\n// ================== create context hook ===================\r\n/**\r\n * @description\r\n * @returns {{searchUser: function, searchResult: object, requestList: array}}\r\n */\r\nexport const useAddContact = () => {\r\n  const addContact = useContext(AddContactContext);\r\n  if(addContact === undefined) {\r\n    console.warn(\"error\");\r\n  }\r\n  return addContact;\r\n}","import React, { useRef, useState } from 'react';\r\nimport { Shared } from 'components_view/CommonStyle';\r\nimport styled from 'styled-components';\r\nimport ProvideAddContact, { useAddContact } from 'components_controll/ProvideAddContact';\r\nimport ContactSlot from 'components_view/ContactSlot';\r\nimport { SEARCH } from 'constants.js';\r\nimport Button from '@material-ui/core/Button';\r\n\r\n// ================ Children Component ==================\r\nfunction Text({reference}) {\r\n  const [text, setText] = useState(\"\");\r\n  reference.current = {text, setText};\r\n\r\n  const onChange = (event) => {\r\n    const {target: {value}} = event;\r\n    setText(value);\r\n  }\r\n\r\n  return (\r\n    <Input value={text} type=\"text\"\r\n    onChange={onChange} maxLength={20}\r\n    placeholder=\"Enter Friend's email\" />\r\n  );\r\n}\r\n\r\nfunction SubmitBTN({textRef}) {\r\n  const {searchUser} = useAddContact();\r\n\r\n  const onSubmitClick = async () => {\r\n    const {current:{text, setText}} = textRef;\r\n\r\n    if(text === \"\" || text == null) {\r\n\t\t\treturn window.alert(\"Please input email.\");\r\n    }\r\n    setText(\"\")\r\n    searchUser(text);\r\n  }\r\n\r\n  return(\r\n    <Arrow type=\"submit\" onClick={onSubmitClick} value=\"&rarr;\" />\r\n  );\r\n}\r\n\r\n// inheritance of ContactSlot\r\nfunction AddContactSlot({stateText, onClick, ...props}) {\r\n\r\n  return(\r\n    <ContactSlot {...props} >\r\n      {onClick ? (\r\n        <Button variant=\"contained\" color=\"secondary\" onClick={onClick} style={{marginRight: 10}}>{stateText}</Button>\r\n      ) : (\r\n        <span style={{marginRight: 40}}>{stateText}</span>\r\n      )}\r\n    </ContactSlot>\r\n  );\r\n}\r\n\r\nfunction InputFormContainer({textRef}) {\r\n  const onSubmitChat = (e) => {\r\n    e.preventDefault();\r\n  }\r\n\r\n  return (\r\n    <InputForm style={{width: \"23rem\", marginTop: \"1rem\"}} onSubmit={onSubmitChat}>\r\n      <Text reference={textRef}/>\r\n      <SubmitBTN textRef={textRef}/>\r\n    </InputForm>\r\n  );\r\n}\r\n\r\nfunction SearchResult() {\r\n  const {searchResult} = useAddContact();\r\n  \r\n  return (\r\n    <>\r\n      {(searchResult === SEARCH.NO_RESULT) && (<span> &#128546; There's no matched email user</span>)}\r\n      {(searchResult === SEARCH.SEARCHING) && (<span>searching...</span>)}\r\n      {(typeof searchResult == 'object') && (<AddContactSlot {...searchResult}/>)}\r\n    </>\r\n  );\r\n}\r\n\r\nfunction Request() {\r\n  const {requestList} = useAddContact();\r\n\r\n  return (\r\n    <RequestContainer>\r\n        {requestList.map(({uid, ...rest}) => (\r\n          <AddContactSlot key={uid} {...rest} />\r\n        ))}\r\n    </RequestContainer>\r\n  );\r\n}\r\n\r\n// ==================== Parent Component ====================\r\nexport default function AddContact() {\r\n  \r\n  const textRef = useRef();\r\n\r\n  return (\r\n    <ProvideAddContact>\r\n      <AddContactContainer>\r\n        <Shared.Header><span>Add Friends</span></Shared.Header>\r\n        <InputFormContainer textRef={textRef}/>\r\n        <SearchResult />\r\n        <Request />\r\n\r\n      </AddContactContainer>\r\n    </ProvideAddContact>\r\n  );\r\n}\r\n\r\n//============== Styled Components ===============\r\nconst AddContactContainer = styled(Shared.Container)`\r\n\talign-items: center;\r\n`;\r\n\r\nconst InputForm = styled(Shared.InputForm)``;\r\n\r\nconst Input = styled(Shared.InputText)``;\r\n\r\nconst Arrow = styled(Shared.Arrow)`\r\n  margin-right: 8rem;\r\n`;\r\n\r\nconst RequestContainer = styled(Shared.Container)`\r\n  align-items: center;\r\n  margin-top: 2rem;\r\n`;\r\n\r\n\r\n","import { faChevronLeft, faEllipsisV } from '@fortawesome/free-solid-svg-icons';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { config, useSpring } from '@react-spring/core';\r\nimport { animated } from '@react-spring/web';\r\nimport { useChat } from 'components_controll/ProvideChat';\r\nimport { DEFAULT_PHOTOURL } from 'constants.js';\r\nimport { useRef, useState } from 'react';\r\nimport styled from 'styled-components';\r\nimport { Shared } from './CommonStyle';\r\n\r\n// ====================== Child Component ============================\r\nfunction TextInput({reference}) {\r\n  const [text, setText] = useState(\"\");\r\n  reference.current = {text, setText};\r\n\r\n  const onChange = (e) => {\r\n    const {target:{value}} = e;\r\n    setText(value);\r\n  }\r\n\r\n  return(\r\n    <Input \r\n      value={text}\r\n      type=\"text\"\r\n      autoFocus\r\n      placeholder=\"Write Message\"\r\n      onChange={onChange}\r\n    />\r\n  );\r\n}\r\n\r\nfunction SubmitBTN({textRef}) {\r\n  const {pushChat} = useChat();\r\n\r\n  const onSubmitClick = async () => {\r\n\t\tconst {current: {text, setText}} = textRef;\r\n\r\n    pushChat(text);\r\n    setText(\"\");\r\n  }\r\n\r\n  return(\r\n    <Arrow type=\"submit\" value=\"&rarr;\" onClick={onSubmitClick} />\r\n  );\r\n}\r\n\r\nfunction InputFormContainer({textRef}) {\r\n  const onSubmitChat = (e) => {\r\n    e.preventDefault();\r\n  }\r\n\r\n  return (\r\n    <InputForm onSubmit={onSubmitChat}>\r\n      <TextInput reference={textRef}/>\r\n      <SubmitBTN textRef={textRef}/>\r\n    </InputForm>\r\n  );\r\n}\r\n\r\n// ====================== Parend Component ============================\r\nexport default function ChatBox() {\r\n  const textRef = useRef();\r\n  const {chatterObj: {id, photoURL, displayName}, setIsChatting, localChats} = useChat();\r\n  let chatArray = [];\r\n\r\n  if(localChats && localChats[id]) {\r\n    chatArray = localChats[id];\r\n  }\r\n\r\n  const onCloseClick = () => {\r\n    setIsChatting(false);\r\n  }\r\n\r\n  // spring animation\r\n  const props = useSpring({from:{bottom:-15}, to:{bottom:3}, config:config.stiff});\r\n\r\n  return(\r\n    <ChatBoxContainer style={{bottom:props.bottom.to((value) => `${value}rem`)}}>\r\n      <ChatHeader>\r\n        <CloseAction onClick={onCloseClick}>\r\n          <FontAwesomeIcon icon={faChevronLeft} color={\"#1DA1F2\"} size=\"2x\" />\r\n        </CloseAction>\r\n        <ChatterName>{displayName}</ChatterName>\r\n        <SettingAction>\r\n          <FontAwesomeIcon icon={faEllipsisV} color={\"lightGrey\"} size=\"lg\"/>\r\n        </SettingAction>\r\n      </ChatHeader>\r\n\r\n      <ChatContainer>\r\n        {chatArray.length !== 0 && chatArray.map(({chats, state}, id) => \r\n          (\r\n            state === 0 ? (\r\n              <MyChat key={id}>\r\n                <MyChatBox>\r\n                  <ChatText>{chats}</ChatText>\r\n                </MyChatBox>\r\n              </MyChat>\r\n            ) : (\r\n              <ChatterChat key={id}>\r\n                <ChatterPhoto src={photoURL || DEFAULT_PHOTOURL}/>\r\n                <ChatterChatBox>\r\n                  <ChatText style={{color: \"black\"}}>{chats}</ChatText>\r\n                </ChatterChatBox>\r\n              </ChatterChat>\r\n            )\r\n          )\r\n        )}\r\n      </ChatContainer>\r\n\r\n      <InputFormContainer textRef={textRef} />\r\n\r\n    </ChatBoxContainer>\r\n  );\r\n}\r\n\r\n//================= Styled Components ====================\r\nconst ChatBoxContainer = styled(animated.div)`\r\n  background-color: white;\r\n  width: 21rem;\r\n  height: 36rem;\r\n  position: fixed;\r\n  bottom: 1rem;\r\n  right: 8rem;\r\n  border-radius: 1rem;\r\n  z-index: 2;\r\n\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: space-between;\r\n  box-shadow: 0 12px 28px 0 rgba(0, 0, 0, 0.2), 0 2px 4px 0 rgba(0, 0, 0, 0.1), inset 0 0 0 1px rgba(255, 255, 255, 0.5);\r\n`;\r\n\r\nconst ChatHeader = styled.div`\r\n  width: 100%;\r\n  flex: 1;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  padding: 0 1rem;\r\n  border-radius: 1rem 1rem 0 0;\r\n  box-shadow: 0 4px 6px rgba(50, 50, 93, 0.11), 0 1px 3px rgba(0, 0, 0, 0.08);\r\n`;\r\n\r\nconst CloseAction = styled.span`\r\n  cursor: pointer;\r\n`;\r\n\r\nconst ChatterName = styled.span`\r\n  color: black; \r\n  font-weight: bold;\r\n  font-size: 1rem;\r\n`;\r\n\r\nconst SettingAction = styled.span`\r\n  cursor: pointer;\r\n`;\r\n\r\nconst MyChat = styled.div`\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  margin-bottom: 1rem;\r\n  position: relative;\r\n`;\r\n\r\nconst ChatterChat = styled.div`\r\n  display: flex;\r\n  align-items: flex-start;\r\n  margin-bottom: 1rem;\r\n  \r\n  position: relative;\r\n`;\r\n\r\nconst ChatterPhoto = styled.img`\r\n  width: 30px;\r\n  height: 30px;\r\n  margin-right: 0.8rem;\r\n  border-radius: 15px;\r\n`;\r\n\r\nconst ChatContainer = styled(Shared.Container)`\r\n  max-width: 100%;\r\n  flex: 9;\r\n\toverflow-x: hidden;\r\n  padding: 1rem 1.5rem 1rem 1rem;\r\n`;\r\n\r\nconst MyChatBox = styled.div`\r\n  background: #1DA1F2;\r\n  border-radius: 0.5rem;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  max-width: 70%;\r\n\r\n  &:before {\r\n    content: \"\";\r\n    position: absolute;\r\n    top: 0.5rem;\r\n    left: 100%;\r\n    border-top: 3.5px solid transparent;\r\n    border-left: 7px solid #1DA1F2;\r\n    border-bottom: 3.5px solid transparent;\r\n  } \r\n`;\r\n\r\n\r\nconst ChatterChatBox = styled.div`\r\n  background: lightgrey;\r\n  border-radius: 0.5rem;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n\r\n  max-width: 70%;\r\n\r\n  &:before {\r\n    content: \"\";\r\n    position: absolute;\r\n    top: 0.5rem;\r\n    left: 2.3rem;\r\n    border-top: 3.5px solid transparent;\r\n    border-right: 7px solid lightgrey;\r\n    border-bottom: 3.5px solid transparent;\r\n  } \r\n`;\r\n\r\nconst ChatText = styled.span`\r\n  /* display: block; */\r\n  /* box-sizing: padding-box; */\r\n  /* overflow: hidden; */\r\n  padding: 0.5rem;\r\n`;\r\n\r\n\r\nconst InputForm = styled(Shared.InputForm)``;\r\n\r\nconst Input = styled(Shared.InputText)``;\r\n\r\nconst Arrow = styled(Shared.Arrow)`\r\n  margin-right: 1rem;\r\n`;\r\n\r\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAATCAYAAAByUDbMAAABgWlDQ1BzUkdCIElFQzYxOTY2LTIuMQAAKJF1kc8rRFEUxz/mR8RoFAvKYhJWQ37UxMZi5FdhMTPKr82b570ZNT9e771JslW2ihIbvxb8BWyVtVJESnbKmtig5zyjRjL3ds/53O8953TvueBJZNSs5euCbM42YyPR0PTMbKjyER9NeMX6FdUyJuLDCcqOtxsqXH/V4dYqH/fvqFnQLBUqqoQHVMO0hUeFx5dsw+VN4QY1rSwIHwuHTbmg8LWrJ4v85HKqyB8um4nYIHjqhEOpX5z8xWrazArLy2nNZgrqz33clwS03FRcfIusZixijBAlxBhDDBKhm36xETrooVN2lMnv+s6fJC+5qliDZUwWSZHGJixqQapr4nXRNZkZlt3+/+2rpff2FKsHouB/cJyXNqjcgM91x3nfd5zPA/Dew1mulJ/fg75X0ddLWusuBFfh5LykJbfgdA0a7wzFVL4lryyPrsPzEdTOQP0lVM8Ve/ZzzuEtJFbkqy5gewfaJT44/wXsNGeuPCWHwQAAAAlwSFlzAAAuIwAALiMBeKU/dgAAAc5JREFUOI2VlL9LW1EUxz/vR374Eh4FyaAQrB3bTmlpC1mFYgVd3R5YEBcdFbWLQvMHxKlDBgeXLgUHp+BSIgpVCu1UBIc3KKhDLT6TJmkc7r32PXPzmn63e865X86P7zkGMchvXo0BC0ARqAFl33OrveINDUEOCIBHwAEwEHIHwEvgBHB8zz3XkuU3rwaBEvAWsIAmkNAkoOxtoAKs+J57CWCHgkrAbOitIwrbLRnfAebuMpOlncqA/0ULGPY999yUhpt+iayuLmMjeokiG0X0IhZvRmy+TWdJmBFzU/7HkOPfJjq1LgymDaqTGb5etJnZvaETdQfAlInQUSwRwNqLNEkTlvfr94kAHGDeRAgygoxt8Cxn3enmdd5m8qHN+pcGZ4GGSqBoIpQdwVDG4NO4w+rzFA9SBqVXaT6ftvh4HNvWmgmUkdNQOP75h/eHDWYfJ9mZcHASsLjX0JWnEAAbSmdPgSPuCXXuSZKlQop3B3W2fvTMqgkUfM/9rsiywC9dZNKC3+246gDI+p57rRQzgNi1LvRB1EJMU4hWbn/ln9/0qKjrEdbyCvAhlGGvJil7S8avKkfcPRtF3DMn5O7vnukgV22ev5d2I+7S3gL6soOyOW+zuQAAAABJRU5ErkJggg==\"","import styled from 'styled-components';\r\nimport React, { useState } from \"react\";\r\nimport { Shared } from './CommonStyle';\r\nimport verified from '../image/verified.png';\r\nimport { Search } from '@material-ui/icons';\r\n\r\nfunction SearchHeaderContainer() {\r\n  const [searchText, setSearchText] = useState(\"\");\r\n\r\n  const onSubmitSearch = (event) => {\r\n    event.preventDefault();\r\n    window.open(`https://www.google.com/search?q=${searchText}`);\r\n    setSearchText(\"\");\r\n  }\r\n\r\n  const onChangeSearch = (event) => {\r\n    setSearchText(event.target.value);\r\n  }\r\n\r\n  return (\r\n    <SearchHeader>\r\n      <SearchHeaderForm  onSubmit={onSubmitSearch}>\r\n        <Search />\r\n        <input \r\n          placeholder=\"Search Google\"\r\n          value={searchText}\r\n          onChange={onChangeSearch}\r\n          required\r\n          style={{marginLeft: \"1rem\"}}\r\n        />\r\n      </SearchHeaderForm>\r\n    </SearchHeader>\r\n  );\r\n}\r\n\r\nfunction ShowMore() {\r\n  return(\r\n    <ShowMoreContent>\r\n      <span style={{color:\"#1DA1F2\", fontSize:\"15px\"}}>Show more</span>\r\n    </ShowMoreContent>\r\n  );\r\n}\r\n\r\nexport default function RightAside() {\r\n  return (\r\n    <RightAsideContainer>\r\n\r\n      <SearchHeaderContainer />\r\n\r\n      <ContentBox>\r\n        <ContentHeader>What's Happening</ContentHeader>\r\n        <Content>\r\n          <div>\r\n            <SmallText>COVID-19  LIVE</SmallText>\r\n            <Title>COVID-19: News and updates for California</Title>\r\n          </div>\r\n\r\n          <div>\r\n            <NewsMask>\r\n              <img src=\"https://pbs.twimg.com/semantic_core_img/1338525361693368320/g6ZLOAcn?format=jpg&name=240x240\"/>\r\n            </NewsMask>\r\n          </div>\r\n        </Content>\r\n\r\n        <Content>\r\n          <div>\r\n            <SmallText>Pop  Trending</SmallText>\r\n            <Title>Rihanna</Title>\r\n            <MiddleText>Rihanna fans are loving new photos shared by the singer</MiddleText>\r\n            <SmallText>115K Yuweets</SmallText>\r\n          </div>\r\n          <div>\r\n            <NewsMask>\r\n              <img src=\"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS1DfSxkKXv_IeNZe4PeIzFM46ZMVjCh_FjWQ&usqp=CAU\"/>\r\n            </NewsMask>\r\n          </div>\r\n        </Content>\r\n\r\n        <Content>\r\n          <div>\r\n            <SmallText>World news  LIVE</SmallText>\r\n            <Title>Death toll climbs as violence between Israeli forces and Hamas escalates</Title>\r\n            <SmallText>Trending with <A>Palestine</A>, <A>Netanyahu</A></SmallText>\r\n          </div>\r\n          <div>\r\n            <NewsMask>\r\n              <img src=\"https://pbs.twimg.com/semantic_core_img/1391670316003254272/QuAohtuT?format=jpg&name=120x120\"/>\r\n            </NewsMask>\r\n          </div>\r\n        </Content>\r\n        <ShowMore />\r\n      </ContentBox>\r\n\r\n      <ContentBox>\r\n        <ContentHeader>Who to follow</ContentHeader>\r\n        <Content>\r\n          <AccountContent>\r\n            <WhoMask>\r\n              <img src=\"https://pbs.twimg.com/profile_images/1387421728251408385/gVcCautU_400x400.jpg\"/>\r\n            </WhoMask>\r\n            <div>\r\n              <AccountName>\r\n                <Title>BTS_official</Title>\r\n                <img src={verified} width=\"100%\" height=\"100%\" style={{marginLeft:\"3px\"}} />\r\n              </AccountName>\r\n\r\n              <SmallText>@bts_bighit</SmallText>\r\n            </div>\r\n          </AccountContent>\r\n          <FollowBox>\r\n            <FollowBTN>Follow</FollowBTN>\r\n          </FollowBox>\r\n        </Content>\r\n        \r\n        <Content>\r\n          <AccountContent>\r\n            <WhoMask>\r\n              <img src=\"https://events.recode.net/wp-content/uploads/2016/05/elon-musk-square.jpg?quality=80&strip=info\"/>\r\n            </WhoMask>\r\n            <AccountInfo>\r\n              <AccountName>\r\n                <Title>Elon Musk</Title>\r\n                <img src={verified} width=\"18px\" height=\"18px\" style={{marginLeft:\"3px\"}} />\r\n              </AccountName>\r\n\r\n              <SmallText>@elonmusk</SmallText>\r\n            </AccountInfo>\r\n          </AccountContent>\r\n          <FollowBox>\r\n            <FollowBTN>Follow</FollowBTN>\r\n          </FollowBox>\r\n        </Content>\r\n\r\n        <Content>\r\n          <AccountContent>\r\n            <WhoMask>\r\n              <img src=\"https://pbs.twimg.com/profile_images/1262824892535373825/BiXDFDDp_400x400.jpg\"/>\r\n            </WhoMask>\r\n            <AccountInfo>\r\n              <AccountName>\r\n                <Title>Node.js</Title>\r\n                <img src={verified} width=\"18px\" height=\"18px\" style={{marginLeft:\"3px\"}} />\r\n              </AccountName>\r\n\r\n              <SmallText>@nodejs</SmallText>\r\n            </AccountInfo>\r\n          </AccountContent>\r\n          <FollowBox>\r\n            <FollowBTN>Follow</FollowBTN>\r\n          </FollowBox>\r\n        </Content>\r\n\r\n        <ShowMore />\r\n      </ContentBox>\r\n\r\n\r\n    </RightAsideContainer>\r\n  );\r\n}\r\n\r\n\r\n//=================== Styled Components ==================\r\nconst RightAsideContainer = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  width: 25rem;\r\n  padding-top: 57px;\r\n`;\r\n\r\nconst SearchHeader = styled(Shared.Header)`\r\n  display: flex;\r\n  align-items: center;  \r\n  width: 25rem;\r\n  padding: 1.5rem;\r\n  font-weight: 300;\r\n  font-size: medium;\r\n`;\r\n\r\nconst SearchHeaderForm = styled(Shared.InputForm)`\r\n  border-radius: 20px;\r\n  background: #EBEEF0; \r\n  color: #5B7083;\r\n`;\r\n\r\nconst ContentBox = styled.div`\r\n  background: #F7F9FA;\r\n  width: 22rem;\r\n  margin: 1rem;\r\n  border-radius: 1rem;\r\n`;\r\n\r\nconst ContentHeader = styled.p`\r\n  padding: 1rem;\r\n  border-bottom: 1px solid #EBEEF0;\r\n  font-size: 20px;\r\n  font-weight: 800;\r\n`;\r\n\r\nconst Content = styled.div`\r\n  display: flex;\r\n  width: 100%;\r\n  padding: 1rem;\r\n  cursor: pointer;\r\n  border-bottom: 1px solid #EBEEF0;\r\n  transition: all 200ms ease-in-out;\r\n\r\n  &:hover {\r\n    background: #EFF1F2;\r\n  }\r\n`;\r\n\r\nconst ShowMoreContent = styled(Content)`\r\n  border: none;\r\n\r\n  &:hover {\r\n    border-radius: 0 0 1rem 1rem;\r\n  }\r\n`;\r\n\r\nconst SmallText = styled.p`\r\n  font-size: 13px;\r\n  color: rgb(91, 112, 131);\r\n  font-weight: 400;\r\n`;\r\n\r\nconst A = styled.span`\r\n  color: #1DA1F2;\r\n\r\n  &:hover {\r\n    text-decoration: 1px #1DA1F2 underline;\r\n  }\r\n`;\r\n\r\nconst MiddleText = styled.p`\r\n  font-size: 15px;\r\n  color: rgb(91, 112, 131);\r\n  font-weight: 400;\r\n`;\r\n\r\nconst Title = styled.p`\r\n  font-weight: 700;\r\n  font-size: 15px;\r\n  margin: 0.2rem 0;\r\n`;\r\n\r\nconst NewsMask = styled(Shared.ImageMask)`\r\n  border-radius: 15%;\r\n  background: lightgrey;\r\n  margin-right: 0;\r\n`;\r\n\r\nconst WhoMask = styled(Shared.ImageMask)`\r\n  border-radius: 50%;\r\n  width: 3rem;\r\n  height: 3rem;\r\n`;\r\n\r\n//====================\r\nconst AccountContent = styled.div`\r\n  display: flex;\r\n  flex: 1;\r\n`;\r\n\r\nconst FollowBox = styled.div`\r\n  align-items: center;\r\n`;\r\n\r\nconst FollowBTN = styled(Shared.BTNwithText)`\r\n  color: #1DA1F2;\r\n  background-color: white;\r\n  border: 1px solid #1DA1F2;\r\n\r\n  &:hover {\r\n    background: #E8F5FE;\r\n  }\r\n`;\r\n\r\nconst AccountInfo = styled.div`\r\n  flex: 1;\r\n`;\r\n\r\nconst AccountName = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  width: 100%;\r\n`;","import { AppBar, Box, makeStyles, Tab, Tabs, Typography, useTheme } from '@material-ui/core';\r\nimport { Shared } from 'components_view/CommonStyle';\r\nimport React from \"react\";\r\nimport styled from 'styled-components';\r\nimport PropTypes from 'prop-types';\r\nimport { MoreHoriz } from '@material-ui/icons';\r\n\r\nfunction TabPanel(props) {\r\n  const { children, value, index, ...other } = props;\r\n\r\n  return (\r\n    <div\r\n      role=\"tabpanel\"\r\n      hidden={value !== index}\r\n      id={`full-width-tabpanel-${index}`}\r\n      aria-labelledby={`full-width-tab-${index}`}\r\n      {...other}\r\n    >\r\n      {value === index && (\r\n        <Box p={3} style={{padding: \"0\"}}>  \r\n          {/* write component={'span'} to prevent [Wanring]<div> cannot appear as a descendant of <p>*/}\r\n          <Typography component={'span'}>{children}</Typography>\r\n        </Box>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nTabPanel.propTypes = {\r\n  children: PropTypes.node,\r\n  index: PropTypes.any.isRequired,\r\n  value: PropTypes.any.isRequired,\r\n};\r\n\r\nfunction a11yProps(index) {\r\n  return {\r\n    id: `full-width-tab-${index}`,\r\n    'aria-controls': `full-width-tabpanel-${index}`,\r\n  };\r\n}\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    backgroundColor: theme.palette.background.paper,\r\n    width: \"100%\",\r\n  },\r\n}));\r\n\r\nfunction FullWidthTabs() {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n  const [value, setValue] = React.useState(0);\r\n\r\n  const handleChange = (event, newValue) => {\r\n    setValue(newValue);\r\n  };\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      {/* color = \"inherit\" to prevent [Error]Invalid prop `color` of value */}\r\n      <AppBar position=\"static\" color=\"inherit\" style={{boxShadow:\"none\"}}>\r\n        <Tabs\r\n          value={value}\r\n          onChange={handleChange}\r\n          indicatorColor=\"primary\"\r\n          textColor=\"primary\"\r\n          variant=\"fullWidth\"\r\n          aria-label=\"full width tabs example\"\r\n        >\r\n          <StyledTab label=\"All\" style={{fontFamily:\"inherit\", fontWeight:\"bold\"}} {...a11yProps(0)} />\r\n          <StyledTab label=\"Mentions\" style={{fontFamily:\"inherit\", fontWeight:\"bold\"}} {...a11yProps(1)} />\r\n        </Tabs>\r\n      </AppBar>\r\n    \r\n      <TabPanel value={value} index={0} dir={theme.direction}>\r\n        <NotiBox>\r\n          <NotiDiv_top>\r\n            <WhoMask>\r\n              <img src=\"https://pbs.twimg.com/profile_images/1387421728251408385/gVcCautU_400x400.jpg\"/>\r\n            </WhoMask>\r\n\r\n            <HoverDIV>\r\n              <MoreHoriz />\r\n            </HoverDIV>\r\n          </NotiDiv_top>\r\n\r\n          <NotiDiv_bottom>\r\n            <p style={{marginBottom:\"0.8rem\", fontSize:\"15px\"}}>\r\n              <b>BTS_official</b> Retweeted a photo from Rolling Stone\r\n            </p>\r\n            <p style={{fontSize:\"15px\", color:\"rgb(91, 112, 131)\"}}>In his digital cover story, BTS' Jimin talks perfectionism, missing Army, his love of dancing, and more. #BTSxRollingStone https://rol.st/2RRTFvk https://pic.twitter.com/g9Dlb5MXfp</p>\r\n          </NotiDiv_bottom>\r\n        </NotiBox>\r\n      </TabPanel>\r\n      \r\n      <TabPanel value={value} index={1} dir={theme.direction}>\r\n        <MentionsDiv>\r\n          <h3 style={{margin: \"1rem\"}}>Nothing to see here  yet</h3>\r\n          <p style={{color:\"grey\", fontSize: \"14px\"}}>When someone mentions you, youll find it here.</p>\r\n        </MentionsDiv>\r\n      </TabPanel>\r\n    </div>\r\n  );\r\n}\r\n//=================== Main Component ===================;=================\r\nexport default function Notification() {\r\n\r\n  return (\r\n    <NotiContainer>\r\n      <Shared.Header>Notification</Shared.Header>\r\n      <FullWidthTabs />\r\n    </NotiContainer>\r\n  );\r\n}\r\n\r\n//========= Styled Components ===============\r\nconst NotiContainer = styled(Shared.Container)``;\r\n\r\nconst StyledTab = styled(Tab)`\r\n  transition: all 300ms ease-in-out;\r\n\r\n  &:hover {\r\n    background: #E8F5FE;\r\n  }\r\n`;\r\n\r\nconst NotiBox = styled.div`\r\n  background: white;\r\n  cursor: pointer;\r\n  width: 100%;\r\n  padding: 1rem;\r\n  border-bottom: 1px solid #EBEEF0;\r\n\r\n  &:hover {\r\n    background: #EFF1F2;\r\n  }\r\n`;\r\n\r\nconst NotiDiv_top = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  margin-bottom: 0.8rem;\r\n`;\r\n\r\nconst WhoMask = styled(Shared.ImageMask)`\r\n  border-radius: 50%;\r\n  width: 2rem;\r\n  height: 2rem;\r\n`;\r\n\r\nconst HoverDIV = styled(Shared.HoverDIV)`\r\n  &:hover {\r\n    color: #1DA1F2;\r\n  }\r\n`;\r\n\r\nconst NotiDiv_bottom = styled.div``;\r\n\r\nconst MentionsDiv = styled.div`\r\n  text-align: center;\r\n`;\r\n\r\n","import { HashRouter, Route, Switch } from \"react-router-dom\";\r\nimport { useInit } from 'components_controll/ProvideAuth';\r\nimport Contact from 'routes/Contact';\r\nimport Home from 'routes/Home';\r\nimport LogIn from 'routes/LogIn';\r\nimport Profile from 'routes/Profile';\r\nimport Navigation from 'components_view/Navigation.js';\r\nimport styled from 'styled-components';\r\nimport AddContact from 'routes/AddContact';\r\nimport ChatBox from './ChatBox';\r\nimport { useChat } from 'components_controll/ProvideChat';\r\nimport { faTwitter } from '@fortawesome/free-brands-svg-icons';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport RightAside from './RightAside';\r\nimport Notification from 'routes/Notification';\r\n\r\nexport default function AppRouter() {\r\n  const {isInit, isUserLogin} = useInit();\r\n  const {isChatting} = useChat();\r\n\r\n  return (\r\n    <div>\r\n      {/*  app initializing has been finished  */}\r\n      {isInit ? (\r\n        <HashRouter>\r\n          {isUserLogin ? (\r\n            //user logged in\r\n            <div style={{display: \"flex\", flexDirection: \"row\"}}>              \r\n              <Navigation />\r\n              <Switch>\r\n                <RouteContainer>\r\n                  <Route exact path=\"/\"> <Home /> </Route>\r\n                  <Route exact path=\"/contact\"> <Contact /> </Route>\r\n                  <Route exact path=\"/add_contact\"> <AddContact /> </Route>\r\n                  <Route exact path=\"/profile\"> <Profile /> </Route>\r\n                  <Route exact path=\"/notification\"> <Notification /> </Route>\r\n                </RouteContainer>\r\n              </Switch>\r\n              {isChatting && <ChatBox />} {/*  If user is chatting, ChatBox appears  */}\r\n              <RightAside />\r\n            </div>\r\n          ) : (\r\n            // no user logged in\r\n            <Route exact path=\"/\"> <LogIn /> </Route>\r\n          )}\r\n        </HashRouter>\r\n      ) : (\r\n        // show loading page when app is initializing\r\n        <FontAwesomeIcon icon={faTwitter} color={\"#1DA1F2\"} size=\"4x\" style={{marginTop: \"20rem\"}}/>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\n// ================ Styled Components ==============\r\nconst RouteContainer = styled.div`\r\n  border-left: 1px solid #EBEEF0;\r\n  border-right: 1px solid #EBEEF0;\r\n  \r\n  position: relative;\r\n  width: 600px;\r\n  margin-left: 16rem;\r\n  margin-top: 3.5rem;\r\n`;","import { createMuiTheme } from '@material-ui/core/styles';\r\n\r\nconst theme = createMuiTheme({\r\n  palette: {\r\n    primary: { \r\n      // light: ',\r\n      main: '#1DA1F2',\r\n      // dark: ,\r\n      contrastText: 'white',\r\n    },\r\n    secondary: { \r\n      // light: ',\r\n      main: '#ffcc00',\r\n      // dark: ,\r\n      contrastText: 'black',\r\n    },\r\n  }\r\n\r\n  // typography: {\r\n  //   fontFamily:['Arial']\r\n  // }\r\n});\r\n\r\nexport default theme;","import AppRouter from \"components_view/AppRouter\";\r\nimport ProvideAuth  from 'components_controll/ProvideAuth';\r\nimport styled, { createGlobalStyle } from 'styled-components';\r\nimport ProvideYuweets from 'components_controll/ProvideYuweets';\r\nimport ProvideContact from 'components_controll/ProvideContact';\r\n\r\nimport { ThemeProvider } from '@material-ui/core';\r\nimport theme from './theme.js'\r\nimport ProvideChat from 'components_controll/ProvideChat.js';\r\nimport ProvideProfile from 'components_controll/ProvideProfile.js';\r\nimport ProvideOthers from 'components_controll/ProvideOthers.js';\r\nimport ProvideModal from 'components_controll/ProvideModal.js';\r\n\r\nexport default function App() {\r\n  return (\r\n    <AppContainer>\r\n      <GlobalStyle />\r\n      <ProvideAuth>\r\n        <ProvideProfile>\r\n        <ProvideYuweets>\r\n        <ProvideContact>\r\n\r\n        <ProvideChat>\r\n        <ThemeProvider theme={theme}>\r\n        <ProvideOthers>\r\n        <ProvideModal>\r\n        \r\n          <AppRouter />\r\n\r\n        </ProvideModal>\r\n        </ProvideOthers>\r\n        </ThemeProvider>\r\n        </ProvideChat>\r\n\r\n        </ProvideContact>\r\n        </ProvideYuweets>\r\n        </ProvideProfile>\r\n      </ProvideAuth>\r\n      {/* <Footer>&copy; Yuwitter {new Date().getFullYear()}</Footer> */}\r\n    \r\n    </AppContainer>\r\n  );\r\n}\r\n\r\n// ================ Styled Components ==============\r\nconst AppContainer = styled.div`\r\n  display: flex;\r\n  justify-content: center;\r\n\t/* background: beige; */\r\n  height: 100vh;\r\n  /* width: 100vw; */\r\n`;\r\n\r\nconst GlobalStyle = createGlobalStyle`\r\n  * {\r\n    box-sizing: border-box;\r\n    padding: 0;\r\n    margin: 0;\r\n  }\r\n\r\n  body {\r\n    ${'' /* background: grey; */}\r\n    padding: 0 9rem;\r\n    user-select: none;\r\n    font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, Oxygen,\r\n    Ubuntu, Cantarell, \"Open Sans\", \"Helvetica Neue\", sans-serif;\r\n    font-size: 1rem;\r\n  }\r\n\r\n  img {\r\n    user-drag: none; \r\n    user-select: none;\r\n    -moz-user-select: none;\r\n    -webkit-user-drag: none;\r\n    -webkit-user-select: none;\r\n    -ms-user-select: none;\r\n    pointer-events:none;\r\n  }\r\n  \r\n  input {\r\n    all: unset;\r\n    box-sizing: border-box;\r\n    appearance: none;\r\n  }\r\n\r\n  button {\r\n    color: white;\r\n    border: none;\r\n    outline: none;\r\n    cursor: pointer;\r\n  }\r\n  \r\n  a {\r\n    text-decoration: none;\r\n    color: inherit;\r\n  }\r\n`;\r\n\r\nconst Footer = styled.footer`\r\n  height: 30px;\r\n  text-align: center;\r\n  margin-top: 3rem;\r\n  margin-bottom: 1rem;\r\n`;\r\n\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from 'components_view/App';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n"],"sourceRoot":""}